<!DOCTYPE html>
<html lang="en">
<head>
	<title>Senior Project Web App</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="sources/bootstrap-datetimepicker-master/build/css/bootstrap-datetimepicker.min.css">
	<script type src="https://d3js.org/d3.v4.0.0-alpha.44.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="sources/canvasjs.min.js"></script>
    <script type="text/javascript" src="sources/moment-develop/moment.js"></script>
    <script type="text/javascript" src="sources/bootstrap-master/js/transition.js"></script>
    <script type="text/javascript" src="sources/bootstrap-master/js/collapse.js"></script>
    <script type="text/javascript" src="sources/bootstrap-master/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="sources/bootstrap-datetimepicker-master/build/js/bootstrap-datetimepicker.min.js"></script>
	<style>
	#div1 {margin:10px;font-size:1.25em;}
	table {border-collapse:collapse;border:1px solid #7f7f7f;}
	td {border:1px solid #7f7f7f;width:50px;height:50px;text-align:center;}
    div.relative {
        position: relative;
        bottom: -35px;
        left: 850px;
    }
	</style>
</head>
<body>
    
    <ul class=
    <div class="containter">
    <div class="relative">
        <p><a href="datecomparison.html">Trends Comparison Page</a></p>
    </div>


        <ul class="nav nav-tabs">
           <li class="active"><a data-toggle="tab" href='#div3'>Line Graph</a></li>
           <li><a data-toggle="tab" href="#div4">Pie Chart</a></li>
           <li><a data-toggle="tab" href="#div5">Column Graph</a></i>
        </ul>
        
        <div class="tab-content">
            <div id="div3" class="tab-pane fade in active" style="height: 800px; width: 100%"></div>
            <div id="div4" class="tab-pane fade" style="height: 500px; width: 50%"></div>
            <div id="div5" class="tab-pane fade" style="height: 500px; width: 50%"></div>
        </div>
        <div class="filter-boxes">
            <div>Building Filters</div>
        	<input class="filterCheckbox" type="checkbox" checked> Glennan
        	<input class="filterCheckbox" type="checkbox" checked> Nord
        	<input class="filterCheckbox" type="checkbox" checked> Olin 480
        	<input class="filterCheckbox" type="checkbox" checked> Olin 208
        	<input class="filterCheckbox" type="checkbox" checked> Rock 480
        	<input class="filterCheckbox" type="checkbox" checked> Sears 480
        	<input class="filterCheckbox" type="checkbox" checked> Sears 208
        	<input class="filterCheckbox" type="checkbox" checked> Tomlinson
        	<input class="filterCheckbox" type="checkbox" checked> White
        	<input class="filterCheckbox" type="checkbox" checked> Wick 208
        	<input class="filterCheckbox" type="checkbox" checked> Wick 480
        	<input class="filterCheckbox" type="checkbox" checked> Yost
        	<input class="filterCheckbox" type="checkbox" checked> Olin(Sum)
        	<input class="filterCheckbox" type="checkbox" checked> Sears(Sum)
        	<input class="filterCheckbox" type="checkbox" checked> Wick(Sum)
        	<br>
        	<button id="filter" onclick="filterGraphData()">Filter Results</button>
        </div>
</div>
    
    <div class="container">
        <div class = "row">
            <div class='col-sm-6' >
                <div class='col-md-5'>
                    <div class="form-group">
                        <div>Start</div>
                        <div class='input-group date' id='datetimepicker1'>
                            <input type='text' class="form-control"/>
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class='col-md-5'>
                    <div class="form-group">
                        <div>End</div>
                        <div class='input-group date' id='datetimepicker2'>
                            <input type='text' class="form-control"/>
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                        </div>
                    </div>
                </div>
                <script type="text/javascript">
                    $(function() {
                      $('#datetimepicker1').datetimepicker();
                      $('#datetimepicker2').datetimepicker( {
                                                           useCurrent: false
                      });
                      });
                      $("#datetimepicker1").on("dp.change", function(e) {
                                               $('#datetimepicker2').data("DateTimePicker").minDate(e.date);
                                               });
                                               $("#datetimepicker2").on("dp.change", function(e) {
                                                   $('#datetimepicker1').data("DateTimePicker").maxDate(e.date);
                                                                        
                                                                        $('#datetimepicker3').datetimepicker();
                                                                        $('#datetimepicker4').datetimepicker( {
                                                                                                             useCurrent: false
                                                                                                             });
                                                                        });
                                                                        $("#datetimepicker3").on("dp.change", function(e) {
                                                                                                 $('#datetimepicker4').data("DateTimePicker").minDate(e.date);
                                                                                                 });
                                                                                                 $("#datetimepicker4").on("dp.change", function(e) {
                                                                                                                          $('#datetimepicker3').data("DateTimePicker").maxDate(e.date);
                                               });
                </script>
                <br>
                <button id="setDateTime" onclick="setDateTime()">Set Date and Time Range</button>
            </div>
            
            <div class = "row">
                <div>Time Duration of Each Plotted Point</div>
                <select id="mySelect">
                    <option value="seconds">10 Seconds</option>
                    <option value="minutes">1 Minute</option>
                    <option value="hours">1 Hour</option>
                </select>
                <button type="button" onclick="resolution()">Set Resolution</button>
            </div>
            
            <div class = "row">
                <div>Measures to Display</div>
                <select id="mySelect2">
                    <option value="avg">Average</option>
                    <option value="total">Total</option>
                    <option value="peak">Peak</option>
                </select>
                <button type="button" onclick="measures()">Set Measures</button>
            </div>
            
    </div>
        
    <script>

    //Variables for the canvasjs charts we use, so that they can be updated from any function.
    var lineChart;
    var pieChart;
    var columnGraph;
    
    //Arrays for storing the averages of each list in their respective resolutions
    
    var tempGlennanResList = [];
    var tempNordResList = [];
    var tempOlin480ResList = [];
    var tempOlin208ResList = [];
    var tempRock480ResList = [];
    var tempSears480ResList = [];
    var tempSears208ResList = [];
    var tempTomlinsonResList = [];
    var tempWhiteResList = [];
    var tempWick208ResList = [];
    var tempWick480ResList = [];
    var tempYostResList = [];
    var tempOlinSumResList = [];
    var tempSearsSumResList = [];
    var tempWickSumResList = [];
    
    var glennanResList = [];
    var nordResList = [];
    var olin480ResList = [];
    var olin208ResList = [];
    var rock480ResList = [];
    var sears480ResList = [];
    var sears208ResList = [];
    var tomlinsonResList = [];
    var whiteResList = [];
    var wick208ResList = [];
    var wick480ResList = [];
    var yostResList = [];
    var olinSumResList = [];
    var searsSumResList = [];
    var wickSumResList = [];
    
    var resDTArray = [];
    
    //For the date & time setter when dealing with the resolution setter
    var glennanResTotalsList = [];
    var nordResTotalsList = [];
    var olin480ResTotalsList = [];
    var olin208ResTotalsList = [];
    var rock480ResTotalsList = [];
    var sears480ResTotalsList = [];
    var sears208ResTotalsList = [];
    var tomlinsonResTotalsList = [];
    var whiteResTotalsList = [];
    var wick208ResTotalsList = [];
    var wick480ResTotalsList = [];
    var yostResTotalsList = [];
    var olinSumResTotalsList = [];
    var searsSumResTotalsList = [];
    var wickSumResTotalsList = [];
    
    //For measure when it comes to the averages
    var glennanAvgTotalsList = [];
    var nordAvgTotalsList = [];
    var olin480AvgTotalsList = [];
    var olin208AvgTotalsList = [];
    var rock480AvgTotalsList = [];
    var sears480AvgTotalsList = [];
    var sears208AvgTotalsList = [];
    var tomlinsonAvgTotalsList = [];
    var whiteAvgTotalsList = [];
    var wick208AvgTotalsList = [];
    var wick480AvgTotalsList = [];
    var yostAvgTotalsList = [];
    var olinSumAvgTotalsList = [];
    var searsSumAvgTotalsList = [];
    var wickSumAvgTotalsList = [];
    
    //For measure when it comes to the totals
    var glennanSumTotalsList = [];
    var nordSumTotalsList = [];
    var olin480SumTotalsList = [];
    var olin208SumTotalsList = [];
    var rock480SumTotalsList = [];
    var sears480SumTotalsList = [];
    var sears208SumTotalsList = [];
    var tomlinsonSumTotalsList = [];
    var whiteSumTotalsList = [];
    var wick208SumTotalsList = [];
    var wick480SumTotalsList = [];
    var yostSumTotalsList = [];
    var olinSumSumTotalsList = [];
    var searsSumSumTotalsList = [];
    var wickSumSumTotalsList = [];
    
    //For measure and everything else when it comes to the peak
    var glennanMaxTotalsList = [];
    var nordMaxTotalsList = [];
    var olin480MaxTotalsList = [];
    var olin208MaxTotalsList = [];
    var rock480MaxTotalsList = [];
    var sears480MaxTotalsList = [];
    var sears208MaxTotalsList = [];
    var tomlinsonMaxTotalsList = [];
    var whiteMaxTotalsList = [];
    var wick208MaxTotalsList = [];
    var wick480MaxTotalsList = [];
    var yostMaxTotalsList = [];
    var olinSumMaxTotalsList = [];
    var searsSumMaxTotalsList = [];
    var wickSumMaxTotalsList = [];
  
    
    //Arrays to store the values we receive from the SQL server.
    var dateTimeArray = [];
    var glennanArray= [];
    var nordArray = [];
    var olin480Array = [];
    var olin208Array = [];
    var rock480Array = [];
    var sears480Array = [];
    var sears208Array = [];
    var tomlinsonArray = [];
    var whiteArray = [];
    var wick208Array = [];
    var wick480Array = [];
    var yostArray = [];
    var olinSumArray = [];
    var searsSumArray = [];
    var wickSumArray = [];

    //Arrays to store the line data for each chart in its proper format (default 10-second increments).
    var chartDatArray = [];
    	var glennanLine = [];
    	var nordLine = [];
    	var olin480Line = [];
    	var olin208Line = [];
    	var rock480Line = [];
    	var sears480Line = [];
    	var sears208Line = [];
    	var tomlinsonLine = [];
    	var whiteLine = [];
    	var wick208Line = [];
    	var wick480Line = [];
    	var yostLine = [];
    	var olinSumLine = [];
    	var searsSumLine = [];
    	var wickSumLine = [];
        
        //Copies of each line
        var glennanLineCopy = [];
    	var nordLineCopy = [];
    	var olin480LineCopy = [];
    	var olin208LineCopy = [];
    	var rock480LineCopy = [];
    	var sears480LineCopy = [];
    	var sears208LineCopy = [];
    	var tomlinsonLineCopy = [];
    	var whiteLineCopy = [];
    	var wick208LineCopy = [];
    	var wick480LineCopy = [];
    	var yostLineCopy = [];
    	var olinSumLineCopy = [];
    	var searsSumLineCopy = [];
    	var wickSumLineCopy = [];
        
        
        //Each line with a different (set) increment
        var glennanLineCopy2 = [];
    	var nordLineCopy2 = [];
    	var olin480LineCopy2 = [];
    	var olin208LineCopy2 = [];
    	var rock480LineCopy2 = [];
    	var sears480LineCopy2 = [];
    	var sears208LineCopy2 = [];
    	var tomlinsonLineCopy2 = [];
    	var whiteLineCopy2 = [];
    	var wick208LineCopy2 = [];
    	var wick480LineCopy2 = [];
    	var yostLineCopy2 = [];
    	var olinSumLineCopy2 = [];
    	var searsSumLineCopy2 = [];
    	var wickSumLineCopy2 = [];
        
        var glennanLine2 = [];
    	var nordLine2 = [];
    	var olin480Line2 = [];
    	var olin208Line2 = [];
    	var rock480Line2 = [];
    	var sears480Line2 = [];
    	var sears208Line2 = [];
    	var tomlinsonLine2 = [];
    	var whiteLine2 = [];
    	var wick208Line2 = [];
    	var wick480Line2 = [];
    	var yostLine2 = [];
    	var olinSumLine2 = [];
    	var searsSumLine2 = [];
    	var wickSumLine2 = [];
        
        var glennanLine2Copy = [];
    	var nordLine2Copy = [];
    	var olin480Line2Copy = [];
    	var olin208Line2Copy = [];
    	var rock480Line2Copy = [];
    	var sears480Line2Copy = [];
    	var sears208Line2Copy = [];
    	var tomlinsonLine2Copy = [];
    	var whiteLine2Copy = [];
    	var wick208Line2Copy = [];
    	var wick480Line2Copy = [];
    	var yostLine2Copy = [];
    	var olinSumLine2Copy = [];
    	var searsSumLine2Copy = [];
    	var wickSumLine2Copy = [];
        
        var dateTimeArrayCopy = [];
        

    //Averages for each sensor's data. Used by the Pie chart.
    var chartAvgArray = [];
    	var glennanAvg = 0;
    	var nordAvg = 0;
    	var olin480Avg = 0;
    	var olin208Avg = 0;
    	var rock480Avg = 0;
    	var sears480Avg = 0;
    	var sears208Avg = 0;
    	var tomlinsonAvg = 0;
    	var whiteAvg = 0;
    	var wick208Avg = 0;
    	var wick480Avg = 0;
    	var yostAvg = 0;
    	var olinSumAvg = 0;
    	var searsSumAvg = 0;
    	var wickSumAvg = 0;
        
    //Totals for each sensor's data.
    var chartTotalArray = [];
    var glennanTotal = 0;
    var nordTotal = 0;
    var olin480Total = 0;
    var olin208Total = 0;
    var rock480Total = 0;
    var sears480Total = 0;
    var sears208Total = 0;
    var tomlinsonTotal = 0;
    var whiteTotal = 0;
    var wick208Total = 0;
    var wick480Total = 0;
    var yostTotal = 0;
    var olinSumTotal = 0;
    var searsSumTotal = 0;
    var wickSumTotal = 0;
    
    var chartPeakArray = [];
    var glennanPeak = 0;
    var nordPeak = 0;
    var olin480Peak = 0;
    var olin208Peak = 0;
    var rock480Peak = 0;
    var sears480Peak = 0;
    var sears208Peak = 0;
    var tomlinsonPeak = 0;
    var whitePeak = 0;
    var wick208Peak = 0;
    var wick480Peak = 0;
    var yostPeak = 0;
    var olinSumPeak = 0;
    var searsSumPeak = 0;
    var wickSumPeak = 0;

    var chartCurrentArray = [];
    
    var filteredBuildings = [];

    var filtered = false;
    var setDate = false;
    
    //Sets whether we are using 10-second, 1-minute, 1-hour, 1-week, or 1-month intervals.
    var seconds = true;
    var minutes = false;
    var hours = false;
    
    //Sets whether we're using averages, totals, or peak values
    var average = true;
    var total = false;
    var max = false;
    
    
    var minDate;
    var maxDate;
    
    var minDateCopy;
    var maxDateCopy;
    
    //for datetimerange
    var from;
    var to;
    
    //for resolution
    var from2;
    var to2;
    
    //for measurements
    var from3;
    var to3;
    

    //The current line we are on in the SQL. used for testing with my homemade database.
    //You should not need this once you hook it up to the live server and edit getsqlline to call the most recent line.
    var currentline = 90000;


    //Sets the repeating function that causes the page to grab a new line from the database.
    var secondsBetweenUpdate = 3;
    var updateInterval = setInterval(function(){ grabNewLine() }, secondsBetweenUpdate * 1000);
    //The function currently does not clear, and as this will be hooked up to a live feed there should be no need to make it.
    //If, however, you do need to end the autoupdate, use clearInterval(updateInterval)
   
   
   //Returns the current week of the year
   Date.prototype.getWeek = function() {
       var d = new Date(this.getFullYear(), 0, 1);
       return Math.ceil((((this - d)/86400000)+d.getDay()+1)/7);
   }
   

    //Code to filter unwanted sensors out of our graphs. Called when the "Filter Results" button is pressed.
	function filterGraphData(){
		filtered = true;	//Set the filtered variable to true, so the update method knows that the user is filtering their desired data.
		clearAllArrays();	//Clears all graph arrays, so we can fill them with only the desired sensors.
        
        
        
        
        //Do something to also make this work with the resolution method!
        
        //Makes it so that it always starts off without the right names so it can be applied to the setDateTime method.
        filteredBuildings = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15"];


        var filters = document.getElementsByClassName('filterCheckbox');	//Finds the status of each filter checkbox.
        //Go through each filter, and add the appropriate data to the arrays if the sensor is enabled.
        
        if(seconds) {
            var lastIndex = dateTimeArray.length - 1;
            
            
            if(filters[0].checked){
                chartDatArray.push({type:"line",name:"Glennan",showInLegend:true,dataPoints:glennanLineCopy})
                chartAvgArray.push({ y: glennanAvg, indexLabel: "Glennan"})
                chartCurrentArray.push({ y: glennanArray[lastIndex], indexLabel: "Glennan"})
            }
            else {
                filteredBuildings[0] = "Glennan";
            }
            
            if(filters[1].checked){
                chartDatArray.push({type:"line",name:"Nord",showInLegend:true,dataPoints:nordLineCopy})
                chartAvgArray.push({ y: nordAvg, indexLabel: "Nord"})
                chartCurrentArray.push({ y: nordArray[lastIndex], indexLabel: "Nord"})
            }
            else {
                filteredBuildings[1] = "Nord";
            }
            
            if(filters[2].checked){
                chartDatArray.push({type:"line",name:"Olin 480",showInLegend:true,dataPoints:olin480LineCopy})
                chartAvgArray.push({ y: olin480Avg, indexLabel: "Olin 480"})
                chartCurrentArray.push({ y: olin480Array[lastIndex], indexLabel: "Olin 480"})
            }
            else {
                filteredBuildings[2] = "Olin 480";
            }
            
            if(filters[3].checked){
                chartDatArray.push({type:"line",name:"Olin 208",showInLegend:true,dataPoints:olin208LineCopy})
                chartAvgArray.push({ y: olin208Avg, indexLabel: "Olin 208"})
                chartCurrentArray.push({ y: olin208Array[lastIndex], indexLabel: "Olin 208"})
            }
            else {
                filteredBuildings[3] = "Olin 208";
            }
            
            if(filters[4].checked){
                chartDatArray.push({type:"line",name:"Rock 480",showInLegend:true,dataPoints:rock480LineCopy})
                chartAvgArray.push({ y: rock480Avg, indexLabel: "Rock 480"})
                chartCurrentArray.push({ y: rock480Array[lastIndex], indexLabel: "Rock 480"})
            }
            else {
                filteredBuildings[4] = "Rock 480";
            }
            
            if(filters[5].checked){
                chartDatArray.push({type:"line",name:"Sears 480",showInLegend:true,dataPoints:sears480LineCopy})
                chartAvgArray.push({ y: sears480Avg, indexLabel: "Sears 480"})
                chartCurrentArray.push({ y: sears480Array[lastIndex], indexLabel: "Sears 480"})
            }
            else {
                filteredBuildings[5] = "Sears 480";
            }
            
            if(filters[6].checked){
                chartDatArray.push({type:"line",name:"Sears 208",showInLegend:true,dataPoints:sears208LineCopy})
                chartAvgArray.push({ y: sears208Avg, indexLabel: "Sears 208"})
                chartCurrentArray.push({ y: sears208Array[lastIndex], indexLabel: "Sears 208"})
            }
            else {
                filteredBuildings[6] = "Sears 208";
            }
            
            if(filters[7].checked){
                chartDatArray.push({type:"line",name:"Tomlinson",showInLegend:true,dataPoints:tomlinsonLineCopy})
                chartAvgArray.push({ y: tomlinsonAvg, indexLabel: "Tomlinson"})
                chartCurrentArray.push({ y: tomlinsonArray[lastIndex], indexLabel: "Tomlinson"})
            }
            else {
                filteredBuildings[7] = "Tomlinson";
            }
            
            if(filters[8].checked){
                chartDatArray.push({type:"line",name:"White",showInLegend:true,dataPoints:whiteLineCopy})
                chartAvgArray.push({ y: whiteAvg, indexLabel: "White"})
                chartCurrentArray.push({ y: whiteArray[lastIndex], indexLabel: "White"})
            }
            else {
                filteredBuildings[8] = "White";
            }
            
            if(filters[9].checked){
                chartDatArray.push({type:"line",name:"Wick 208",showInLegend:true,dataPoints:wick208LineCopy})
                chartAvgArray.push({ y: wick208Avg, indexLabel: "Wick 208"})
                chartCurrentArray.push({ y: wick208Array[lastIndex], indexLabel: "Wick 208"})
            }
            else {
                filteredBuildings[9] = "Wick 208";
            }
            
            if(filters[10].checked){
                chartDatArray.push({type:"line",name:"Wick 480",showInLegend:true,dataPoints:wick480LineCopy})
                chartAvgArray.push({ y: wick480Avg, indexLabel: "Wick 480"})
                chartCurrentArray.push({ y: wick480Array[lastIndex], indexLabel: "Wick 480"})
            }
            else {
                filteredBuildings[10] = "Wick 480";
            }
            
            if(filters[11].checked){
                chartDatArray.push({type:"line",name:"Yost",showInLegend:true,dataPoints:yostLineCopy})
                chartAvgArray.push({ y: yostAvg, indexLabel: "Yost"})
                chartCurrentArray.push({ y: yostArray[lastIndex], indexLabel: "Yost"})
            }
            else {
                filteredBuildings[11] = "Yost";
            }
            
            if(filters[12].checked){
                chartDatArray.push({type:"line",name:"Olin (Sum)",showInLegend:true,dataPoints:olinSumLineCopy})
                chartAvgArray.push({ y: olinSumAvg, indexLabel: "Olin (Sum)"})
                chartCurrentArray.push({ y: olinSumArray[lastIndex], indexLabel: "Olin (Sum)"})
            }
            else {
                filteredBuildings[12] = "Olin (Sum)";
            }
            
            if(filters[13].checked){
                chartDatArray.push({type:"line",name:"Sears (Sum)",showInLegend:true,dataPoints:searsSumLineCopy})
                chartAvgArray.push({ y: searsSumAvg, indexLabel: "Sears (Sum)"})
                chartCurrentArray.push({ y: searsSumArray[lastIndex], indexLabel: "Sears (Sum)"})
            }
            else {
                filteredBuildings[13] = "Sears (Sum)";
            }
            
            if(filters[14].checked){
                chartDatArray.push({type:"line",name:"Wick (Sum)",showInLegend:true,dataPoints:wickSumLineCopy})
                chartAvgArray.push({ y: wickSumAvg, indexLabel: "Wick (Sum)"})
                chartCurrentArray.push({ y: wickSumArray[lastIndex], indexLabel: "Wick (Sum)"})
            }
            else {
                filteredBuildings[14] = "Wick (Sum)";
            }
        }
        
        else {
            var lastIndex = resDTArray.length - 1;
            
            
            if(filters[0].checked){
                chartDatArray.push({type:"line",name:"Glennan",showInLegend:true,dataPoints:glennanLineCopy2})
                chartAvgArray.push({ y: glennanAvg, indexLabel: "Glennan"})
                chartCurrentArray.push({ y: glennanResList[lastIndex], indexLabel: "Glennan"})
            }
            else {
                filteredBuildings[0] = "Glennan";
            }
            
            if(filters[1].checked){
                chartDatArray.push({type:"line",name:"Nord",showInLegend:true,dataPoints:nordLineCopy2})
                chartAvgArray.push({ y: nordAvg, indexLabel: "Nord"})
                chartCurrentArray.push({ y: nordResList[lastIndex], indexLabel: "Nord"})
            }
            else {
                filteredBuildings[1] = "Nord";
            }
            
            if(filters[2].checked){
                chartDatArray.push({type:"line",name:"Olin 480",showInLegend:true,dataPoints:olin480LineCopy2})
                chartAvgArray.push({ y: olin480Avg, indexLabel: "Olin 480"})
                chartCurrentArray.push({ y: olin480ResList[lastIndex], indexLabel: "Olin 480"})
            }
            else {
                filteredBuildings[2] = "Olin 480";
            }
            
            if(filters[3].checked){
                chartDatArray.push({type:"line",name:"Olin 208",showInLegend:true,dataPoints:olin208LineCopy2})
                chartAvgArray.push({ y: olin208Avg, indexLabel: "Olin 208"})
                chartCurrentArray.push({ y: olin208ResList[lastIndex], indexLabel: "Olin 208"})
            }
            else {
                filteredBuildings[3] = "Olin 208";
            }
            
            if(filters[4].checked){
                chartDatArray.push({type:"line",name:"Rock 480",showInLegend:true,dataPoints:rock480LineCopy2})
                chartAvgArray.push({ y: rock480Avg, indexLabel: "Rock 480"})
                chartCurrentArray.push({ y: rock480ResList[lastIndex], indexLabel: "Rock 480"})
            }
            else {
                filteredBuildings[4] = "Rock 480";
            }
            
            if(filters[5].checked){
                chartDatArray.push({type:"line",name:"Sears 480",showInLegend:true,dataPoints:sears480LineCopy2})
                chartAvgArray.push({ y: sears480Avg, indexLabel: "Sears 480"})
                chartCurrentArray.push({ y: sears480ResList[lastIndex], indexLabel: "Sears 480"})
            }
            else {
                filteredBuildings[5] = "Sears 480";
            }
            
            if(filters[6].checked){
                chartDatArray.push({type:"line",name:"Sears 208",showInLegend:true,dataPoints:sears208LineCopy2})
                chartAvgArray.push({ y: sears208Avg, indexLabel: "Sears 208"})
                chartCurrentArray.push({ y: sears208ResList[lastIndex], indexLabel: "Sears 208"})
            }
            else {
                filteredBuildings[6] = "Sears 208";
            }
            
            if(filters[7].checked){
                chartDatArray.push({type:"line",name:"Tomlinson",showInLegend:true,dataPoints:tomlinsonLineCopy2})
                chartAvgArray.push({ y: tomlinsonAvg, indexLabel: "Tomlinson"})
                chartCurrentArray.push({ y: tomlinsonResList[lastIndex], indexLabel: "Tomlinson"})
            }
            else {
                filteredBuildings[7] = "Tomlinson";
            }
            
            if(filters[8].checked){
                chartDatArray.push({type:"line",name:"White",showInLegend:true,dataPoints:whiteLineCopy2})
                chartAvgArray.push({ y: whiteAvg, indexLabel: "White"})
                chartCurrentArray.push({ y: whiteResList[lastIndex], indexLabel: "White"})
            }
            else {
                filteredBuildings[8] = "White";
            }
            
            if(filters[9].checked){
                chartDatArray.push({type:"line",name:"Wick 208",showInLegend:true,dataPoints:wick208LineCopy2})
                chartAvgArray.push({ y: wick208Avg, indexLabel: "Wick 208"})
                chartCurrentArray.push({ y: wick208ResList[lastIndex], indexLabel: "Wick 208"})
            }
            else {
                filteredBuildings[9] = "Wick 208";
            }
            
            if(filters[10].checked){
                chartDatArray.push({type:"line",name:"Wick 480",showInLegend:true,dataPoints:wick480LineCopy2})
                chartAvgArray.push({ y: wick480Avg, indexLabel: "Wick 480"})
                chartCurrentArray.push({ y: wick480ResList[lastIndex], indexLabel: "Wick 480"})
            }
            else {
                filteredBuildings[10] = "Wick 480";
            }
            
            if(filters[11].checked){
                chartDatArray.push({type:"line",name:"Yost",showInLegend:true,dataPoints:yostLineCopy2})
                chartAvgArray.push({ y: yostAvg, indexLabel: "Yost"})
                chartCurrentArray.push({ y: yostResList[lastIndex], indexLabel: "Yost"})
            }
            else {
                filteredBuildings[11] = "Yost";
            }
            
            if(filters[12].checked){
                chartDatArray.push({type:"line",name:"Olin (Sum)",showInLegend:true,dataPoints:olinSumLineCopy2})
                chartAvgArray.push({ y: olinSumAvg, indexLabel: "Olin (Sum)"})
                chartCurrentArray.push({ y: olinSumResList[lastIndex], indexLabel: "Olin (Sum)"})
            }
            else {
                filteredBuildings[12] = "Olin (Sum)";
            }
            
            if(filters[13].checked){
                chartDatArray.push({type:"line",name:"Sears (Sum)",showInLegend:true,dataPoints:searsSumLineCopy2})
                chartAvgArray.push({ y: searsSumAvg, indexLabel: "Sears (Sum)"})
                chartCurrentArray.push({ y: searsSumResList[lastIndex], indexLabel: "Sears (Sum)"})
            }
            else {
                filteredBuildings[13] = "Sears (Sum)";
            }
            
            if(filters[14].checked){
                chartDatArray.push({type:"line",name:"Wick (Sum)",showInLegend:true,dataPoints:wickSumLineCopy2})
                chartAvgArray.push({ y: wickSumAvg, indexLabel: "Wick (Sum)"})
                chartCurrentArray.push({ y: wickSumResList[lastIndex], indexLabel: "Wick (Sum)"})
            }
            else {
                filteredBuildings[14] = "Wick (Sum)";
            }
        }
        
        
		//Redraw our charts so they display the proper, newly-filtered, data.
    	renderAllCharts();
        
        
        
	}
    
    function setDateTime() {
        //Date properties
        minDate = $('#datetimepicker1').data('DateTimePicker').date()._d;
        maxDate = $('#datetimepicker2').data('DateTimePicker').date()._d;
        
        minDateCopy = minDate;
        maxDateCopy = maxDate;
        
        var minMonth = minDate.getMonth()+1;
        var minDay = minDate.getDate();
        var minYear = minDate.getFullYear();
        var minHrs = minDate.getHours();
        var minMins;
        //Makes sure that there are two digits
        if(minDate.getMinutes() < 10) {
            minMins = "0" + minDate.getMinutes();
        }
        else {
            minMins = minDate.getMinutes();
        }
        
        var maxMonth = maxDate.getMonth()+1;
        var maxDay = maxDate.getDate();
        var maxYear = maxDate.getFullYear();
        var maxHrs = maxDate.getHours();
        var maxMins;
        if(maxDate.getMinutes() < 10) {
            maxMins = "0" + maxDate.getMinutes();
        }
        else {
            maxMins = maxDate.getMinutes();
        }
        
        //Converts the input so it matches the data being examined
        if(seconds || minutes) {
            from = minMonth + "/" + minDay + "/" + minYear + " " + minHrs + ":" + minMins;
            to = maxMonth + "/" + maxDay + "/" + maxYear + " " + maxHrs + ":" + maxMins;
        }
        
        else if(hours) {
            from = minMonth + "/" + minDay + "/" + minYear + " " + minHrs + ":" + "59";
            to = maxMonth + "/" + maxDay + "/" + maxYear + " " + maxHrs + ":" + "59";
        }
        
        
        filtered = true;	//Set the filtered variable to true, so the update method knows that the user is filtering their desired data.
		clearAllArrays();	//Clears all graph arrays, so we can fill them with only the desired sensors.
        
        
        //For the resolution method to use.
//        dateTimeSetterArray = [];
        
        if(seconds) {
            glennanLineCopy = [];
            nordLineCopy = [];
            olin480LineCopy = [];
            olin208LineCopy = [];
            rock480LineCopy = [];
            sears480LineCopy = [];
            sears208LineCopy = [];
            tomlinsonLineCopy = [];
            whiteLineCopy = [];
            wick208LineCopy = [];
            wick480LineCopy = [];
            yostLineCopy = [];
            olinSumLineCopy = [];
            searsSumLineCopy = [];
            wickSumLineCopy = [];
            
            //The following will first push each value into the new array, then shift so it won't be empty
            var minIndex = dateTimeArray.indexOf(from);
            
            
                for(var i = minIndex; i <= dateTimeArray.lastIndexOf(to); i++) {
                    
                    glennanLineCopy.push(glennanLine[i]);
                    nordLineCopy.push(nordLine[i]);
                    olin480LineCopy.push(olin480Line[i]);
                    olin208LineCopy.push(olin208Line[i]);
                    rock480LineCopy.push(rock480Line[i]);
                    sears480LineCopy.push(sears480Line[i]);
                    sears208LineCopy.push(sears208Line[i]);
                    tomlinsonLineCopy.push(tomlinsonLine[i]);
                    whiteLineCopy.push(whiteLine[i]);
                    wick208LineCopy.push(wick208Line[i]);
                    wick480LineCopy.push(wick480Line[i]);
                    yostLineCopy.push(yostLine[i]);
                    olinSumLineCopy.push(olinSumLine[i]);
                    searsSumLineCopy.push(searsSumLine[i]);
                    wickSumLineCopy.push(wickSumLine[i]);
                    
                    
                }
            
            
            
            
            
            lastIndex = dateTimeArray.lastIndexOf(to);
            
            
            //Go through each filter, and add the appropriate data to the arrays if the sensor is enabled.
            if(!(filteredBuildings[0] == "Glennan")){
                chartDatArray.push({type:"line",name:"Glennan",showInLegend:true,dataPoints:glennanLineCopy})
                chartAvgArray.push({ y: glennanAvg, indexLabel: "Glennan"})
                chartCurrentArray.push({ y: glennanArray[lastIndex], indexLabel: "Glennan"})
            }
            if(!(filteredBuildings[1] == "Nord")){
                chartDatArray.push({type:"line",name:"Nord",showInLegend:true,dataPoints:nordLineCopy})
                chartAvgArray.push({ y: nordAvg, indexLabel: "Nord"})
                chartCurrentArray.push({ y: nordArray[lastIndex], indexLabel: "Nord"})
            }
            if(!(filteredBuildings[2] == "Olin 480")){
                chartDatArray.push({type:"line",name:"Olin 480",showInLegend:true,dataPoints:olin480LineCopy})
                chartAvgArray.push({ y: olin480Avg, indexLabel: "Olin 480"})
                chartCurrentArray.push({ y: olin480Array[lastIndex], indexLabel: "Olin 480"})
            }
            if(!(filteredBuildings[3] == "Olin 208")){
                chartDatArray.push({type:"line",name:"Olin 208",showInLegend:true,dataPoints:olin208LineCopy})
                chartAvgArray.push({ y: olin208Avg, indexLabel: "Olin 208"})
                chartCurrentArray.push({ y: olin208Array[lastIndex], indexLabel: "Olin 208"})
            }
            if(!(filteredBuildings[4] == "Rock 480")){
                chartDatArray.push({type:"line",name:"Rock 480",showInLegend:true,dataPoints:rock480LineCopy})
                chartAvgArray.push({ y: rock480Avg, indexLabel: "Rock 480"})
                chartCurrentArray.push({ y: rock480Array[lastIndex], indexLabel: "Rock 480"})
            }
            if(!(filteredBuildings[5] == "Sears 480")){
                chartDatArray.push({type:"line",name:"Sears 480",showInLegend:true,dataPoints:sears480LineCopy})
                chartAvgArray.push({ y: sears480Avg, indexLabel: "Sears 480"})
                chartCurrentArray.push({ y: sears480Array[lastIndex], indexLabel: "Sears 480"})
            }
            if(!(filteredBuildings[6] == "Sears 208")){
                chartDatArray.push({type:"line",name:"Sears 208",showInLegend:true,dataPoints:sears208LineCopy})
                chartAvgArray.push({ y: sears208Avg, indexLabel: "Sears 208"})
                chartCurrentArray.push({ y: sears208Array[lastIndex], indexLabel: "Sears 208"})
            }
            if(!(filteredBuildings[7] == "Tomlinson")){
                chartDatArray.push({type:"line",name:"Tomlinson",showInLegend:true,dataPoints:tomlinsonLineCopy})
                chartAvgArray.push({ y: tomlinsonAvg, indexLabel: "Tomlinson"})
                chartCurrentArray.push({ y: tomlinsonArray[lastIndex], indexLabel: "Tomlinson"})
            }
            if(!(filteredBuildings[8] == "White")){
                chartDatArray.push({type:"line",name:"White",showInLegend:true,dataPoints:whiteLineCopy})
                chartAvgArray.push({ y: whiteAvg, indexLabel: "White"})
                chartCurrentArray.push({ y: whiteArray[lastIndex], indexLabel: "White"})
            }
            if(!(filteredBuildings[9] == "Wick 208")){
                chartDatArray.push({type:"line",name:"Wick 208",showInLegend:true,dataPoints:wick208LineCopy})
                chartAvgArray.push({ y: wick208Avg, indexLabel: "Wick 208"})
                chartCurrentArray.push({ y: wick208Array[lastIndex], indexLabel: "Wick 208"})
            }
            if(!(filteredBuildings[10] == "Wick 480")){
                chartDatArray.push({type:"line",name:"Wick 480",showInLegend:true,dataPoints:wick480LineCopy})
                chartAvgArray.push({ y: wick480Avg, indexLabel: "Wick 480"})
                chartCurrentArray.push({ y: wick480Array[lastIndex], indexLabel: "Wick 480"})
            }
            if(!(filteredBuildings[11] == "Yost")){
                chartDatArray.push({type:"line",name:"Yost",showInLegend:true,dataPoints:yostLineCopy})
                chartAvgArray.push({ y: yostAvg, indexLabel: "Yost"})
                chartCurrentArray.push({ y: yostArray[lastIndex], indexLabel: "Yost"})
            }
            if(!(filteredBuildings[12] == "Olin (Sum)")){
                chartDatArray.push({type:"line",name:"Olin (Sum)",showInLegend:true,dataPoints:olinSumLineCopy})
                chartAvgArray.push({ y: olinSumAvg, indexLabel: "Olin (Sum)"})
                chartCurrentArray.push({ y: olinSumArray[lastIndex], indexLabel: "Olin (Sum)"})
            }
            if(!(filteredBuildings[13] == "Sears (Sum)")){
                chartDatArray.push({type:"line",name:"Sears (Sum)",showInLegend:true,dataPoints:searsSumLineCopy})
                chartAvgArray.push({ y: searsSumAvg, indexLabel: "Sears (Sum)"})
                chartCurrentArray.push({ y: searsSumArray[lastIndex], indexLabel: "Sears (Sum)"})
            }
            if(!(filteredBuildings[14] == "Wick (Sum)")){
                chartDatArray.push({type:"line",name:"Wick (Sum)",showInLegend:true,dataPoints:wickSumLineCopy})
                chartAvgArray.push({ y: wickSumAvg, indexLabel: "Wick (Sum)"})
                chartCurrentArray.push({ y: wickSumArray[lastIndex], indexLabel: "Wick (Sum)"})
            }
            
            glennanLineCopy2 = glennanLineCopy;
            nordLineCopy2 = nordLineCopy;
            olin480LineCopy2 = olin480LineCopy;
            olin208LineCopy2 = olin208LineCopy;
            rock480LineCopy2 = rock480LineCopy;
            sears480LineCopy2 = sears480LineCopy;
            sears208LineCopy2 = sears208LineCopy;
            tomlinsonLineCopy2 = tomlinsonLineCopy;
            whiteLineCopy2 = whiteLineCopy;
            wick208LineCopy2 = wick208LineCopy;
            wick480LineCopy2 = wick480LineCopy;
            yostLineCopy2 = yostLineCopy;
            olinSumLineCopy2 = olinSumLineCopy;
            searsSumLineCopy2 = searsSumLineCopy;
            wickSumLineCopy2 = wickSumLineCopy;
            
        }
        
        else {
            
            glennanLineCopy2 = [];
            nordLineCopy2 = [];
            olin480LineCopy2 = [];
            olin208LineCopy2 = [];
            rock480LineCopy2 = [];
            sears480LineCopy2 = [];
            sears208LineCopy2 = [];
            tomlinsonLineCopy2 = [];
            whiteLineCopy2 = [];
            wick208LineCopy2 = [];
            wick480LineCopy2 = [];
            yostLineCopy2 = [];
            olinSumLineCopy2 = [];
            searsSumLineCopy2 = [];
            wickSumLineCopy2 = [];
            
            //The following will first push each value into the new array, then shift so it won't be empty
            
            var minIndex = dateTimeArrayCopy.indexOf(from);
            
            
            if(average) {
                if(resDTArray.length == 1) {
                    glennanLineCopy2.push(glennanLine2[0]);
                    nordLineCopy2.push(nordLine2[0]);
                    olin480LineCopy2.push(olin480Line2[0]);
                    olin208LineCopy2.push(olin208Line2[0]);
                    rock480LineCopy2.push(rock480Line2[0]);
                    sears480LineCopy2.push(sears480Line2[0]);
                    sears208LineCopy2.push(sears208Line2[0]);
                    tomlinsonLineCopy2.push(tomlinsonLine2[0]);
                    whiteLineCopy2.push(whiteLine2[0]);
                    wick208LineCopy2.push(wick208Line2[0]);
                    wick480LineCopy2.push(wick480Line2[0]);
                    yostLineCopy2.push(yostLine2[0]);
                    olinSumLineCopy2.push(olinSumLine2[0]);
                    searsSumLineCopy2.push(searsSumLine2[0]);
                    wickSumLineCopy2.push(wickSumLine2[0]);
                    
                    //  dateTimeSetterArray.push(resDTArray[0]);
                    
                    minIndex = 0;
                    lastIndex = 0;
                    
                }
                
                else {
                    for(var i = minIndex; i <= dateTimeArrayCopy.lastIndexOf(to); i++) {
                        
                        glennanLineCopy2.push(glennanLine2Copy[i]);
                        nordLineCopy2.push(nordLine2Copy[i]);
                        olin480LineCopy2.push(olin480Line2Copy[i]);
                        olin208LineCopy2.push(olin208Line2Copy[i]);
                        rock480LineCopy2.push(rock480Line2Copy[i]);
                        sears480LineCopy2.push(sears480Line2Copy[i]);
                        sears208LineCopy2.push(sears208Line2Copy[i]);
                        tomlinsonLineCopy2.push(tomlinsonLine2Copy[i]);
                        whiteLineCopy2.push(whiteLine2Copy[i]);
                        wick208LineCopy2.push(wick208Line2Copy[i]);
                        wick480LineCopy2.push(wick480Line2Copy[i]);
                        yostLineCopy2.push(yostLine2Copy[i]);
                        olinSumLineCopy2.push(olinSumLine2Copy[i]);
                        searsSumLineCopy2.push(searsSumLine2Copy[i]);
                        wickSumLineCopy2.push(wickSumLine2Copy[i]);
                        
                    }
                    
                    lastIndex = dateTimeArrayCopy.lastIndexOf(to);
                    
                    //Go through each filter, and add the appropriate data to the arrays if the sensor is enabled.
                    if(!(filteredBuildings[0] == "Glennan")){
                        chartDatArray.push({type:"line",name:"Glennan",showInLegend:true,dataPoints:glennanLineCopy2})
                        chartAvgArray.push({ y: glennanAvg, indexLabel: "Glennan"})
                        chartCurrentArray.push({ y: glennanResTotalsList[lastIndex], indexLabel: "Glennan"})
                    }
                    if(!(filteredBuildings[1] == "Nord")){
                        chartDatArray.push({type:"line",name:"Nord",showInLegend:true,dataPoints:nordLineCopy2})
                        chartAvgArray.push({ y: nordAvg, indexLabel: "Nord"})
                        chartCurrentArray.push({ y: nordResTotalsList[lastIndex], indexLabel: "Nord"})
                    }
                    if(!(filteredBuildings[2] == "Olin 480")){
                        chartDatArray.push({type:"line",name:"Olin 480",showInLegend:true,dataPoints:olin480LineCopy2})
                        chartAvgArray.push({ y: olin480Avg, indexLabel: "Olin 480"})
                        chartCurrentArray.push({ y: olin480ResTotalsList[lastIndex], indexLabel: "Olin 480"})
                    }
                    if(!(filteredBuildings[3] == "Olin 208")){
                        chartDatArray.push({type:"line",name:"Olin 208",showInLegend:true,dataPoints:olin208LineCopy2})
                        chartAvgArray.push({ y: olin208Avg, indexLabel: "Olin 208"})
                        chartCurrentArray.push({ y: olin208ResTotalsList[lastIndex], indexLabel: "Olin 208"})
                    }
                    if(!(filteredBuildings[4] == "Rock 480")){
                        chartDatArray.push({type:"line",name:"Rock 480",showInLegend:true,dataPoints:rock480LineCopy2})
                        chartAvgArray.push({ y: rock480Avg, indexLabel: "Rock 480"})
                        chartCurrentArray.push({ y: rock480ResTotalsList[lastIndex], indexLabel: "Rock 480"})
                    }
                    if(!(filteredBuildings[5] == "Sears 480")){
                        chartDatArray.push({type:"line",name:"Sears 480",showInLegend:true,dataPoints:sears480LineCopy2})
                        chartAvgArray.push({ y: sears480Avg, indexLabel: "Sears 480"})
                        chartCurrentArray.push({ y: sears480ResTotalsList[lastIndex], indexLabel: "Sears 480"})
                    }
                    if(!(filteredBuildings[6] == "Sears 208")){
                        chartDatArray.push({type:"line",name:"Sears 208",showInLegend:true,dataPoints:sears208LineCopy2})
                        chartAvgArray.push({ y: sears208Avg, indexLabel: "Sears 208"})
                        chartCurrentArray.push({ y: sears208ResTotalsList[lastIndex], indexLabel: "Sears 208"})
                    }
                    if(!(filteredBuildings[7] == "Tomlinson")){
                        chartDatArray.push({type:"line",name:"Tomlinson",showInLegend:true,dataPoints:tomlinsonLineCopy2})
                        chartAvgArray.push({ y: tomlinsonAvg, indexLabel: "Tomlinson"})
                        chartCurrentArray.push({ y: tomlinsonResTotalsList[lastIndex], indexLabel: "Tomlinson"})
                    }
                    if(!(filteredBuildings[8] == "White")){
                        chartDatArray.push({type:"line",name:"White",showInLegend:true,dataPoints:whiteLineCopy2})
                        chartAvgArray.push({ y: whiteAvg, indexLabel: "White"})
                        chartCurrentArray.push({ y: whiteResTotalsList[lastIndex], indexLabel: "White"})
                    }
                    if(!(filteredBuildings[9] == "Wick 208")){
                        chartDatArray.push({type:"line",name:"Wick 208",showInLegend:true,dataPoints:wick208LineCopy2})
                        chartAvgArray.push({ y: wick208Avg, indexLabel: "Wick 208"})
                        chartCurrentArray.push({ y: wick208ResTotalsList[lastIndex], indexLabel: "Wick 208"})
                    }
                    if(!(filteredBuildings[10] == "Wick 480")){
                        chartDatArray.push({type:"line",name:"Wick 480",showInLegend:true,dataPoints:wick480LineCopy2})
                        chartAvgArray.push({ y: wick480Avg, indexLabel: "Wick 480"})
                        chartCurrentArray.push({ y: wick480ResTotalsList[lastIndex], indexLabel: "Wick 480"})
                    }
                    if(!(filteredBuildings[11] == "Yost")){
                        chartDatArray.push({type:"line",name:"Yost",showInLegend:true,dataPoints:yostLineCopy2})
                        chartAvgArray.push({ y: yostAvg, indexLabel: "Yost"})
                        chartCurrentArray.push({ y: yostResTotalsList[lastIndex], indexLabel: "Yost"})
                    }
                    if(!(filteredBuildings[12] == "Olin (Sum)")){
                        chartDatArray.push({type:"line",name:"Olin (Sum)",showInLegend:true,dataPoints:olinSumLineCopy2})
                        chartAvgArray.push({ y: olinSumAvg, indexLabel: "Olin (Sum)"})
                        chartCurrentArray.push({ y: olinSumResTotalsList[lastIndex], indexLabel: "Olin (Sum)"})
                    }
                    if(!(filteredBuildings[13] == "Sears (Sum)")){
                        chartDatArray.push({type:"line",name:"Sears (Sum)",showInLegend:true,dataPoints:searsSumLineCopy2})
                        chartAvgArray.push({ y: searsSumAvg, indexLabel: "Sears (Sum)"})
                        chartCurrentArray.push({ y: searsSumResTotalsList[lastIndex], indexLabel: "Sears (Sum)"})
                    }
                    if(!(filteredBuildings[14] == "Wick (Sum)")){
                        chartDatArray.push({type:"line",name:"Wick (Sum)",showInLegend:true,dataPoints:wickSumLineCopy2})
                        chartAvgArray.push({ y: wickSumAvg, indexLabel: "Wick (Sum)"})
                        chartCurrentArray.push({ y: wickSumResTotalsList[lastIndex], indexLabel: "Wick (Sum)"})
                    }
                    
                }

            }
            
            else {
                if(resDTArray.length == 1) {
                    glennanLineCopy2.push(glennanLine2[0]);
                    nordLineCopy2.push(nordLine2[0]);
                    olin480LineCopy2.push(olin480Line2[0]);
                    olin208LineCopy2.push(olin208Line2[0]);
                    rock480LineCopy2.push(rock480Line2[0]);
                    sears480LineCopy2.push(sears480Line2[0]);
                    sears208LineCopy2.push(sears208Line2[0]);
                    tomlinsonLineCopy2.push(tomlinsonLine2[0]);
                    whiteLineCopy2.push(whiteLine2[0]);
                    wick208LineCopy2.push(wick208Line2[0]);
                    wick480LineCopy2.push(wick480Line2[0]);
                    yostLineCopy2.push(yostLine2[0]);
                    olinSumLineCopy2.push(olinSumLine2[0]);
                    searsSumLineCopy2.push(searsSumLine2[0]);
                    wickSumLineCopy2.push(wickSumLine2[0]);
                    
                    minIndex = 0;
                    lastIndex = 0;
                }
                
                else {
                    for(var i = minIndex; i <= dateTimeArrayCopy.lastIndexOf(to); i++) {
                        
                        glennanLineCopy2.push(glennanLine2Copy[i]);
                        nordLineCopy2.push(nordLine2Copy[i]);
                        olin480LineCopy2.push(olin480Line2Copy[i]);
                        olin208LineCopy2.push(olin208Line2Copy[i]);
                        rock480LineCopy2.push(rock480Line2Copy[i]);
                        sears480LineCopy2.push(sears480Line2Copy[i]);
                        sears208LineCopy2.push(sears208Line2Copy[i]);
                        tomlinsonLineCopy2.push(tomlinsonLine2Copy[i]);
                        whiteLineCopy2.push(whiteLine2Copy[i]);
                        wick208LineCopy2.push(wick208Line2Copy[i]);
                        wick480LineCopy2.push(wick480Line2Copy[i]);
                        yostLineCopy2.push(yostLine2Copy[i]);
                        olinSumLineCopy2.push(olinSumLine2Copy[i]);
                        searsSumLineCopy2.push(searsSumLine2Copy[i]);
                        wickSumLineCopy2.push(wickSumLine2Copy[i]);
                        
                    }
                    
                    lastIndex = dateTimeArrayCopy.lastIndexOf(to);
                    
                    if(total) {
                        //Go through each filter, and add the appropriate data to the arrays if the sensor is enabled.
                        if(!(filteredBuildings[0] == "Glennan")){
                            chartDatArray.push({type:"line",name:"Glennan",showInLegend:true,dataPoints:glennanLineCopy2})
                            chartCurrentArray.push({ y: glennanSumTotalsList[lastIndex], indexLabel: "Glennan"})
                        }
                        if(!(filteredBuildings[1] == "Nord")){
                            chartDatArray.push({type:"line",name:"Nord",showInLegend:true,dataPoints:nordLineCopy2})
                            chartCurrentArray.push({ y: nordSumTotalsList[lastIndex], indexLabel: "Nord"})
                        }
                        if(!(filteredBuildings[2] == "Olin 480")){
                            chartDatArray.push({type:"line",name:"Olin 480",showInLegend:true,dataPoints:olin480LineCopy2})
                            chartCurrentArray.push({ y: olin480SumTotalsList[lastIndex], indexLabel: "Olin 480"})
                        }
                        if(!(filteredBuildings[3] == "Olin 208")){
                            chartDatArray.push({type:"line",name:"Olin 208",showInLegend:true,dataPoints:olin208LineCopy2})
                            chartCurrentArray.push({ y: olin208SumTotalsList[lastIndex], indexLabel: "Olin 208"})
                        }
                        if(!(filteredBuildings[4] == "Rock 480")){
                            chartDatArray.push({type:"line",name:"Rock 480",showInLegend:true,dataPoints:rock480LineCopy2})
                            chartCurrentArray.push({ y: rock480SumTotalsList[lastIndex], indexLabel: "Rock 480"})
                        }
                        if(!(filteredBuildings[5] == "Sears 480")){
                            chartDatArray.push({type:"line",name:"Sears 480",showInLegend:true,dataPoints:sears480LineCopy2})
                            chartCurrentArray.push({ y: sears480SumTotalsList[lastIndex], indexLabel: "Sears 480"})
                        }
                        if(!(filteredBuildings[6] == "Sears 208")){
                            chartDatArray.push({type:"line",name:"Sears 208",showInLegend:true,dataPoints:sears208LineCopy2})
                            chartCurrentArray.push({ y: sears208SumTotalsList[lastIndex], indexLabel: "Sears 208"})
                        }
                        if(!(filteredBuildings[7] == "Tomlinson")){
                            chartDatArray.push({type:"line",name:"Tomlinson",showInLegend:true,dataPoints:tomlinsonLineCopy2})
                            chartCurrentArray.push({ y: tomlinsonSumTotalsList[lastIndex], indexLabel: "Tomlinson"})
                        }
                        if(!(filteredBuildings[8] == "White")){
                            chartDatArray.push({type:"line",name:"White",showInLegend:true,dataPoints:whiteLineCopy2})
                            chartCurrentArray.push({ y: whiteSumTotalsList[lastIndex], indexLabel: "White"})
                        }
                        if(!(filteredBuildings[9] == "Wick 208")){
                            chartDatArray.push({type:"line",name:"Wick 208",showInLegend:true,dataPoints:wick208LineCopy2})
                            chartCurrentArray.push({ y: wick208SumTotalsList[lastIndex], indexLabel: "Wick 208"})
                        }
                        if(!(filteredBuildings[10] == "Wick 480")){
                            chartDatArray.push({type:"line",name:"Wick 480",showInLegend:true,dataPoints:wick480LineCopy2})
                            chartCurrentArray.push({ y: wick480SumTotalsList[lastIndex], indexLabel: "Wick 480"})
                        }
                        if(!(filteredBuildings[11] == "Yost")){
                            chartDatArray.push({type:"line",name:"Yost",showInLegend:true,dataPoints:yostLineCopy2})
                            chartCurrentArray.push({ y: yostSumTotalsList[lastIndex], indexLabel: "Yost"})
                        }
                        if(!(filteredBuildings[12] == "Olin (Sum)")){
                            chartDatArray.push({type:"line",name:"Olin (Sum)",showInLegend:true,dataPoints:olinSumLineCopy2})
                            chartCurrentArray.push({ y: olinSumSumTotalsList[lastIndex], indexLabel: "Olin (Sum)"})
                        }
                        if(!(filteredBuildings[13] == "Sears (Sum)")){
                            chartDatArray.push({type:"line",name:"Sears (Sum)",showInLegend:true,dataPoints:searsSumLineCopy2})
                            chartCurrentArray.push({ y: searsSumSumTotalsList[lastIndex], indexLabel: "Sears (Sum)"})
                        }
                        if(!(filteredBuildings[14] == "Wick (Sum)")){
                            chartDatArray.push({type:"line",name:"Wick (Sum)",showInLegend:true,dataPoints:wickSumLineCopy2})
                            chartCurrentArray.push({ y: wickSumSumTotalsList[lastIndex], indexLabel: "Wick (Sum)"})
                        }

                    }
                    
                    else if(max) {
                        //Go through each filter, and add the appropriate data to the arrays if the sensor is enabled.
                        if(!(filteredBuildings[0] == "Glennan")){
                            chartDatArray.push({type:"line",name:"Glennan",showInLegend:true,dataPoints:glennanLineCopy2})
                            chartCurrentArray.push({ y: glennanMaxTotalsList[lastIndex], indexLabel: "Glennan"})
                        }
                        if(!(filteredBuildings[1] == "Nord")){
                            chartDatArray.push({type:"line",name:"Nord",showInLegend:true,dataPoints:nordLineCopy2})
                            chartCurrentArray.push({ y: nordMaxTotalsList[lastIndex], indexLabel: "Nord"})
                        }
                        if(!(filteredBuildings[2] == "Olin 480")){
                            chartDatArray.push({type:"line",name:"Olin 480",showInLegend:true,dataPoints:olin480LineCopy2})
                            chartCurrentArray.push({ y: olin480MaxTotalsList[lastIndex], indexLabel: "Olin 480"})
                        }
                        if(!(filteredBuildings[3] == "Olin 208")){
                            chartDatArray.push({type:"line",name:"Olin 208",showInLegend:true,dataPoints:olin208LineCopy2})
                            chartCurrentArray.push({ y: olin208MaxTotalsList[lastIndex], indexLabel: "Olin 208"})
                        }
                        if(!(filteredBuildings[4] == "Rock 480")){
                            chartDatArray.push({type:"line",name:"Rock 480",showInLegend:true,dataPoints:rock480LineCopy2})
                            chartAvgArray.push({ y: rock480Avg, indexLabel: "Rock 480"})
                            chartCurrentArray.push({ y: rock480MaxTotalsList[lastIndex], indexLabel: "Rock 480"})
                        }
                        if(!(filteredBuildings[5] == "Sears 480")){
                            chartDatArray.push({type:"line",name:"Sears 480",showInLegend:true,dataPoints:sears480LineCopy2})
                            chartCurrentArray.push({ y: sears480MaxTotalsList[lastIndex], indexLabel: "Sears 480"})
                        }
                        if(!(filteredBuildings[6] == "Sears 208")){
                            chartDatArray.push({type:"line",name:"Sears 208",showInLegend:true,dataPoints:sears208LineCopy2})
                            chartCurrentArray.push({ y: sears208MaxTotalsList[lastIndex], indexLabel: "Sears 208"})
                        }
                        if(!(filteredBuildings[7] == "Tomlinson")){
                            chartDatArray.push({type:"line",name:"Tomlinson",showInLegend:true,dataPoints:tomlinsonLineCopy2})
                            chartCurrentArray.push({ y: tomlinsonMaxTotalsList[lastIndex], indexLabel: "Tomlinson"})
                        }
                        if(!(filteredBuildings[8] == "White")){
                            chartDatArray.push({type:"line",name:"White",showInLegend:true,dataPoints:whiteLineCopy2})
                            chartCurrentArray.push({ y: whiteMaxTotalsList[lastIndex], indexLabel: "White"})
                        }
                        if(!(filteredBuildings[9] == "Wick 208")){
                            chartDatArray.push({type:"line",name:"Wick 208",showInLegend:true,dataPoints:wick208LineCopy2})
                            chartCurrentArray.push({ y: wick208MaxTotalsList[lastIndex], indexLabel: "Wick 208"})
                        }
                        if(!(filteredBuildings[10] == "Wick 480")){
                            chartDatArray.push({type:"line",name:"Wick 480",showInLegend:true,dataPoints:wick480LineCopy2})
                            chartCurrentArray.push({ y: wick480MaxTotalsList[lastIndex], indexLabel: "Wick 480"})
                        }
                        if(!(filteredBuildings[11] == "Yost")){
                            chartDatArray.push({type:"line",name:"Yost",showInLegend:true,dataPoints:yostLineCopy2})
                            chartAvgArray.push({ y: yostAvg, indexLabel: "Yost"})
                            chartCurrentArray.push({ y: yostMaxTotalsList[lastIndex], indexLabel: "Yost"})
                        }
                        if(!(filteredBuildings[12] == "Olin (Sum)")){
                            chartDatArray.push({type:"line",name:"Olin (Sum)",showInLegend:true,dataPoints:olinSumLineCopy2})
                            chartCurrentArray.push({ y: olinSumMaxTotalsList[lastIndex], indexLabel: "Olin (Sum)"})
                        }
                        if(!(filteredBuildings[13] == "Sears (Sum)")){
                            chartDatArray.push({type:"line",name:"Sears (Sum)",showInLegend:true,dataPoints:searsSumLineCopy2})
                            chartCurrentArray.push({ y: searsSumMaxTotalsList[lastIndex], indexLabel: "Sears (Sum)"})
                        }
                        if(!(filteredBuildings[14] == "Wick (Sum)")){
                            chartDatArray.push({type:"line",name:"Wick (Sum)",showInLegend:true,dataPoints:wickSumLineCopy2})
                            chartCurrentArray.push({ y: wickSumMaxTotalsList[lastIndex], indexLabel: "Wick (Sum)"})
                        }

                    }
                    
                    
                }
            }
            
            
        }
        
        
        
		//Redraw our charts so they display the proper, newly-filtered, data.
    	renderAllCharts();
        
        
    }
    
    //Controls the function of resolution for the graph.
    function resolution() {
        
        var minD = new Date(minDateCopy);
        var maxD = new Date(maxDateCopy);
        
        var minMonth = minD.getMonth()+1;
        var minDay = minD.getDate();
        var minYear = minD.getFullYear();
        var minHrs = minD.getHours();
        var minMins;
        //Makes sure that there are two digits
        if(minD.getMinutes() < 10) {
            minMins = "0" + minD.getMinutes();
        }
        else {
            minMins = minD.getMinutes();
        }
        
        var maxMonth = maxD.getMonth()+1;
        var maxDay = maxD.getDate();
        var maxYear = maxD.getFullYear();
        var maxHrs = maxD.getHours();
        var maxMins;
        if(maxD.getMinutes() < 10) {
            maxMins = "0" + maxD.getMinutes();
        }
        else {
            maxMins = maxD.getMinutes();
        }
        
        
        //Converts the input so it matches the data being examined
        from2 = minMonth + "/" + minDay + "/" + minYear + " " + minHrs + ":" + minMins;
        to2 = maxMonth + "/" + maxDay + "/" + maxYear + " " + maxHrs + ":" + maxMins;
        
        
        //var x = document.getElementById("mySelect").selectedIndex;
        
        //stores value of resolution
        //var res = document.getElementsByTagName("option")[x].value;
        var res = document.getElementById("mySelect").value;
        
        
        if(res == "seconds" && seconds == false) {
            resDTArray = [];
            
            seconds = true;
            minutes = false;
            hours = false;
            days = false;
            weeks = false;
            months = false;
            
            //Stores all the variables within the limits of the date and time array.
            glennanLine2 = [];
            nordLine2 = [];
            olin480Line2 = [];
            olin208Line2 = [];
            rock480Line2 = [];
            sears480Line2 = [];
            sears208Line2 = [];
            tomlinsonLine2 = [];
            whiteLine2 = [];
            wick208Line2 = [];
            wick480Line2 = [];
            yostLine2 = [];
            olinSumLine2 = [];
            searsSumLine2 = [];
            wickSumLine2 = [];
            
            //All the array variables within the date and time array.
            glennanResList = [];
            nordResList = [];
            olin480ResList = [];
            olin208ResList = [];
            rock480ResList = [];
            sears480ResList = [];
            sears208ResList = [];
            tomlinsonResList = [];
            whiteResList = [];
            wick208ResList = [];
            wick480ResList = [];
            yostResList = [];
            olinSumResList = [];
            searsSumResList = [];
            wickSumResList = [];
            
            //All the values from the line copies are within the date and time range.
            glennanLineCopy2 = [];
            nordLineCopy2 = [];
            olin480LineCopy2 = [];
            olin208LineCopy2 = [];
            rock480LineCopy2 = [];
            sears480LineCopy2 = [];
            sears208LineCopy2 = [];
            tomlinsonLineCopy2 = [];
            whiteLineCopy2 = [];
            wick208LineCopy2 = [];
            wick480LineCopy2 = [];
            yostLineCopy2 = [];
            olinSumLineCopy2 = [];
            searsSumLineCopy2 = [];
            wickSumLineCopy2 = [];
            
            //The dates within the datetime range
            dateTimeArrayCopy = [];
            
                
            for(var r = dateTimeArray.indexOf(from2); r <= dateTimeArray.lastIndexOf(to2); r++){
                    
                    glennanLine2.push(glennanLine[r]);
                    nordLine2.push(nordLine[r]);
                    olin480Line2.push(olin480Line[r]);
                    olin208Line2.push(olin208Line[r]);
                    rock480Line2.push(rock480Line[r]);
                    sears480Line2.push(sears480Line[r]);
                    sears208Line2.push(sears208Line[r]);
                    tomlinsonLine2.push(tomlinsonLine[r]);
                    whiteLine2.push(whiteLine[r]);
                    wick208Line2.push(wick208Line[r]);
                    wick480Line2.push(wick480Line[r]);
                    yostLine2.push(yostLine[r]);
                    olinSumLine2.push(olinSumLine[r]);
                    searsSumLine2.push(searsSumLine[r]);
                    wickSumLine2.push(wickSumLine[r]);
                    
                    glennanLineCopy2.push(glennanLineCopy[r]);
                    nordLineCopy2.push(nordLineCopy[r]);
                    olin480LineCopy2.push(olin480LineCopy[r]);
                    olin208LineCopy2.push(olin208LineCopy[r]);
                    rock480LineCopy2.push(rock480LineCopy[r]);
                    sears480LineCopy2.push(sears480LineCopy[r]);
                    sears208LineCopy2.push(sears208LineCopy[r]);
                    tomlinsonLineCopy2.push(tomlinsonLineCopy[r]);
                    whiteLineCopy2.push(whiteLineCopy[r]);
                    wick208LineCopy2.push(wick208LineCopy[r]);
                    wick480LineCopy2.push(wick480LineCopy[r]);
                    yostLineCopy2.push(yostLineCopy[r]);
                    olinSumLineCopy2.push(olinSumLineCopy[r]);
                    searsSumLineCopy2.push(searsSumLineCopy[r]);
                    wickSumLineCopy2.push(wickSumLineCopy[r]);
                    
                    resDTArray.push(dateTimeArray[r]);
                    
                    dateTimeArrayCopy.push(dateTimeArray[r]);
                    
                    glennanResList.push(glennanArray[r]);
                    nordResList.push(nordArray[r]);
                    olin480ResList.push(olin480Array[r]);
                    olin208ResList.push(olin208Array[r]);
                    rock480ResList.push(rock480Array[r]);
                    sears480ResList.push(sears480Array[r]);
                    sears208ResList.push(sears208Array[r]);
                    tomlinsonResList.push(tomlinsonArray[r]);
                    whiteResList.push(whiteArray[r]);
                    wick208ResList.push(wick208Array[r]);
                    wick480ResList.push(wick480Array[r]);
                    yostResList.push(yostArray[r]);
                    olinSumResList.push(olinSumArray[r]);
                    searsSumResList.push(searsSumArray[r]);
                    wickSumResList.push(wickSumArray[r]);
            }
            
            glennanAvg = getAverage(glennanArray)
            nordAvg = getAverage(nordArray)
            olin480Avg = getAverage(olin480Array)
            olin208Avg = getAverage(olin208Array)
            rock480Avg = getAverage(rock480Array)
            sears480Avg = getAverage(sears480Array)
            sears208Avg = getAverage(sears208Array)
            tomlinsonAvg = getAverage(tomlinsonArray)
            whiteAvg = getAverage(whiteArray)
            wick208Avg = getAverage(wick208Array)
            wick480Avg = getAverage(wick480Array)
            yostAvg = getAverage(yostArray)
            olinSumAvg = getAverage(olinSumArray)
            searsSumAvg = getAverage(searsSumArray)
            wickSumAvg = getAverage(wickSumArray)
            
         
        }
        
        else if(res == "minutes" && minutes==false) {
            //Minutes
            resDTArray = [];
            
            seconds = false;
            minutes = true;
            hours = false;
            
            glennanLine2 = [];
            nordLine2 = [];
            olin480Line2 = [];
            olin208Line2 = [];
            rock480Line2 = [];
            sears480Line2 = [];
            sears208Line2 = [];
            tomlinsonLine2 = [];
            whiteLine2 = [];
            wick208Line2 = [];
            wick480Line2 = [];
            yostLine2 = [];
            olinSumLine2 = [];
            searsSumLine2 = [];
            wickSumLine2 = [];
            
            glennanLineCopy2 = [];
            nordLineCopy2 = [];
            olin480LineCopy2 = [];
            olin208LineCopy2 = [];
            rock480LineCopy2 = [];
            sears480LineCopy2 = [];
            sears208LineCopy2 = [];
            tomlinsonLineCopy2 = [];
            whiteLineCopy2 = [];
            wick208LineCopy2 = [];
            wick480LineCopy2 = [];
            yostLineCopy2 = [];
            olinSumLineCopy2 = [];
            searsSumLineCopy2 = [];
            wickSumLineCopy2 = [];
            
            glennanResList = [];
            nordResList = [];
            olin480ResList = [];
            olin208ResList = [];
            rock480ResList = [];
            sears480ResList = [];
            sears208ResList = [];
            tomlinsonResList = [];
            whiteResList = [];
            wick208ResList = [];
            wick480ResList = [];
            yostResList = [];
            olinSumResList = [];
            searsSumResList = [];
            wickSumResList = [];
            
            if(dateTimeArray.length == 1) {
                glennanResList.push(glennanArray[0]);
                nordResList.push(nordArray[0]);
                olin480ResList.push(olin480Array[0]);
                olin208ResList.push(olin208Array[0]);
                rock480ResList.push(rock480Array[0]);
                sears480ResList.push(sears480Array[0]);
                sears208ResList.push(sears208Array[0]);
                tomlinsonResList.push(tomlinsonArray[0]);
                whiteResList.push(whiteArray[0]);
                wick208ResList.push(wick208Array[0]);
                wick480ResList.push(wick480Array[0]);
                yostResList.push(yostArray[0]);
                olinSumResList.push(olinSumArray[0]);
                searsSumResList.push(searsSumArray[0]);
                wickSumResList.push(wickSumArray[0]);
                resDTArray.push(dateTimeArray[0]);
            }
            
            else {
                
                for(var r = dateTimeArray.indexOf(from2); r <= dateTimeArray.lastIndexOf(to2); r++){
                    
                    //Do this if it is the first in the array
                    if(r == dateTimeArray.indexOf(from2)) {
                        
                        //Placeholders
                        tempGlennanResList = [];
                        tempNordResList = [];
                        tempOlin208ResList = [];
                        tempOlin480ResList = [];
                        tempRock480ResList = [];
                        tempSears208ResList = [];
                        tempSears480ResList = [];
                        tempTomlinsonResList = [];
                        tempWhiteResList = [];
                        tempWick208ResList = [];
                        tempWick480ResList = [];
                        tempYostResList = [];
                        tempOlinSumResList = [];
                        tempSearsSumResList = [];
                        tempWickSumResList = [];
                        
                        //Pushes the current value in the array
                        tempGlennanResList.push(glennanArray[r]);
                        tempNordResList.push(nordArray[r]);
                        tempOlin480ResList.push(olin480Array[r]);
                        tempOlin208ResList.push(olin208Array[r]);
                        tempRock480ResList.push(rock480Array[r]);
                        tempSears480ResList.push(sears480Array[r]);
                        tempSears208ResList.push(sears208Array[r]);
                        tempTomlinsonResList.push(tomlinsonArray[r]);
                        tempWhiteResList.push(whiteArray[r]);
                        tempWick208ResList.push(wick208Array[r]);
                        tempWick480ResList.push(wick480Array[r]);
                        tempYostResList.push(yostArray[r]);
                        tempOlinSumResList.push(olinSumArray[r]);
                        tempSearsSumResList.push(searsSumArray[r]);
                        tempWickSumResList.push(wickSumArray[r]);
                    }
                    
                    else {
                        
                        var d2 = new Date(dateTimeArray[r]);
                        var d1 = new Date(dateTimeArray[r-1]);
                        
                        //Pushes current value of the arrays into the temp lists if its the same minute as before
                        if(d2.getMinutes() == d1.getMinutes()) {
                            tempGlennanResList.push(glennanArray[r]);
                            tempNordResList.push(nordArray[r]);
                            tempOlin480ResList.push(olin480Array[r]);
                            tempOlin208ResList.push(olin208Array[r]);
                            tempRock480ResList.push(rock480Array[r]);
                            tempSears480ResList.push(sears480Array[r]);
                            tempSears208ResList.push(sears208Array[r]);
                            tempTomlinsonResList.push(tomlinsonArray[r]);
                            tempWhiteResList.push(whiteArray[r]);
                            tempWick208ResList.push(wick208Array[r]);
                            tempWick480ResList.push(wick480Array[r]);
                            tempYostResList.push(yostArray[r]);
                            tempOlinSumResList.push(olinSumArray[r]);
                            tempSearsSumResList.push(searsSumArray[r]);
                            tempWickSumResList.push(wickSumArray[r]);
                        }
                        else {
                        
                            if(average) {
                                glennanResList.push(getAverage(tempGlennanResList));
                                nordResList.push(getAverage(tempNordResList));
                                olin480ResList.push(getAverage(tempOlin480ResList));
                                olin208ResList.push(getAverage(tempOlin208ResList));
                                rock480ResList.push(getAverage(tempRock480ResList));
                                sears480ResList.push(getAverage(tempSears480ResList));
                                sears208ResList.push(getAverage(tempSears208ResList));
                                tomlinsonResList.push(getAverage(tempTomlinsonResList));
                                whiteResList.push(getAverage(tempWhiteResList));
                                wick208ResList.push(getAverage(tempWick208ResList));
                                wick480ResList.push(getAverage(tempWick480ResList));
                                yostResList.push(getAverage(tempYostResList));
                                olinSumResList.push(getAverage(tempOlinSumResList));
                                searsSumResList.push(getAverage(tempSearsSumResList));
                                wickSumResList.push(getAverage(tempWickSumResList));
                            }
                            
                            else if(total) {
                                glennanResList.push(getTotal(tempGlennanResList));
                                nordResList.push(getTotal(tempNordResList));
                                olin480ResList.push(getTotal(tempOlin480ResList));
                                olin208ResList.push(getTotal(tempOlin208ResList));
                                rock480ResList.push(getTotal(tempRock480ResList));
                                sears480ResList.push(getTotal(tempSears480ResList));
                                sears208ResList.push(getTotal(tempSears208ResList));
                                tomlinsonResList.push(getTotal(tempTomlinsonResList));
                                whiteResList.push(getTotal(tempWhiteResList));
                                wick208ResList.push(getTotal(tempWick208ResList));
                                wick480ResList.push(getTotal(tempWick480ResList));
                                yostResList.push(getTotal(tempYostResList));
                                olinSumResList.push(getTotal(tempOlinSumResList));
                                searsSumResList.push(getTotal(tempSearsSumResList));
                                wickSumResList.push(getTotal(tempWickSumResList));
                            }
                            
                            else if(max) {
                                glennanResList.push(getPeak(tempGlennanResList));
                                nordResList.push(getPeak(tempNordResList));
                                olin480ResList.push(getPeak(tempOlin480ResList));
                                olin208ResList.push(getPeak(tempOlin208ResList));
                                rock480ResList.push(getPeak(tempRock480ResList));
                                sears480ResList.push(getPeak(tempSears480ResList));
                                sears208ResList.push(getPeak(tempSears208ResList));
                                tomlinsonResList.push(getPeak(tempTomlinsonResList));
                                whiteResList.push(getPeak(tempWhiteResList));
                                wick208ResList.push(getPeak(tempWick208ResList));
                                wick480ResList.push(getPeak(tempWick480ResList));
                                yostResList.push(getPeak(tempYostResList));
                                olinSumResList.push(getPeak(tempOlinSumResList));
                                searsSumResList.push(getPeak(tempSearsSumResList));
                                wickSumResList.push(getPeak(tempWickSumResList));
                            }

                            resDTArray.push(dateTimeArray[r-1]);
                            
                            tempGlennanResList = [];
                            tempNordResList = [];
                            tempOlin208ResList = [];
                            tempOlin480ResList = [];
                            tempRock480ResList = [];
                            tempSears208ResList = [];
                            tempSears480ResList = [];
                            tempTomlinsonResList = [];
                            tempWhiteResList = [];
                            tempWick208ResList = [];
                            tempWick480ResList = [];
                            tempYostResList = [];
                            tempOlinSumResList = [];
                            tempSearsSumResList = [];
                            tempWickSumResList = [];
                            
                            tempGlennanResList.push(glennanArray[r]);
                            tempNordResList.push(nordArray[r]);
                            tempOlin480ResList.push(olin480Array[r]);
                            tempOlin208ResList.push(olin208Array[r]);
                            tempRock480ResList.push(rock480Array[r]);
                            tempSears480ResList.push(sears480Array[r]);
                            tempSears208ResList.push(sears208Array[r]);
                            tempTomlinsonResList.push(tomlinsonArray[r]);
                            tempWhiteResList.push(whiteArray[r]);
                            tempWick208ResList.push(wick208Array[r]);
                            tempWick480ResList.push(wick480Array[r]);
                            tempYostResList.push(yostArray[r]);
                            tempOlinSumResList.push(olinSumArray[r]);
                            tempSearsSumResList.push(searsSumArray[r]);
                            tempWickSumResList.push(wickSumArray[r]);
                            
                        }
                        
                        if(r == dateTimeArray.lastIndexOf(to2)) {
                            if(average) {
                                glennanResList.push(getAverage(tempGlennanResList));
                                nordResList.push(getAverage(tempNordResList));
                                olin480ResList.push(getAverage(tempOlin480ResList));
                                olin208ResList.push(getAverage(tempOlin208ResList));
                                rock480ResList.push(getAverage(tempRock480ResList));
                                sears480ResList.push(getAverage(tempSears480ResList));
                                sears208ResList.push(getAverage(tempSears208ResList));
                                tomlinsonResList.push(getAverage(tempTomlinsonResList));
                                whiteResList.push(getAverage(tempWhiteResList));
                                wick208ResList.push(getAverage(tempWick208ResList));
                                wick480ResList.push(getAverage(tempWick480ResList));
                                yostResList.push(getAverage(tempYostResList));
                                olinSumResList.push(getAverage(tempOlinSumResList));
                                searsSumResList.push(getAverage(tempSearsSumResList));
                                wickSumResList.push(getAverage(tempWickSumResList));
                            }
                            
                            else if(total) {
                                glennanResList.push(getTotal(tempGlennanResList));
                                nordResList.push(getTotal(tempNordResList));
                                olin480ResList.push(getTotal(tempOlin480ResList));
                                olin208ResList.push(getTotal(tempOlin208ResList));
                                rock480ResList.push(getTotal(tempRock480ResList));
                                sears480ResList.push(getTotal(tempSears480ResList));
                                sears208ResList.push(getTotal(tempSears208ResList));
                                tomlinsonResList.push(getTotal(tempTomlinsonResList));
                                whiteResList.push(getTotal(tempWhiteResList));
                                wick208ResList.push(getTotal(tempWick208ResList));
                                wick480ResList.push(getTotal(tempWick480ResList));
                                yostResList.push(getTotal(tempYostResList));
                                olinSumResList.push(getTotal(tempOlinSumResList));
                                searsSumResList.push(getTotal(tempSearsSumResList));
                                wickSumResList.push(getTotal(tempWickSumResList));
                            }
                            
                            else if(max) {
                                glennanResList.push(getPeak(tempGlennanResList));
                                nordResList.push(getPeak(tempNordResList));
                                olin480ResList.push(getPeak(tempOlin480ResList));
                                olin208ResList.push(getPeak(tempOlin208ResList));
                                rock480ResList.push(getPeak(tempRock480ResList));
                                sears480ResList.push(getPeak(tempSears480ResList));
                                sears208ResList.push(getPeak(tempSears208ResList));
                                tomlinsonResList.push(getPeak(tempTomlinsonResList));
                                whiteResList.push(getPeak(tempWhiteResList));
                                wick208ResList.push(getPeak(tempWick208ResList));
                                wick480ResList.push(getPeak(tempWick480ResList));
                                yostResList.push(getPeak(tempYostResList));
                                olinSumResList.push(getPeak(tempOlinSumResList));
                                searsSumResList.push(getPeak(tempSearsSumResList));
                                wickSumResList.push(getPeak(tempWickSumResList));
                            }
                            
                            resDTArray.push(dateTimeArray[r]);
                            
                            tempGlennanResList = [];
                            tempNordResList = [];
                            tempOlin208ResList = [];
                            tempOlin480ResList = [];
                            tempRock480ResList = [];
                            tempSears208ResList = [];
                            tempSears480ResList = [];
                            tempTomlinsonResList = [];
                            tempWhiteResList = [];
                            tempWick208ResList = [];
                            tempWick480ResList = [];
                            tempYostResList = [];
                            tempOlinSumResList = [];
                            tempSearsSumResList = [];
                            tempWickSumResList = [];
                        }

                    }
                
                
                }
                
            }
            
            
            
            //Afterwards, put the new info in the copy2 array.
            for(var z = 0; z < resDTArray.length; z++) {
                glennanLine2.push({x: z, y: glennanResList[z], label: resDTArray[z]})
                nordLine2.push({x: z, y: nordResList[z], label: resDTArray[z]})
                olin480Line2.push({x: z, y: olin480ResList[z], label: resDTArray[z]})
                olin208Line2.push({x: z, y: olin208ResList[z], label: resDTArray[z]})
                rock480Line2.push({x: z, y: rock480ResList[z], label: resDTArray[z]})
                sears480Line2.push({x: z, y: sears480ResList[z], label: resDTArray[z]})
                sears208Line2.push({x: z, y: sears208ResList[z], label: resDTArray[z]})
                tomlinsonLine2.push({x: z, y: tomlinsonResList[z], label: resDTArray[z]})
                whiteLine2.push({x: z, y: whiteResList[z], label: resDTArray[z]})
                wick208Line2.push({x: z, y: wick208ResList[z], label: resDTArray[z]})
                wick480Line2.push({x: z, y: wick480ResList[z], label: resDTArray[z]})
                yostLine2.push({x: z, y: yostResList[z], label: resDTArray[z]})
                olinSumLine2.push({x: z, y: olinSumResList[z], label: resDTArray[z]})
                searsSumLine2.push({x: z, y: searsSumResList[z], label: resDTArray[z]})
                wickSumLine2.push({x: z, y: wickSumResList[z], label: resDTArray[z]})
                
                glennanLineCopy2 = glennanLine2;
                nordLineCopy2 = nordLine2;
                olin480LineCopy2 = olin480Line2;
                olin208LineCopy2 = olin208Line2;
                rock480LineCopy2 = rock480Line2;
                sears480LineCopy2 = sears480Line2;
                sears208LineCopy2 = sears208Line2;
                tomlinsonLineCopy2 = tomlinsonLine2;
                whiteLineCopy2 = whiteLine2;
                wick208LineCopy2 = wick208Line2;
                wick480LineCopy2 = wick480Line2;
                yostLineCopy2 = yostLine2;
                olinSumLineCopy2 = olinSumLine2;
                searsSumLineCopy2 = searsSumLine2;
                wickSumLineCopy2 = wickSumLine2;
            }
            
            dateTimeArrayCopy = [];
            
            glennanResTotalsList = [];
            nordResTotalsList = [];
            olin480ResTotalsList = [];
            olin208ResTotalsList = [];
            rock480ResTotalsList = [];
            sears480ResTotalsList = [];
            sears208ResTotalsList = [];
            tomlinsonResTotalsList = [];
            whiteResTotalsList = [];
            wick208ResTotalsList = [];
            wick480ResTotalsList = [];
            yostResTotalsList = [];
            olinSumResTotalsList = [];
            searsSumResTotalsList = [];
            wickSumResTotalsList = [];
            
                glennanSumTotalsList = [];
                nordSumTotalsList = [];
                olin480SumTotalsList = [];
                olin208SumTotalsList = [];
                rock480SumTotalsList = [];
                sears480SumTotalsList = [];
                sears208SumTotalsList = [];
                tomlinsonSumTotalsList = [];
                whiteSumTotalsList = [];
                wick208SumTotalsList = [];
                wick480SumTotalsList = [];
                yostSumTotalsList = [];
                olinSumSumTotalsList = [];
                searsSumSumTotalsList = [];
                wickSumSumTotalsList = [];
            
            
                glennanMaxTotalsList = [];
                nordMaxTotalsList = [];
                olin480MaxTotalsList = [];
                olin208MaxTotalsList = [];
                rock480MaxTotalsList = [];
                sears480MaxTotalsList = [];
                sears208MaxTotalsList = [];
                tomlinsonMaxTotalsList = [];
                whiteMaxTotalsList = [];
                wick208MaxTotalsList = [];
                wick480MaxTotalsList = [];
                yostMaxTotalsList = [];
                olinSumMaxTotalsList = [];
                searsSumMaxTotalsList = [];
                wickSumMaxTotalsList = [];
            
            
            for(var s = 0; s < dateTimeArray.length; s++) {
                if(s == 0) {
                    tempGlennanResList = [];
                    tempNordResList = [];
                    tempOlin208ResList = [];
                    tempOlin480ResList = [];
                    tempRock480ResList = [];
                    tempSears208ResList = [];
                    tempSears480ResList = [];
                    tempTomlinsonResList = [];
                    tempWhiteResList = [];
                    tempWick208ResList = [];
                    tempWick480ResList = [];
                    tempYostResList = [];
                    tempOlinSumResList = [];
                    tempSearsSumResList = [];
                    tempWickSumResList = [];
                    
                    tempGlennanResList.push(glennanArray[s]);
                    tempNordResList.push(nordArray[s]);
                    tempOlin480ResList.push(olin480Array[s]);
                    tempOlin208ResList.push(olin208Array[s]);
                    tempRock480ResList.push(rock480Array[s]);
                    tempSears480ResList.push(sears480Array[s]);
                    tempSears208ResList.push(sears208Array[s]);
                    tempTomlinsonResList.push(tomlinsonArray[s]);
                    tempWhiteResList.push(whiteArray[s]);
                    tempWick208ResList.push(wick208Array[s]);
                    tempWick480ResList.push(wick480Array[s]);
                    tempYostResList.push(yostArray[s]);
                    tempOlinSumResList.push(olinSumArray[s]);
                    tempSearsSumResList.push(searsSumArray[s]);
                    tempWickSumResList.push(wickSumArray[s]);
                }
                else {
                    var d2 = new Date(dateTimeArray[s]);
                    var d1 = new Date(dateTimeArray[s-1]);
                    if(d2.getMinutes() == d1.getMinutes()) {
                        tempGlennanResList.push(glennanArray[s]);
                        tempNordResList.push(nordArray[s]);
                        tempOlin480ResList.push(olin480Array[s]);
                        tempOlin208ResList.push(olin208Array[s]);
                        tempRock480ResList.push(rock480Array[s]);
                        tempSears480ResList.push(sears480Array[s]);
                        tempSears208ResList.push(sears208Array[s]);
                        tempTomlinsonResList.push(tomlinsonArray[s]);
                        tempWhiteResList.push(whiteArray[s]);
                        tempWick208ResList.push(wick208Array[s]);
                        tempWick480ResList.push(wick480Array[s]);
                        tempYostResList.push(yostArray[s]);
                        tempOlinSumResList.push(olinSumArray[s]);
                        tempSearsSumResList.push(searsSumArray[s]);
                        tempWickSumResList.push(wickSumArray[s]);
                    }
                    else {
                        glennanResTotalsList.push(getAverage(tempGlennanResList));
                        nordResTotalsList.push(getAverage(tempNordResList));
                        olin480ResTotalsList.push(getAverage(tempOlin480ResList));
                        olin208ResTotalsList.push(getAverage(tempOlin208ResList));
                        rock480ResTotalsList.push(getAverage(tempRock480ResList));
                        sears480ResTotalsList.push(getAverage(tempSears480ResList));
                        sears208ResTotalsList.push(getAverage(tempSears208ResList));
                        tomlinsonResTotalsList.push(getAverage(tempTomlinsonResList));
                        whiteResTotalsList.push(getAverage(tempWhiteResList));
                        wick208ResTotalsList.push(getAverage(tempWick208ResList));
                        wick480ResTotalsList.push(getAverage(tempWick480ResList));
                        yostResTotalsList.push(getAverage(tempYostResList));
                        olinSumResTotalsList.push(getAverage(tempOlinSumResList));
                        searsSumResTotalsList.push(getAverage(tempSearsSumResList));
                        wickSumResTotalsList.push(getAverage(tempWickSumResList));
                        
                        glennanSumTotalsList.push(getTotal(tempGlennanResList));
                        nordSumTotalsList.push(getTotal(tempNordResList));
                        olin480SumTotalsList.push(getTotal(tempOlin480ResList));
                        olin208SumTotalsList.push(getTotal(tempOlin208ResList));
                        rock480SumTotalsList.push(getTotal(tempRock480ResList));
                        sears480SumTotalsList.push(getTotal(tempSears480ResList));
                        sears208SumTotalsList.push(getTotal(tempSears208ResList));
                        tomlinsonSumTotalsList.push(getTotal(tempTomlinsonResList));
                        whiteSumTotalsList.push(getTotal(tempWhiteResList));
                        wick208SumTotalsList.push(getTotal(tempWick208ResList));
                        wick480SumTotalsList.push(getTotal(tempWick480ResList));
                        yostSumTotalsList.push(getTotal(tempYostResList));
                        olinSumSumTotalsList.push(getTotal(tempOlinSumResList));
                        searsSumSumTotalsList.push(getTotal(tempSearsSumResList));
                        wickSumSumTotalsList.push(getTotal(tempWickSumResList));
                        
                        glennanMaxTotalsList.push(getPeak(tempGlennanResList));
                        nordMaxTotalsList.push(getPeak(tempNordResList));
                        olin480MaxTotalsList.push(getPeak(tempOlin480ResList));
                        olin208MaxTotalsList.push(getPeak(tempOlin208ResList));
                        rock480MaxTotalsList.push(getPeak(tempRock480ResList));
                        sears480MaxTotalsList.push(getPeak(tempSears480ResList));
                        sears208MaxTotalsList.push(getPeak(tempSears208ResList));
                        tomlinsonMaxTotalsList.push(getPeak(tempTomlinsonResList));
                        whiteMaxTotalsList.push(getPeak(tempWhiteResList));
                        wick208MaxTotalsList.push(getPeak(tempWick208ResList));
                        wick480MaxTotalsList.push(getPeak(tempWick480ResList));
                        yostMaxTotalsList.push(getPeak(tempYostResList));
                        olinSumMaxTotalsList.push(getPeak(tempOlinSumResList));
                        searsSumMaxTotalsList.push(getPeak(tempSearsSumResList));
                        wickSumMaxTotalsList.push(getPeak(tempWickSumResList));
                        
                        dateTimeArrayCopy.push(dateTimeArray[s-1]);
                        
                        tempGlennanResList = [];
                        tempNordResList = [];
                        tempOlin208ResList = [];
                        tempOlin480ResList = [];
                        tempRock480ResList = [];
                        tempSears208ResList = [];
                        tempSears480ResList = [];
                        tempTomlinsonResList = [];
                        tempWhiteResList = [];
                        tempWick208ResList = [];
                        tempWick480ResList = [];
                        tempYostResList = [];
                        tempOlinSumResList = [];
                        tempSearsSumResList = [];
                        tempWickSumResList = [];
                        
                        tempGlennanResList.push(glennanArray[s]);
                        tempNordResList.push(nordArray[s]);
                        tempOlin480ResList.push(olin480Array[s]);
                        tempOlin208ResList.push(olin208Array[s]);
                        tempRock480ResList.push(rock480Array[s]);
                        tempSears480ResList.push(sears480Array[s]);
                        tempSears208ResList.push(sears208Array[s]);
                        tempTomlinsonResList.push(tomlinsonArray[s]);
                        tempWhiteResList.push(whiteArray[s]);
                        tempWick208ResList.push(wick208Array[s]);
                        tempWick480ResList.push(wick480Array[s]);
                        tempYostResList.push(yostArray[s]);
                        tempOlinSumResList.push(olinSumArray[s]);
                        tempSearsSumResList.push(searsSumArray[s]);
                        tempWickSumResList.push(wickSumArray[s]);
                    }
                
                    if(s == dateTimeArray.length - 1) {
                        glennanResTotalsList.push(getAverage(tempGlennanResList));
                        nordResTotalsList.push(getAverage(tempNordResList));
                        olin480ResTotalsList.push(getAverage(tempOlin480ResList));
                        olin208ResTotalsList.push(getAverage(tempOlin208ResList));
                        rock480ResTotalsList.push(getAverage(tempRock480ResList));
                        sears480ResTotalsList.push(getAverage(tempSears480ResList));
                        sears208ResTotalsList.push(getAverage(tempSears208ResList));
                        tomlinsonResTotalsList.push(getAverage(tempTomlinsonResList));
                        whiteResTotalsList.push(getAverage(tempWhiteResList));
                        wick208ResTotalsList.push(getAverage(tempWick208ResList));
                        wick480ResTotalsList.push(getAverage(tempWick480ResList));
                        yostResTotalsList.push(getAverage(tempYostResList));
                        olinSumResTotalsList.push(getAverage(tempOlinSumResList));
                        searsSumResTotalsList.push(getAverage(tempSearsSumResList));
                        wickSumResTotalsList.push(getAverage(tempWickSumResList));
                        
                        glennanSumTotalsList.push(getTotal(tempGlennanResList));
                        nordSumTotalsList.push(getTotal(tempNordResList));
                        olin480SumTotalsList.push(getTotal(tempOlin480ResList));
                        olin208SumTotalsList.push(getTotal(tempOlin208ResList));
                        rock480SumTotalsList.push(getTotal(tempRock480ResList));
                        sears480SumTotalsList.push(getTotal(tempSears480ResList));
                        sears208SumTotalsList.push(getTotal(tempSears208ResList));
                        tomlinsonSumTotalsList.push(getTotal(tempTomlinsonResList));
                        whiteSumTotalsList.push(getTotal(tempWhiteResList));
                        wick208SumTotalsList.push(getTotal(tempWick208ResList));
                        wick480SumTotalsList.push(getTotal(tempWick480ResList));
                        yostSumTotalsList.push(getTotal(tempYostResList));
                        olinSumSumTotalsList.push(getTotal(tempOlinSumResList));
                        searsSumSumTotalsList.push(getTotal(tempSearsSumResList));
                        wickSumSumTotalsList.push(getTotal(tempWickSumResList));
                        
                        glennanMaxTotalsList.push(getPeak(tempGlennanResList));
                        nordMaxTotalsList.push(getPeak(tempNordResList));
                        olin480MaxTotalsList.push(getPeak(tempOlin480ResList));
                        olin208MaxTotalsList.push(getPeak(tempOlin208ResList));
                        rock480MaxTotalsList.push(getPeak(tempRock480ResList));
                        sears480MaxTotalsList.push(getPeak(tempSears480ResList));
                        sears208MaxTotalsList.push(getPeak(tempSears208ResList));
                        tomlinsonMaxTotalsList.push(getPeak(tempTomlinsonResList));
                        whiteMaxTotalsList.push(getPeak(tempWhiteResList));
                        wick208MaxTotalsList.push(getPeak(tempWick208ResList));
                        wick480MaxTotalsList.push(getPeak(tempWick480ResList));
                        yostMaxTotalsList.push(getPeak(tempYostResList));
                        olinSumMaxTotalsList.push(getPeak(tempOlinSumResList));
                        searsSumMaxTotalsList.push(getPeak(tempSearsSumResList));
                        wickSumMaxTotalsList.push(getPeak(tempWickSumResList));
                       
                        dateTimeArrayCopy.push(dateTimeArray[s]);
                        
                        tempGlennanResList = [];
                        tempNordResList = [];
                        tempOlin208ResList = [];
                        tempOlin480ResList = [];
                        tempRock480ResList = [];
                        tempSears208ResList = [];
                        tempSears480ResList = [];
                        tempTomlinsonResList = [];
                        tempWhiteResList = [];
                        tempWick208ResList = [];
                        tempWick480ResList = [];
                        tempYostResList = [];
                        tempOlinSumResList = [];
                        tempSearsSumResList = [];
                        tempWickSumResList = [];
                    }
                    
                    
                
                }
            }
            
            glennanAvg = getAverage(glennanResTotalsList)
            nordAvg = getAverage(nordResTotalsList)
            olin480Avg = getAverage(olin480ResTotalsList)
            olin208Avg = getAverage(olin208ResTotalsList)
            rock480Avg = getAverage(rock480ResTotalsList)
            sears480Avg = getAverage(sears480ResTotalsList)
            sears208Avg = getAverage(sears208ResTotalsList)
            tomlinsonAvg = getAverage(tomlinsonResTotalsList)
            whiteAvg = getAverage(whiteResTotalsList)
            wick208Avg = getAverage(wick208ResTotalsList)
            wick480Avg = getAverage(wick480ResTotalsList)
            yostAvg = getAverage(yostResTotalsList)
            olinSumAvg = getAverage(olinSumResTotalsList)
            searsSumAvg = getAverage(searsSumResTotalsList)
            wickSumAvg = getAverage(wickSumResTotalsList)
            
            glennanLine2Copy = [];
            nordLine2Copy = [];
            olin480Line2Copy = [];
            olin208Line2Copy = [];
            rock480Line2Copy = [];
            sears480Line2Copy = [];
            sears208Line2Copy = [];
            tomlinsonLine2Copy = [];
            whiteLine2Copy = [];
            wick208Line2Copy = [];
            wick480Line2Copy = [];
            yostLine2Copy = [];
            olinSumLine2Copy = [];
            searsSumLine2Copy = [];
            wickSumLine2Copy = [];
            
            for(var j = 0; j < dateTimeArrayCopy.length; j++) {
                if(average) {
                    glennanLine2Copy.push({x: j, y: glennanResTotalsList[j], label: dateTimeArrayCopy[j]})
                    nordLine2Copy.push({x: j, y: nordResTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin480Line2Copy.push({x: j, y: olin480ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin208Line2Copy.push({x: j, y: olin208ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    rock480Line2Copy.push({x: j, y: rock480ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears480Line2Copy.push({x: j, y: sears480ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears208Line2Copy.push({x: j, y: sears208ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    tomlinsonLine2Copy.push({x: j, y: tomlinsonResTotalsList[j], label: dateTimeArrayCopy[j]})
                    whiteLine2Copy.push({x: j, y: whiteResTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick208Line2Copy.push({x: j, y: wick208ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick480Line2Copy.push({x: j, y: wick480ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    yostLine2Copy.push({x: j, y: yostResTotalsList[j], label: dateTimeArrayCopy[j]})
                    olinSumLine2Copy.push({x: j, y: olinSumResTotalsList[j], label: dateTimeArrayCopy[j]})
                    searsSumLine2Copy.push({x: j, y: searsSumResTotalsList[j], label: dateTimeArrayCopy[j]})
                    wickSumLine2Copy.push({x: j, y: wickSumResTotalsList[j], label: dateTimeArrayCopy[j]})
                }
                
                else if(total) {
                    glennanLine2Copy.push({x: j, y: glennanSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    nordLine2Copy.push({x: j, y: nordSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin480Line2Copy.push({x: j, y: olin480SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin208Line2Copy.push({x: j, y: olin208SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    rock480Line2Copy.push({x: j, y: rock480SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears480Line2Copy.push({x: j, y: sears480SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears208Line2Copy.push({x: j, y: sears208SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    tomlinsonLine2Copy.push({x: j, y: tomlinsonSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    whiteLine2Copy.push({x: j, y: whiteSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick208Line2Copy.push({x: j, y: wick208SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick480Line2Copy.push({x: j, y: wick480SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    yostLine2Copy.push({x: j, y: yostSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    olinSumLine2Copy.push({x: j, y: olinSumSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    searsSumLine2Copy.push({x: j, y: searsSumSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    wickSumLine2Copy.push({x: j, y: wickSumSumTotalsList[j], label: dateTimeArrayCopy[j]})
                }
                
                else if(max) {
                    glennanLine2Copy.push({x: j, y: glennanMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    nordLine2Copy.push({x: j, y: nordMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin480Line2Copy.push({x: j, y: olin480MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin208Line2Copy.push({x: j, y: olin208MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    rock480Line2Copy.push({x: j, y: rock480MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears480Line2Copy.push({x: j, y: sears480MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears208Line2Copy.push({x: j, y: sears208MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    tomlinsonLine2Copy.push({x: j, y: tomlinsonMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    whiteLine2Copy.push({x: j, y: whiteMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick208Line2Copy.push({x: j, y: wick208MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick480Line2Copy.push({x: j, y: wick480MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    yostLine2Copy.push({x: j, y: yostMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    olinSumLine2Copy.push({x: j, y: olinSumMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    searsSumLine2Copy.push({x: j, y: searsSumMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    wickSumLine2Copy.push({x: j, y: wickSumMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                }
            }
            
            tempGlennanResList = [];
            tempNordResList = [];
            tempOlin208ResList = [];
            tempOlin480ResList = [];
            tempRock480ResList = [];
            tempSears208ResList = [];
            tempSears480ResList = [];
            tempTomlinsonResList = [];
            tempWhiteResList = [];
            tempWick208ResList = [];
            tempWick480ResList = [];
            tempYostResList = [];
            tempOlinSumResList = [];
            tempSearsSumResList = [];
            tempWickSumResList = [];
        }
        
        else if(res == "hours" && hours == false) {
            //Hours
            resDTArray = [];
            
            seconds = false;
            minutes = false;
            hours = true;
            
            glennanLine2 = [];
            nordLine2 = [];
            olin480Line2 = [];
            olin208Line2 = [];
            rock480Line2 = [];
            sears480Line2 = [];
            sears208Line2 = [];
            tomlinsonLine2 = [];
            whiteLine2 = [];
            wick208Line2 = [];
            wick480Line2 = [];
            yostLine2 = [];
            olinSumLine2 = [];
            searsSumLine2 = [];
            wickSumLine2 = [];
            
            glennanLineCopy2 = [];
            nordLineCopy2 = [];
            olin480LineCopy2 = [];
            olin208LineCopy2 = [];
            rock480LineCopy2 = [];
            sears480LineCopy2 = [];
            sears208LineCopy2 = [];
            tomlinsonLineCopy2 = [];
            whiteLineCopy2 = [];
            wick208LineCopy2 = [];
            wick480LineCopy2 = [];
            yostLineCopy2 = [];
            olinSumLineCopy2 = [];
            searsSumLineCopy2 = [];
            wickSumLineCopy2 = [];
            
            glennanResList = [];
            nordResList = [];
            olin480ResList = [];
            olin208ResList = [];
            rock480ResList = [];
            sears480ResList = [];
            sears208ResList = [];
            tomlinsonResList = [];
            whiteResList = [];
            wick208ResList = [];
            wick480ResList = [];
            yostResList = [];
            olinSumResList = [];
            searsSumResList = [];
            wickSumResList = [];
            
            if(dateTimeArray.length == 1) {
                glennanResList.push(glennanArray[0]);
                nordResList.push(nordArray[0]);
                olin480ResList.push(olin480Array[0]);
                olin208ResList.push(olin208Array[0]);
                rock480ResList.push(rock480Array[0]);
                sears480ResList.push(sears480Array[0]);
                sears208ResList.push(sears208Array[0]);
                tomlinsonResList.push(tomlinsonArray[0]);
                whiteResList.push(whiteArray[0]);
                wick208ResList.push(wick208Array[0]);
                wick480ResList.push(wick480Array[0]);
                yostResList.push(yostArray[0]);
                olinSumResList.push(olinSumArray[0]);
                searsSumResList.push(searsSumArray[0]);
                wickSumResList.push(wickSumArray[0]);
                resDTArray.push(dateTimeArray[0]);
            }
            
            else {
                
                for(var r = dateTimeArray.indexOf(from2); r <= dateTimeArray.lastIndexOf(to2); r++){
                    
                    //Do this if it is the first in the array
                    if(r == dateTimeArray.indexOf(from2)) {
                        
                        //Placeholders
                        tempGlennanResList = [];
                        tempNordResList = [];
                        tempOlin208ResList = [];
                        tempOlin480ResList = [];
                        tempRock480ResList = [];
                        tempSears208ResList = [];
                        tempSears480ResList = [];
                        tempTomlinsonResList = [];
                        tempWhiteResList = [];
                        tempWick208ResList = [];
                        tempWick480ResList = [];
                        tempYostResList = [];
                        tempOlinSumResList = [];
                        tempSearsSumResList = [];
                        tempWickSumResList = [];
                        
                        //Pushes the current value in the array
                        tempGlennanResList.push(glennanArray[r]);
                        tempNordResList.push(nordArray[r]);
                        tempOlin480ResList.push(olin480Array[r]);
                        tempOlin208ResList.push(olin208Array[r]);
                        tempRock480ResList.push(rock480Array[r]);
                        tempSears480ResList.push(sears480Array[r]);
                        tempSears208ResList.push(sears208Array[r]);
                        tempTomlinsonResList.push(tomlinsonArray[r]);
                        tempWhiteResList.push(whiteArray[r]);
                        tempWick208ResList.push(wick208Array[r]);
                        tempWick480ResList.push(wick480Array[r]);
                        tempYostResList.push(yostArray[r]);
                        tempOlinSumResList.push(olinSumArray[r]);
                        tempSearsSumResList.push(searsSumArray[r]);
                        tempWickSumResList.push(wickSumArray[r]);
                    }
                    
                    else {
                        
                        var d2 = new Date(dateTimeArray[r]);
                        var d1 = new Date(dateTimeArray[r-1]);
                        
                        //Pushes current value of the arrays into the temp lists if its the same minute as before
                        if(d2.getHours() == d1.getHours()) {
                            tempGlennanResList.push(glennanArray[r]);
                            tempNordResList.push(nordArray[r]);
                            tempOlin480ResList.push(olin480Array[r]);
                            tempOlin208ResList.push(olin208Array[r]);
                            tempRock480ResList.push(rock480Array[r]);
                            tempSears480ResList.push(sears480Array[r]);
                            tempSears208ResList.push(sears208Array[r]);
                            tempTomlinsonResList.push(tomlinsonArray[r]);
                            tempWhiteResList.push(whiteArray[r]);
                            tempWick208ResList.push(wick208Array[r]);
                            tempWick480ResList.push(wick480Array[r]);
                            tempYostResList.push(yostArray[r]);
                            tempOlinSumResList.push(olinSumArray[r]);
                            tempSearsSumResList.push(searsSumArray[r]);
                            tempWickSumResList.push(wickSumArray[r]);
                        }
                        else {
                            
                            if(average) {
                                glennanResList.push(getAverage(tempGlennanResList));
                                nordResList.push(getAverage(tempNordResList));
                                olin480ResList.push(getAverage(tempOlin480ResList));
                                olin208ResList.push(getAverage(tempOlin208ResList));
                                rock480ResList.push(getAverage(tempRock480ResList));
                                sears480ResList.push(getAverage(tempSears480ResList));
                                sears208ResList.push(getAverage(tempSears208ResList));
                                tomlinsonResList.push(getAverage(tempTomlinsonResList));
                                whiteResList.push(getAverage(tempWhiteResList));
                                wick208ResList.push(getAverage(tempWick208ResList));
                                wick480ResList.push(getAverage(tempWick480ResList));
                                yostResList.push(getAverage(tempYostResList));
                                olinSumResList.push(getAverage(tempOlinSumResList));
                                searsSumResList.push(getAverage(tempSearsSumResList));
                                wickSumResList.push(getAverage(tempWickSumResList));
                            }
                            
                            else if(total) {
                                glennanResList.push(getTotal(tempGlennanResList));
                                nordResList.push(getTotal(tempNordResList));
                                olin480ResList.push(getTotal(tempOlin480ResList));
                                olin208ResList.push(getTotal(tempOlin208ResList));
                                rock480ResList.push(getTotal(tempRock480ResList));
                                sears480ResList.push(getTotal(tempSears480ResList));
                                sears208ResList.push(getTotal(tempSears208ResList));
                                tomlinsonResList.push(getTotal(tempTomlinsonResList));
                                whiteResList.push(getTotal(tempWhiteResList));
                                wick208ResList.push(getTotal(tempWick208ResList));
                                wick480ResList.push(getTotal(tempWick480ResList));
                                yostResList.push(getTotal(tempYostResList));
                                olinSumResList.push(getTotal(tempOlinSumResList));
                                searsSumResList.push(getTotal(tempSearsSumResList));
                                wickSumResList.push(getTotal(tempWickSumResList));
                            }
                            
                            else if(max) {
                                glennanResList.push(getPeak(tempGlennanResList));
                                nordResList.push(getPeak(tempNordResList));
                                olin480ResList.push(getPeak(tempOlin480ResList));
                                olin208ResList.push(getPeak(tempOlin208ResList));
                                rock480ResList.push(getPeak(tempRock480ResList));
                                sears480ResList.push(getPeak(tempSears480ResList));
                                sears208ResList.push(getPeak(tempSears208ResList));
                                tomlinsonResList.push(getPeak(tempTomlinsonResList));
                                whiteResList.push(getPeak(tempWhiteResList));
                                wick208ResList.push(getPeak(tempWick208ResList));
                                wick480ResList.push(getPeak(tempWick480ResList));
                                yostResList.push(getPeak(tempYostResList));
                                olinSumResList.push(getPeak(tempOlinSumResList));
                                searsSumResList.push(getPeak(tempSearsSumResList));
                                wickSumResList.push(getPeak(tempWickSumResList));
                            }
                            
                            resDTArray.push(dateTimeArray[r-1]);
                            
                            tempGlennanResList = [];
                            tempNordResList = [];
                            tempOlin208ResList = [];
                            tempOlin480ResList = [];
                            tempRock480ResList = [];
                            tempSears208ResList = [];
                            tempSears480ResList = [];
                            tempTomlinsonResList = [];
                            tempWhiteResList = [];
                            tempWick208ResList = [];
                            tempWick480ResList = [];
                            tempYostResList = [];
                            tempOlinSumResList = [];
                            tempSearsSumResList = [];
                            tempWickSumResList = [];
                            
                            tempGlennanResList.push(glennanArray[r]);
                            tempNordResList.push(nordArray[r]);
                            tempOlin480ResList.push(olin480Array[r]);
                            tempOlin208ResList.push(olin208Array[r]);
                            tempRock480ResList.push(rock480Array[r]);
                            tempSears480ResList.push(sears480Array[r]);
                            tempSears208ResList.push(sears208Array[r]);
                            tempTomlinsonResList.push(tomlinsonArray[r]);
                            tempWhiteResList.push(whiteArray[r]);
                            tempWick208ResList.push(wick208Array[r]);
                            tempWick480ResList.push(wick480Array[r]);
                            tempYostResList.push(yostArray[r]);
                            tempOlinSumResList.push(olinSumArray[r]);
                            tempSearsSumResList.push(searsSumArray[r]);
                            tempWickSumResList.push(wickSumArray[r]);
                            
                        }
                        
                        if(r == dateTimeArray.lastIndexOf(to2)) {
                            if(average) {
                                glennanResList.push(getAverage(tempGlennanResList));
                                nordResList.push(getAverage(tempNordResList));
                                olin480ResList.push(getAverage(tempOlin480ResList));
                                olin208ResList.push(getAverage(tempOlin208ResList));
                                rock480ResList.push(getAverage(tempRock480ResList));
                                sears480ResList.push(getAverage(tempSears480ResList));
                                sears208ResList.push(getAverage(tempSears208ResList));
                                tomlinsonResList.push(getAverage(tempTomlinsonResList));
                                whiteResList.push(getAverage(tempWhiteResList));
                                wick208ResList.push(getAverage(tempWick208ResList));
                                wick480ResList.push(getAverage(tempWick480ResList));
                                yostResList.push(getAverage(tempYostResList));
                                olinSumResList.push(getAverage(tempOlinSumResList));
                                searsSumResList.push(getAverage(tempSearsSumResList));
                                wickSumResList.push(getAverage(tempWickSumResList));
                            }
                            
                            else if(total) {
                                glennanResList.push(getTotal(tempGlennanResList));
                                nordResList.push(getTotal(tempNordResList));
                                olin480ResList.push(getTotal(tempOlin480ResList));
                                olin208ResList.push(getTotal(tempOlin208ResList));
                                rock480ResList.push(getTotal(tempRock480ResList));
                                sears480ResList.push(getTotal(tempSears480ResList));
                                sears208ResList.push(getTotal(tempSears208ResList));
                                tomlinsonResList.push(getTotal(tempTomlinsonResList));
                                whiteResList.push(getTotal(tempWhiteResList));
                                wick208ResList.push(getTotal(tempWick208ResList));
                                wick480ResList.push(getTotal(tempWick480ResList));
                                yostResList.push(getTotal(tempYostResList));
                                olinSumResList.push(getTotal(tempOlinSumResList));
                                searsSumResList.push(getTotal(tempSearsSumResList));
                                wickSumResList.push(getTotal(tempWickSumResList));
                            }
                            
                            else if(max) {
                                glennanResList.push(getPeak(tempGlennanResList));
                                nordResList.push(getPeak(tempNordResList));
                                olin480ResList.push(getPeak(tempOlin480ResList));
                                olin208ResList.push(getPeak(tempOlin208ResList));
                                rock480ResList.push(getPeak(tempRock480ResList));
                                sears480ResList.push(getPeak(tempSears480ResList));
                                sears208ResList.push(getPeak(tempSears208ResList));
                                tomlinsonResList.push(getPeak(tempTomlinsonResList));
                                whiteResList.push(getPeak(tempWhiteResList));
                                wick208ResList.push(getPeak(tempWick208ResList));
                                wick480ResList.push(getPeak(tempWick480ResList));
                                yostResList.push(getPeak(tempYostResList));
                                olinSumResList.push(getPeak(tempOlinSumResList));
                                searsSumResList.push(getPeak(tempSearsSumResList));
                                wickSumResList.push(getPeak(tempWickSumResList));
                            }
                            
                            resDTArray.push(dateTimeArray[r]);
                            
                            tempGlennanResList = [];
                            tempNordResList = [];
                            tempOlin208ResList = [];
                            tempOlin480ResList = [];
                            tempRock480ResList = [];
                            tempSears208ResList = [];
                            tempSears480ResList = [];
                            tempTomlinsonResList = [];
                            tempWhiteResList = [];
                            tempWick208ResList = [];
                            tempWick480ResList = [];
                            tempYostResList = [];
                            tempOlinSumResList = [];
                            tempSearsSumResList = [];
                            tempWickSumResList = [];
                        }
                        
                    }
                    
                    
                }
                
            }
            
            
            
            //Afterwards, put the new info in the copy2 array.
            for(var z = 0; z < resDTArray.length; z++) {
                glennanLine2.push({x: z, y: glennanResList[z], label: resDTArray[z]})
                nordLine2.push({x: z, y: nordResList[z], label: resDTArray[z]})
                olin480Line2.push({x: z, y: olin480ResList[z], label: resDTArray[z]})
                olin208Line2.push({x: z, y: olin208ResList[z], label: resDTArray[z]})
                rock480Line2.push({x: z, y: rock480ResList[z], label: resDTArray[z]})
                sears480Line2.push({x: z, y: sears480ResList[z], label: resDTArray[z]})
                sears208Line2.push({x: z, y: sears208ResList[z], label: resDTArray[z]})
                tomlinsonLine2.push({x: z, y: tomlinsonResList[z], label: resDTArray[z]})
                whiteLine2.push({x: z, y: whiteResList[z], label: resDTArray[z]})
                wick208Line2.push({x: z, y: wick208ResList[z], label: resDTArray[z]})
                wick480Line2.push({x: z, y: wick480ResList[z], label: resDTArray[z]})
                yostLine2.push({x: z, y: yostResList[z], label: resDTArray[z]})
                olinSumLine2.push({x: z, y: olinSumResList[z], label: resDTArray[z]})
                searsSumLine2.push({x: z, y: searsSumResList[z], label: resDTArray[z]})
                wickSumLine2.push({x: z, y: wickSumResList[z], label: resDTArray[z]})
                
                glennanLineCopy2 = glennanLine2;
                nordLineCopy2 = nordLine2;
                olin480LineCopy2 = olin480Line2;
                olin208LineCopy2 = olin208Line2;
                rock480LineCopy2 = rock480Line2;
                sears480LineCopy2 = sears480Line2;
                sears208LineCopy2 = sears208Line2;
                tomlinsonLineCopy2 = tomlinsonLine2;
                whiteLineCopy2 = whiteLine2;
                wick208LineCopy2 = wick208Line2;
                wick480LineCopy2 = wick480Line2;
                yostLineCopy2 = yostLine2;
                olinSumLineCopy2 = olinSumLine2;
                searsSumLineCopy2 = searsSumLine2;
                wickSumLineCopy2 = wickSumLine2;
            }
            
            dateTimeArrayCopy = [];
            
            glennanResTotalsList = [];
            nordResTotalsList = [];
            olin480ResTotalsList = [];
            olin208ResTotalsList = [];
            rock480ResTotalsList = [];
            sears480ResTotalsList = [];
            sears208ResTotalsList = [];
            tomlinsonResTotalsList = [];
            whiteResTotalsList = [];
            wick208ResTotalsList = [];
            wick480ResTotalsList = [];
            yostResTotalsList = [];
            olinSumResTotalsList = [];
            searsSumResTotalsList = [];
            wickSumResTotalsList = [];
            
            glennanSumTotalsList = [];
            nordSumTotalsList = [];
            olin480SumTotalsList = [];
            olin208SumTotalsList = [];
            rock480SumTotalsList = [];
            sears480SumTotalsList = [];
            sears208SumTotalsList = [];
            tomlinsonSumTotalsList = [];
            whiteSumTotalsList = [];
            wick208SumTotalsList = [];
            wick480SumTotalsList = [];
            yostSumTotalsList = [];
            olinSumSumTotalsList = [];
            searsSumSumTotalsList = [];
            wickSumSumTotalsList = [];
            
            glennanMaxTotalsList = [];
            nordMaxTotalsList = [];
            olin480MaxTotalsList = [];
            olin208MaxTotalsList = [];
            rock480MaxTotalsList = [];
            sears480MaxTotalsList = [];
            sears208MaxTotalsList = [];
            tomlinsonMaxTotalsList = [];
            whiteMaxTotalsList = [];
            wick208MaxTotalsList = [];
            wick480MaxTotalsList = [];
            yostMaxTotalsList = [];
            olinSumMaxTotalsList = [];
            searsSumMaxTotalsList = [];
            wickSumMaxTotalsList = [];
            
            
            for(var s = 0; s < dateTimeArray.length; s++) {
                if(s == 0) {
                    tempGlennanResList = [];
                    tempNordResList = [];
                    tempOlin208ResList = [];
                    tempOlin480ResList = [];
                    tempRock480ResList = [];
                    tempSears208ResList = [];
                    tempSears480ResList = [];
                    tempTomlinsonResList = [];
                    tempWhiteResList = [];
                    tempWick208ResList = [];
                    tempWick480ResList = [];
                    tempYostResList = [];
                    tempOlinSumResList = [];
                    tempSearsSumResList = [];
                    tempWickSumResList = [];
                    
                    tempGlennanResList.push(glennanArray[s]);
                    tempNordResList.push(nordArray[s]);
                    tempOlin480ResList.push(olin480Array[s]);
                    tempOlin208ResList.push(olin208Array[s]);
                    tempRock480ResList.push(rock480Array[s]);
                    tempSears480ResList.push(sears480Array[s]);
                    tempSears208ResList.push(sears208Array[s]);
                    tempTomlinsonResList.push(tomlinsonArray[s]);
                    tempWhiteResList.push(whiteArray[s]);
                    tempWick208ResList.push(wick208Array[s]);
                    tempWick480ResList.push(wick480Array[s]);
                    tempYostResList.push(yostArray[s]);
                    tempOlinSumResList.push(olinSumArray[s]);
                    tempSearsSumResList.push(searsSumArray[s]);
                    tempWickSumResList.push(wickSumArray[s]);
                }
                else {
                    var d2 = new Date(dateTimeArray[s]);
                    var d1 = new Date(dateTimeArray[s-1]);
                    if(d2.getHours() == d1.getHours()) {
                        tempGlennanResList.push(glennanArray[s]);
                        tempNordResList.push(nordArray[s]);
                        tempOlin480ResList.push(olin480Array[s]);
                        tempOlin208ResList.push(olin208Array[s]);
                        tempRock480ResList.push(rock480Array[s]);
                        tempSears480ResList.push(sears480Array[s]);
                        tempSears208ResList.push(sears208Array[s]);
                        tempTomlinsonResList.push(tomlinsonArray[s]);
                        tempWhiteResList.push(whiteArray[s]);
                        tempWick208ResList.push(wick208Array[s]);
                        tempWick480ResList.push(wick480Array[s]);
                        tempYostResList.push(yostArray[s]);
                        tempOlinSumResList.push(olinSumArray[s]);
                        tempSearsSumResList.push(searsSumArray[s]);
                        tempWickSumResList.push(wickSumArray[s]);
                    }
                    else {
                        glennanResTotalsList.push(getAverage(tempGlennanResList));
                        nordResTotalsList.push(getAverage(tempNordResList));
                        olin480ResTotalsList.push(getAverage(tempOlin480ResList));
                        olin208ResTotalsList.push(getAverage(tempOlin208ResList));
                        rock480ResTotalsList.push(getAverage(tempRock480ResList));
                        sears480ResTotalsList.push(getAverage(tempSears480ResList));
                        sears208ResTotalsList.push(getAverage(tempSears208ResList));
                        tomlinsonResTotalsList.push(getAverage(tempTomlinsonResList));
                        whiteResTotalsList.push(getAverage(tempWhiteResList));
                        wick208ResTotalsList.push(getAverage(tempWick208ResList));
                        wick480ResTotalsList.push(getAverage(tempWick480ResList));
                        yostResTotalsList.push(getAverage(tempYostResList));
                        olinSumResTotalsList.push(getAverage(tempOlinSumResList));
                        searsSumResTotalsList.push(getAverage(tempSearsSumResList));
                        wickSumResTotalsList.push(getAverage(tempWickSumResList));
                        
                        glennanSumTotalsList.push(getTotal(tempGlennanResList));
                        nordSumTotalsList.push(getTotal(tempNordResList));
                        olin480SumTotalsList.push(getTotal(tempOlin480ResList));
                        olin208SumTotalsList.push(getTotal(tempOlin208ResList));
                        rock480SumTotalsList.push(getTotal(tempRock480ResList));
                        sears480SumTotalsList.push(getTotal(tempSears480ResList));
                        sears208SumTotalsList.push(getTotal(tempSears208ResList));
                        tomlinsonSumTotalsList.push(getTotal(tempTomlinsonResList));
                        whiteSumTotalsList.push(getTotal(tempWhiteResList));
                        wick208SumTotalsList.push(getTotal(tempWick208ResList));
                        wick480SumTotalsList.push(getTotal(tempWick480ResList));
                        yostSumTotalsList.push(getTotal(tempYostResList));
                        olinSumSumTotalsList.push(getTotal(tempOlinSumResList));
                        searsSumSumTotalsList.push(getTotal(tempSearsSumResList));
                        wickSumSumTotalsList.push(getTotal(tempWickSumResList));
                        
                        glennanMaxTotalsList.push(getPeak(tempGlennanResList));
                        nordMaxTotalsList.push(getPeak(tempNordResList));
                        olin480MaxTotalsList.push(getPeak(tempOlin480ResList));
                        olin208MaxTotalsList.push(getPeak(tempOlin208ResList));
                        rock480MaxTotalsList.push(getPeak(tempRock480ResList));
                        sears480MaxTotalsList.push(getPeak(tempSears480ResList));
                        sears208MaxTotalsList.push(getPeak(tempSears208ResList));
                        tomlinsonMaxTotalsList.push(getPeak(tempTomlinsonResList));
                        whiteMaxTotalsList.push(getPeak(tempWhiteResList));
                        wick208MaxTotalsList.push(getPeak(tempWick208ResList));
                        wick480MaxTotalsList.push(getPeak(tempWick480ResList));
                        yostMaxTotalsList.push(getPeak(tempYostResList));
                        olinSumMaxTotalsList.push(getPeak(tempOlinSumResList));
                        searsSumMaxTotalsList.push(getPeak(tempSearsSumResList));
                        wickSumMaxTotalsList.push(getPeak(tempWickSumResList));
                        
                        dateTimeArrayCopy.push(dateTimeArray[s-1]);
                        
                        tempGlennanResList = [];
                        tempNordResList = [];
                        tempOlin208ResList = [];
                        tempOlin480ResList = [];
                        tempRock480ResList = [];
                        tempSears208ResList = [];
                        tempSears480ResList = [];
                        tempTomlinsonResList = [];
                        tempWhiteResList = [];
                        tempWick208ResList = [];
                        tempWick480ResList = [];
                        tempYostResList = [];
                        tempOlinSumResList = [];
                        tempSearsSumResList = [];
                        tempWickSumResList = [];
                        
                        tempGlennanResList.push(glennanArray[s]);
                        tempNordResList.push(nordArray[s]);
                        tempOlin480ResList.push(olin480Array[s]);
                        tempOlin208ResList.push(olin208Array[s]);
                        tempRock480ResList.push(rock480Array[s]);
                        tempSears480ResList.push(sears480Array[s]);
                        tempSears208ResList.push(sears208Array[s]);
                        tempTomlinsonResList.push(tomlinsonArray[s]);
                        tempWhiteResList.push(whiteArray[s]);
                        tempWick208ResList.push(wick208Array[s]);
                        tempWick480ResList.push(wick480Array[s]);
                        tempYostResList.push(yostArray[s]);
                        tempOlinSumResList.push(olinSumArray[s]);
                        tempSearsSumResList.push(searsSumArray[s]);
                        tempWickSumResList.push(wickSumArray[s]);
                    }
                    
                    if(s == dateTimeArray.length - 1) {
                        glennanResTotalsList.push(getAverage(tempGlennanResList));
                        nordResTotalsList.push(getAverage(tempNordResList));
                        olin480ResTotalsList.push(getAverage(tempOlin480ResList));
                        olin208ResTotalsList.push(getAverage(tempOlin208ResList));
                        rock480ResTotalsList.push(getAverage(tempRock480ResList));
                        sears480ResTotalsList.push(getAverage(tempSears480ResList));
                        sears208ResTotalsList.push(getAverage(tempSears208ResList));
                        tomlinsonResTotalsList.push(getAverage(tempTomlinsonResList));
                        whiteResTotalsList.push(getAverage(tempWhiteResList));
                        wick208ResTotalsList.push(getAverage(tempWick208ResList));
                        wick480ResTotalsList.push(getAverage(tempWick480ResList));
                        yostResTotalsList.push(getAverage(tempYostResList));
                        olinSumResTotalsList.push(getAverage(tempOlinSumResList));
                        searsSumResTotalsList.push(getAverage(tempSearsSumResList));
                        wickSumResTotalsList.push(getAverage(tempWickSumResList));
                        
                        glennanSumTotalsList.push(getTotal(tempGlennanResList));
                        nordSumTotalsList.push(getTotal(tempNordResList));
                        olin480SumTotalsList.push(getTotal(tempOlin480ResList));
                        olin208SumTotalsList.push(getTotal(tempOlin208ResList));
                        rock480SumTotalsList.push(getTotal(tempRock480ResList));
                        sears480SumTotalsList.push(getTotal(tempSears480ResList));
                        sears208SumTotalsList.push(getTotal(tempSears208ResList));
                        tomlinsonSumTotalsList.push(getTotal(tempTomlinsonResList));
                        whiteSumTotalsList.push(getTotal(tempWhiteResList));
                        wick208SumTotalsList.push(getTotal(tempWick208ResList));
                        wick480SumTotalsList.push(getTotal(tempWick480ResList));
                        yostSumTotalsList.push(getTotal(tempYostResList));
                        olinSumSumTotalsList.push(getTotal(tempOlinSumResList));
                        searsSumSumTotalsList.push(getTotal(tempSearsSumResList));
                        wickSumSumTotalsList.push(getTotal(tempWickSumResList));
                        
                        glennanMaxTotalsList.push(getPeak(tempGlennanResList));
                        nordMaxTotalsList.push(getPeak(tempNordResList));
                        olin480MaxTotalsList.push(getPeak(tempOlin480ResList));
                        olin208MaxTotalsList.push(getPeak(tempOlin208ResList));
                        rock480MaxTotalsList.push(getPeak(tempRock480ResList));
                        sears480MaxTotalsList.push(getPeak(tempSears480ResList));
                        sears208MaxTotalsList.push(getPeak(tempSears208ResList));
                        tomlinsonMaxTotalsList.push(getPeak(tempTomlinsonResList));
                        whiteMaxTotalsList.push(getPeak(tempWhiteResList));
                        wick208MaxTotalsList.push(getPeak(tempWick208ResList));
                        wick480MaxTotalsList.push(getPeak(tempWick480ResList));
                        yostMaxTotalsList.push(getPeak(tempYostResList));
                        olinSumMaxTotalsList.push(getPeak(tempOlinSumResList));
                        searsSumMaxTotalsList.push(getPeak(tempSearsSumResList));
                        wickSumMaxTotalsList.push(getPeak(tempWickSumResList));
                        
                        dateTimeArrayCopy.push(dateTimeArray[s]);
                        
                        tempGlennanResList = [];
                        tempNordResList = [];
                        tempOlin208ResList = [];
                        tempOlin480ResList = [];
                        tempRock480ResList = [];
                        tempSears208ResList = [];
                        tempSears480ResList = [];
                        tempTomlinsonResList = [];
                        tempWhiteResList = [];
                        tempWick208ResList = [];
                        tempWick480ResList = [];
                        tempYostResList = [];
                        tempOlinSumResList = [];
                        tempSearsSumResList = [];
                        tempWickSumResList = [];
                    }
                }
            }
            
            glennanAvg = getAverage(glennanResTotalsList)
            nordAvg = getAverage(nordResTotalsList)
            olin480Avg = getAverage(olin480ResTotalsList)
            olin208Avg = getAverage(olin208ResTotalsList)
            rock480Avg = getAverage(rock480ResTotalsList)
            sears480Avg = getAverage(sears480ResTotalsList)
            sears208Avg = getAverage(sears208ResTotalsList)
            tomlinsonAvg = getAverage(tomlinsonResTotalsList)
            whiteAvg = getAverage(whiteResTotalsList)
            wick208Avg = getAverage(wick208ResTotalsList)
            wick480Avg = getAverage(wick480ResTotalsList)
            yostAvg = getAverage(yostResTotalsList)
            olinSumAvg = getAverage(olinSumResTotalsList)
            searsSumAvg = getAverage(searsSumResTotalsList)
            wickSumAvg = getAverage(wickSumResTotalsList)
            
            glennanLine2Copy = [];
            nordLine2Copy = [];
            olin480Line2Copy = [];
            olin208Line2Copy = [];
            rock480Line2Copy = [];
            sears480Line2Copy = [];
            sears208Line2Copy = [];
            tomlinsonLine2Copy = [];
            whiteLine2Copy = [];
            wick208Line2Copy = [];
            wick480Line2Copy = [];
            yostLine2Copy = [];
            olinSumLine2Copy = [];
            searsSumLine2Copy = [];
            wickSumLine2Copy = [];
            
            for(var j = 0; j < dateTimeArrayCopy.length; j++) {
                if(average) {
                    glennanLine2Copy.push({x: j, y: glennanResTotalsList[j], label: dateTimeArrayCopy[j]})
                    nordLine2Copy.push({x: j, y: nordResTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin480Line2Copy.push({x: j, y: olin480ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin208Line2Copy.push({x: j, y: olin208ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    rock480Line2Copy.push({x: j, y: rock480ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears480Line2Copy.push({x: j, y: sears480ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears208Line2Copy.push({x: j, y: sears208ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    tomlinsonLine2Copy.push({x: j, y: tomlinsonResTotalsList[j], label: dateTimeArrayCopy[j]})
                    whiteLine2Copy.push({x: j, y: whiteResTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick208Line2Copy.push({x: j, y: wick208ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick480Line2Copy.push({x: j, y: wick480ResTotalsList[j], label: dateTimeArrayCopy[j]})
                    yostLine2Copy.push({x: j, y: yostResTotalsList[j], label: dateTimeArrayCopy[j]})
                    olinSumLine2Copy.push({x: j, y: olinSumResTotalsList[j], label: dateTimeArrayCopy[j]})
                    searsSumLine2Copy.push({x: j, y: searsSumResTotalsList[j], label: dateTimeArrayCopy[j]})
                    wickSumLine2Copy.push({x: j, y: wickSumResTotalsList[j], label: dateTimeArrayCopy[j]})
                }
                
                else if(total) {
                    glennanLine2Copy.push({x: j, y: glennanSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    nordLine2Copy.push({x: j, y: nordSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin480Line2Copy.push({x: j, y: olin480SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin208Line2Copy.push({x: j, y: olin208SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    rock480Line2Copy.push({x: j, y: rock480SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears480Line2Copy.push({x: j, y: sears480SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears208Line2Copy.push({x: j, y: sears208SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    tomlinsonLine2Copy.push({x: j, y: tomlinsonSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    whiteLine2Copy.push({x: j, y: whiteSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick208Line2Copy.push({x: j, y: wick208SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick480Line2Copy.push({x: j, y: wick480SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    yostLine2Copy.push({x: j, y: yostSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    olinSumLine2Copy.push({x: j, y: olinSumSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    searsSumLine2Copy.push({x: j, y: searsSumSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    wickSumLine2Copy.push({x: j, y: wickSumSumTotalsList[j], label: dateTimeArrayCopy[j]})
                }
                
                else if(max) {
                    glennanLine2Copy.push({x: j, y: glennanMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    nordLine2Copy.push({x: j, y: nordMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin480Line2Copy.push({x: j, y: olin480MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin208Line2Copy.push({x: j, y: olin208MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    rock480Line2Copy.push({x: j, y: rock480MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears480Line2Copy.push({x: j, y: sears480MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears208Line2Copy.push({x: j, y: sears208MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    tomlinsonLine2Copy.push({x: j, y: tomlinsonMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    whiteLine2Copy.push({x: j, y: whiteMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick208Line2Copy.push({x: j, y: wick208MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick480Line2Copy.push({x: j, y: wick480MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    yostLine2Copy.push({x: j, y: yostMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    olinSumLine2Copy.push({x: j, y: olinSumMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    searsSumLine2Copy.push({x: j, y: searsSumMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    wickSumLine2Copy.push({x: j, y: wickSumMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                }
            }
            
            tempGlennanResList = [];
            tempNordResList = [];
            tempOlin208ResList = [];
            tempOlin480ResList = [];
            tempRock480ResList = [];
            tempSears208ResList = [];
            tempSears480ResList = [];
            tempTomlinsonResList = [];
            tempWhiteResList = [];
            tempWick208ResList = [];
            tempWick480ResList = [];
            tempYostResList = [];
            tempOlinSumResList = [];
            tempSearsSumResList = [];
            tempWickSumResList = [];
        }
        


        var lastIndex = resDTArray.length - 1;
        
        //Then, use the copy2
        clearAllArrays();
        
        //Trim out the available dates
        
        if(!(filteredBuildings[0] == "Glennan")){
    		chartDatArray.push({type:"line",name:"Glennan",showInLegend:true,dataPoints:glennanLineCopy2})
    		chartAvgArray.push({ y: glennanAvg, indexLabel: "Glennan"})
	    	chartCurrentArray.push({ y: glennanResList[lastIndex], indexLabel: "Glennan"})
    	}
        
    	if(!(filteredBuildings[1] == "Nord")){
    		chartDatArray.push({type:"line",name:"Nord",showInLegend:true,dataPoints:nordLineCopy2})
			chartAvgArray.push({ y: nordAvg, indexLabel: "Nord"})
	    	chartCurrentArray.push({ y: nordResList[lastIndex], indexLabel: "Nord"})
    	}
    	if(!(filteredBuildings[2] == "Olin 480")){
			chartDatArray.push({type:"line",name:"Olin 480",showInLegend:true,dataPoints:olin480LineCopy2})
			chartAvgArray.push({ y: olin480Avg, indexLabel: "Olin 480"})
	    	chartCurrentArray.push({ y: olin480ResList[lastIndex], indexLabel: "Olin 480"})
		}
		if(!(filteredBuildings[3] == "Olin 208")){
			chartDatArray.push({type:"line",name:"Olin 208",showInLegend:true,dataPoints:olin208LineCopy2})
			chartAvgArray.push({ y: olin208Avg, indexLabel: "Olin 208"})
	    	chartCurrentArray.push({ y: olin208ResList[lastIndex], indexLabel: "Olin 208"})
		}
		if(!(filteredBuildings[4] == "Rock 480")){
			chartDatArray.push({type:"line",name:"Rock 480",showInLegend:true,dataPoints:rock480LineCopy2})
			chartAvgArray.push({ y: rock480Avg, indexLabel: "Rock 480"})
	    	chartCurrentArray.push({ y: rock480ResList[lastIndex], indexLabel: "Rock 480"})
		}
		if(!(filteredBuildings[5] == "Sears 480")){
			chartDatArray.push({type:"line",name:"Sears 480",showInLegend:true,dataPoints:sears480LineCopy2})
			chartAvgArray.push({ y: sears480Avg, indexLabel: "Sears 480"})
	    	chartCurrentArray.push({ y: sears480ResList[lastIndex], indexLabel: "Sears 480"})
		}
		if(!(filteredBuildings[6] == "Sears 208")){
			chartDatArray.push({type:"line",name:"Sears 208",showInLegend:true,dataPoints:sears208LineCopy2})
			chartAvgArray.push({ y: sears208Avg, indexLabel: "Sears 208"})
	    	chartCurrentArray.push({ y: sears208ResList[lastIndex], indexLabel: "Sears 208"})
		}
		if(!(filteredBuildings[7] == "Tomlinson")){
			chartDatArray.push({type:"line",name:"Tomlinson",showInLegend:true,dataPoints:tomlinsonLineCopy2})
			chartAvgArray.push({ y: tomlinsonAvg, indexLabel: "Tomlinson"})
	    	chartCurrentArray.push({ y: tomlinsonResList[lastIndex], indexLabel: "Tomlinson"})
		}
		if(!(filteredBuildings[8] == "White")){
			chartDatArray.push({type:"line",name:"White",showInLegend:true,dataPoints:whiteLineCopy2})
			chartAvgArray.push({ y: whiteAvg, indexLabel: "White"})
	    	chartCurrentArray.push({ y: whiteResList[lastIndex], indexLabel: "White"})
		}
		if(!(filteredBuildings[9] == "Wick 208")){
			chartDatArray.push({type:"line",name:"Wick 208",showInLegend:true,dataPoints:wick208LineCopy2})
			chartAvgArray.push({ y: wick208Avg, indexLabel: "Wick 208"})
	    	chartCurrentArray.push({ y: wick208ResList[lastIndex], indexLabel: "Wick 208"})
		}
		if(!(filteredBuildings[10] == "Wick 480")){
			chartDatArray.push({type:"line",name:"Wick 480",showInLegend:true,dataPoints:wick480LineCopy2})
			chartAvgArray.push({ y: wick480Avg, indexLabel: "Wick 480"})
	    	chartCurrentArray.push({ y: wick480ResList[lastIndex], indexLabel: "Wick 480"})
		}
		if(!(filteredBuildings[11] == "Yost")){
			chartDatArray.push({type:"line",name:"Yost",showInLegend:true,dataPoints:yostLineCopy2})
			chartAvgArray.push({ y: yostAvg, indexLabel: "Yost"})
	    	chartCurrentArray.push({ y: yostResList[lastIndex], indexLabel: "Yost"})
		}
		if(!(filteredBuildings[12] == "Olin (Sum)")){
			chartDatArray.push({type:"line",name:"Olin (Sum)",showInLegend:true,dataPoints:olinSumLineCopy2})
			chartAvgArray.push({ y: olinSumAvg, indexLabel: "Olin (Sum)"})
	    	chartCurrentArray.push({ y: olinSumResList[lastIndex], indexLabel: "Olin (Sum)"})
		}
        if(!(filteredBuildings[13] == "Sears (Sum)")){
			chartDatArray.push({type:"line",name:"Sears (Sum)",showInLegend:true,dataPoints:searsSumLineCopy2})
			chartAvgArray.push({ y: searsSumAvg, indexLabel: "Sears (Sum)"})
	    	chartCurrentArray.push({ y: searsSumResList[lastIndex], indexLabel: "Sears (Sum)"})
		}
		if(!(filteredBuildings[14] == "Wick (Sum)")){
			chartDatArray.push({type:"line",name:"Wick (Sum)",showInLegend:true,dataPoints:wickSumLineCopy2})
			chartAvgArray.push({ y: wickSumAvg, indexLabel: "Wick (Sum)"})
	    	chartCurrentArray.push({ y: wickSumResList[lastIndex], indexLabel: "Wick (Sum)"})
		}
        
		//Redraw our charts so they display the proper, newly-filtered, data.
    	renderAllCharts();


    }
    
    
    //Changes the measurement types of the graph
    function measures() {
        
        if(seconds) {
            var mes = document.getElementById("mySelect2").value;
            
            if(mes == "avg" && average == false) {
                average = true;
                total = false;
                max = false;
            }
            else if(mes == "total" && total == false) {
                average = false;
                total = true;
                max = false;
            }
            else if(mes == "peak" && max == false) {
                average = false;
                total = false;
                max = true;
            }
        }
        
        else {
            var minD = new Date(minDateCopy);
            var maxD = new Date(maxDateCopy);
            
            var minMonth = minD.getMonth()+1;
            var minDay = minD.getDate();
            var minYear = minD.getFullYear();
            var minHrs = minD.getHours();
            var minMins;
            //Makes sure that there are two digits
            if(minD.getMinutes() < 10) {
                minMins = "0" + minD.getMinutes();
            }
            else {
                minMins = minD.getMinutes();
            }
            
            var maxMonth = maxD.getMonth()+1;
            var maxDay = maxD.getDate();
            var maxYear = maxD.getFullYear();
            var maxHrs = maxD.getHours();
            var maxMins;
            if(maxD.getMinutes() < 10) {
                maxMins = "0" + maxD.getMinutes();
            }
            else {
                maxMins = maxD.getMinutes();
            }
            
            
            //Converts the input so it matches the data being examined
            from3 = minMonth + "/" + minDay + "/" + minYear + " " + minHrs + ":" + minMins;
            to3 = maxMonth + "/" + maxDay + "/" + maxYear + " " + maxHrs + ":" + maxMins;
            
            
            //var y = document.getElementById("mySelect2").selectedIndex;
            
            //stores the value of the measurement type
            //var mes = document.getElementsByTagName("option")[y].value;
            var mes = document.getElementById("mySelect2").value;

            //All points are measured by average values
            if(mes == "avg" && average == false) {
                average = true;
                total = false;
                max = false;
                
                clearAllArrays();
                
                glennanLine2 = [];
                nordLine2 = [];
                olin480Line2 = [];
                olin208Line2 = [];
                rock480Line2 = [];
                sears480Line2 = [];
                sears208Line2 = [];
                tomlinsonLine2 = [];
                whiteLine2 = [];
                wick208Line2 = [];
                wick480Line2 = [];
                yostLine2 = [];
                olinSumLine2 = [];
                searsSumLine2 = [];
                wickSumLine2 = [];
                
                glennanLineCopy2 = [];
                nordLineCopy2 = [];
                olin480LineCopy2 = [];
                olin208LineCopy2 = [];
                rock480LineCopy2 = [];
                sears480LineCopy2 = [];
                sears208LineCopy2 = [];
                tomlinsonLineCopy2 = [];
                whiteLineCopy2 = [];
                wick208LineCopy2 = [];
                wick480LineCopy2 = [];
                yostLineCopy2 = [];
                olinSumLineCopy2 = [];
                searsSumLineCopy2 = [];
                wickSumLineCopy2 = [];
                
                glennanResList = [];
                nordResList = [];
                olin480ResList = [];
                olin208ResList = [];
                rock480ResList = [];
                sears480ResList = [];
                sears208ResList = [];
                tomlinsonResList = [];
                whiteResList = [];
                wick208ResList = [];
                wick480ResList = [];
                yostResList = [];
                olinSumResList = [];
                searsSumResList = [];
                wickSumResList = [];
                
                if(dateTimeArray.length == 1) {
                    glennanResList.push(glennanArray[0]);
                    nordResList.push(nordArray[0]);
                    olin480ResList.push(olin480Array[0]);
                    olin208ResList.push(olin208Array[0]);
                    rock480ResList.push(rock480Array[0]);
                    sears480ResList.push(sears480Array[0]);
                    sears208ResList.push(sears208Array[0]);
                    tomlinsonResList.push(tomlinsonArray[0]);
                    whiteResList.push(whiteArray[0]);
                    wick208ResList.push(wick208Array[0]);
                    wick480ResList.push(wick480Array[0]);
                    yostResList.push(yostArray[0]);
                    olinSumResList.push(olinSumArray[0]);
                    searsSumResList.push(searsSumArray[0]);
                    wickSumResList.push(wickSumArray[0]);
                }
                
                else {
                    
                    for(var r = dateTimeArray.indexOf(from3); r <= dateTimeArray.lastIndexOf(to3); r++){
                        
                        //Do this if it is the first in the array
                        if(r == dateTimeArray.indexOf(from3)) {
                            tempGlennanResList = [];
                            tempNordResList = [];
                            tempOlin208ResList = [];
                            tempOlin480ResList = [];
                            tempRock480ResList = [];
                            tempSears208ResList = [];
                            tempSears480ResList = [];
                            tempTomlinsonResList = [];
                            tempWhiteResList = [];
                            tempWick208ResList = [];
                            tempWick480ResList = [];
                            tempYostResList = [];
                            tempOlinSumResList = [];
                            tempSearsSumResList = [];
                            tempWickSumResList = [];
                            
                            tempGlennanResList.push(glennanArray[r]);
                            tempNordResList.push(nordArray[r]);
                            tempOlin480ResList.push(olin480Array[r]);
                            tempOlin208ResList.push(olin208Array[r]);
                            tempRock480ResList.push(rock480Array[r]);
                            tempSears480ResList.push(sears480Array[r]);
                            tempSears208ResList.push(sears208Array[r]);
                            tempTomlinsonResList.push(tomlinsonArray[r]);
                            tempWhiteResList.push(whiteArray[r]);
                            tempWick208ResList.push(wick208Array[r]);
                            tempWick480ResList.push(wick480Array[r]);
                            tempYostResList.push(yostArray[r]);
                            tempOlinSumResList.push(olinSumArray[r]);
                            tempSearsSumResList.push(searsSumArray[r]);
                            tempWickSumResList.push(wickSumArray[r]);
                        }
                        
                        else {
                            
                            var d2 = new Date(dateTimeArray[r]);
                            var d1 = new Date(dateTimeArray[r-1]);
                            
                            if((minutes && d2.getMinutes() == d1.getMinutes()) || (hours && d2.getHours() == d1.getHours())) {
                                tempGlennanResList.push(glennanArray[r]);
                                tempNordResList.push(nordArray[r]);
                                tempOlin480ResList.push(olin480Array[r]);
                                tempOlin208ResList.push(olin208Array[r]);
                                tempRock480ResList.push(rock480Array[r]);
                                tempSears480ResList.push(sears480Array[r]);
                                tempSears208ResList.push(sears208Array[r]);
                                tempTomlinsonResList.push(tomlinsonArray[r]);
                                tempWhiteResList.push(whiteArray[r]);
                                tempWick208ResList.push(wick208Array[r]);
                                tempWick480ResList.push(wick480Array[r]);
                                tempYostResList.push(yostArray[r]);
                                tempOlinSumResList.push(olinSumArray[r]);
                                tempSearsSumResList.push(searsSumArray[r]);
                                tempWickSumResList.push(wickSumArray[r]);
                            }
                               else {
                                   
                                   glennanResList.push(getAverage(tempGlennanResList));
                                   nordResList.push(getAverage(tempNordResList));
                                   olin480ResList.push(getAverage(tempOlin480ResList));
                                   olin208ResList.push(getAverage(tempOlin208ResList));
                                   rock480ResList.push(getAverage(tempRock480ResList));
                                   sears480ResList.push(getAverage(tempSears480ResList));
                                   sears208ResList.push(getAverage(tempSears208ResList));
                                   tomlinsonResList.push(getAverage(tempTomlinsonResList));
                                   whiteResList.push(getAverage(tempWhiteResList));
                                   wick208ResList.push(getAverage(tempWick208ResList));
                                   wick480ResList.push(getAverage(tempWick480ResList));
                                   yostResList.push(getAverage(tempYostResList));
                                   olinSumResList.push(getAverage(tempOlinSumResList));
                                   searsSumResList.push(getAverage(tempSearsSumResList));
                                   wickSumResList.push(getAverage(tempWickSumResList));
                                   
                                   tempGlennanResList = [];
                                   tempNordResList = [];
                                   tempOlin208ResList = [];
                                   tempOlin480ResList = [];
                                   tempRock480ResList = [];
                                   tempSears208ResList = [];
                                   tempSears480ResList = [];
                                   tempTomlinsonResList = [];
                                   tempWhiteResList = [];
                                   tempWick208ResList = [];
                                   tempWick480ResList = [];
                                   tempYostResList = [];
                                   tempOlinSumResList = [];
                                   tempSearsSumResList = [];
                                   tempWickSumResList = [];
                                   
                                   tempGlennanResList.push(glennanArray[r]);
                                   tempNordResList.push(nordArray[r]);
                                   tempOlin480ResList.push(olin480Array[r]);
                                   tempOlin208ResList.push(olin208Array[r]);
                                   tempRock480ResList.push(rock480Array[r]);
                                   tempSears480ResList.push(sears480Array[r]);
                                   tempSears208ResList.push(sears208Array[r]);
                                   tempTomlinsonResList.push(tomlinsonArray[r]);
                                   tempWhiteResList.push(whiteArray[r]);
                                   tempWick208ResList.push(wick208Array[r]);
                                   tempWick480ResList.push(wick480Array[r]);
                                   tempYostResList.push(yostArray[r]);
                                   tempOlinSumResList.push(olinSumArray[r]);
                                   tempSearsSumResList.push(searsSumArray[r]);
                                   tempWickSumResList.push(wickSumArray[r]);
                                   
                               }
                               
                               if(r == dateTimeArray.lastIndexOf(to3)) {
                                   glennanResList.push(getAverage(tempGlennanResList));
                                   nordResList.push(getAverage(tempNordResList));
                                   olin480ResList.push(getAverage(tempOlin480ResList));
                                   olin208ResList.push(getAverage(tempOlin208ResList));
                                   rock480ResList.push(getAverage(tempRock480ResList));
                                   sears480ResList.push(getAverage(tempSears480ResList));
                                   sears208ResList.push(getAverage(tempSears208ResList));
                                   tomlinsonResList.push(getAverage(tempTomlinsonResList));
                                   whiteResList.push(getAverage(tempWhiteResList));
                                   wick208ResList.push(getAverage(tempWick208ResList));
                                   wick480ResList.push(getAverage(tempWick480ResList));
                                   yostResList.push(getAverage(tempYostResList));
                                   olinSumResList.push(getAverage(tempOlinSumResList));
                                   searsSumResList.push(getAverage(tempSearsSumResList));
                                   wickSumResList.push(getAverage(tempWickSumResList));
                                   
                                   tempGlennanResList = [];
                                   tempNordResList = [];
                                   tempOlin208ResList = [];
                                   tempOlin480ResList = [];
                                   tempRock480ResList = [];
                                   tempSears208ResList = [];
                                   tempSears480ResList = [];
                                   tempTomlinsonResList = [];
                                   tempWhiteResList = [];
                                   tempWick208ResList = [];
                                   tempWick480ResList = [];
                                   tempYostResList = [];
                                   tempOlinSumResList = [];
                                   tempSearsSumResList = [];
                                   tempWickSumResList = [];
                               }
                        }
                    }
                    
                }
                
                
                
                //Afterwards, put the new info in the copy2 array.
                for(var z = 0; z < resDTArray.length; z++) {
                    glennanLine2.push({x: z, y: glennanResList[z], label: resDTArray[z]})
                    nordLine2.push({x: z, y: nordResList[z], label: resDTArray[z]})
                    olin480Line2.push({x: z, y: olin480ResList[z], label: resDTArray[z]})
                    olin208Line2.push({x: z, y: olin208ResList[z], label: resDTArray[z]})
                    rock480Line2.push({x: z, y: rock480ResList[z], label: resDTArray[z]})
                    sears480Line2.push({x: z, y: sears480ResList[z], label: resDTArray[z]})
                    sears208Line2.push({x: z, y: sears208ResList[z], label: resDTArray[z]})
                    tomlinsonLine2.push({x: z, y: tomlinsonResList[z], label: resDTArray[z]})
                    whiteLine2.push({x: z, y: whiteResList[z], label: resDTArray[z]})
                    wick208Line2.push({x: z, y: wick208ResList[z], label: resDTArray[z]})
                    wick480Line2.push({x: z, y: wick480ResList[z], label: resDTArray[z]})
                    yostLine2.push({x: z, y: yostResList[z], label: resDTArray[z]})
                    olinSumLine2.push({x: z, y: olinSumResList[z], label: resDTArray[z]})
                    searsSumLine2.push({x: z, y: searsSumResList[z], label: resDTArray[z]})
                    wickSumLine2.push({x: z, y: wickSumResList[z], label: resDTArray[z]})
                    
                    glennanLineCopy2 = glennanLine2;
                    nordLineCopy2 = nordLine2;
                    olin480LineCopy2 = olin480Line2;
                    olin208LineCopy2 = olin208Line2;
                    rock480LineCopy2 = rock480Line2;
                    sears480LineCopy2 = sears480Line2;
                    sears208LineCopy2 = sears208Line2;
                    tomlinsonLineCopy2 = tomlinsonLine2;
                    whiteLineCopy2 = whiteLine2;
                    wick208LineCopy2 = wick208Line2;
                    wick480LineCopy2 = wick480Line2;
                    yostLineCopy2 = yostLine2;
                    olinSumLineCopy2 = olinSumLine2;
                    searsSumLineCopy2 = searsSumLine2;
                    wickSumLineCopy2 = wickSumLine2;
                }
                
                glennanAvgTotalsList = glennanResTotalsList;
                nordAvgTotalsList = nordResTotalsList;
                olin480AvgTotalsList = olin480ResTotalsList;
                olin208AvgTotalsList = olin208ResTotalsList;
                rock480AvgTotalsList = rock480ResTotalsList;
                sears480AvgTotalsList = sears480ResTotalsList;
                sears208AvgTotalsList = sears208ResTotalsList;
                tomlinsonAvgTotalsList = tomlinsonResTotalsList;
                whiteAvgTotalsList = whiteResTotalsList;
                wick208AvgTotalsList = wick208ResTotalsList;
                wick480AvgTotalsList = wick480ResTotalsList;
                yostAvgTotalsList = yostResTotalsList;
                olinSumAvgTotalsList = olinSumResTotalsList;
                searsSumAvgTotalsList = searsSumResTotalsList;
                wickSumAvgTotalsList = wickSumResTotalsList;
                
                
                 
                //Updating Averages
                glennanAvg = getAverage(glennanArray)
                nordAvg = getAverage(nordArray)
                olin480Avg = getAverage(olin480Array)
                olin208Avg = getAverage(olin208Array)
                rock480Avg = getAverage(rock480Array)
                sears480Avg = getAverage(sears480Array)
                sears208Avg = getAverage(sears208Array)
                tomlinsonAvg = getAverage(tomlinsonArray)
                whiteAvg = getAverage(whiteArray)
                wick208Avg = getAverage(wick208Array)
                wick480Avg = getAverage(wick480Array)
                yostAvg = getAverage(yostArray)
                olinSumAvg = getAverage(olinSumArray)
                searsSumAvg = getAverage(searsSumArray)
                wickSumAvg = getAverage(wickSumArray)
                
                glennanLine2Copy = [];
                nordLine2Copy = [];
                olin480Line2Copy = [];
                olin208Line2Copy = [];
                rock480Line2Copy = [];
                sears480Line2Copy = [];
                sears208Line2Copy = [];
                tomlinsonLine2Copy = [];
                whiteLine2Copy = [];
                wick208Line2Copy = [];
                wick480Line2Copy = [];
                yostLine2Copy = [];
                olinSumLine2Copy = [];
                searsSumLine2Copy = [];
                wickSumLine2Copy = [];
                
                for(var j = 0; j < dateTimeArrayCopy.length; j++) {
                    glennanLine2Copy.push({x: j, y: glennanAvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    nordLine2Copy.push({x: j, y: nordAvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin480Line2Copy.push({x: j, y: olin480AvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin208Line2Copy.push({x: j, y: olin208AvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    rock480Line2Copy.push({x: j, y: rock480AvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears480Line2Copy.push({x: j, y: sears480AvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears208Line2Copy.push({x: j, y: sears208AvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    tomlinsonLine2Copy.push({x: j, y: tomlinsonAvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    whiteLine2Copy.push({x: j, y: whiteAvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick208Line2Copy.push({x: j, y: wick208AvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick480Line2Copy.push({x: j, y: wick480AvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    yostLine2Copy.push({x: j, y: yostAvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    olinSumLine2Copy.push({x: j, y: olinSumAvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    searsSumLine2Copy.push({x: j, y: searsSumAvgTotalsList[j], label: dateTimeArrayCopy[j]})
                    wickSumLine2Copy.push({x: j, y: wickSumAvgTotalsList[j], label: dateTimeArrayCopy[j]})
                }
                
                var lastIndex = resDTArray.length - 1;
                
                tempGlennanResList = [];
                tempNordResList = [];
                tempOlin208ResList = [];
                tempOlin480ResList = [];
                tempRock480ResList = [];
                tempSears208ResList = [];
                tempSears480ResList = [];
                tempTomlinsonResList = [];
                tempWhiteResList = [];
                tempWick208ResList = [];
                tempWick480ResList = [];
                tempYostResList = [];
                tempOlinSumResList = [];
                tempSearsSumResList = [];
                tempWickSumResList = [];
                //Get new reslist for avg
                if(!(filteredBuildings[0] == "Glennan")){
                    chartDatArray.push({type:"line",name:"Glennan",showInLegend:true,dataPoints:glennanLineCopy2})
                    chartCurrentArray.push({ y: glennanAvgTotalsList[lastIndex], indexLabel: "Glennan"})
                }
                if(!(filteredBuildings[1] == "Nord")){
                    chartDatArray.push({type:"line",name:"Nord",showInLegend:true,dataPoints:nordLineCopy2})
                    chartCurrentArray.push({ y: nordAvgTotalsList[lastIndex], indexLabel: "Nord"})
                }
                if(!(filteredBuildings[2] == "Olin 480")){
                    chartDatArray.push({type:"line",name:"Olin 480",showInLegend:true,dataPoints:olin480LineCopy2})
                    chartCurrentArray.push({ y: olin480AvgTotalsList[lastIndex], indexLabel: "Olin 480"})
                }
                if(!(filteredBuildings[3] == "Olin 208")){
                    chartDatArray.push({type:"line",name:"Olin 208",showInLegend:true,dataPoints:olin208LineCopy2})
                    chartCurrentArray.push({ y: olin208AvgTotalsList[lastIndex], indexLabel: "Olin 208"})
                }
                if(!(filteredBuildings[4] == "Rock 480")){
                    chartDatArray.push({type:"line",name:"Rock 480",showInLegend:true,dataPoints:rock480LineCopy2})
                    chartCurrentArray.push({ y: rock480AvgTotalsList[lastIndex], indexLabel: "Rock 480"})
                }
                if(!(filteredBuildings[5] == "Sears 480")){
                    chartDatArray.push({type:"line",name:"Sears 480",showInLegend:true,dataPoints:sears480LineCopy2})
                    chartCurrentArray.push({ y: sears480AvgTotalsList[lastIndex], indexLabel: "Sears 480"})
                }
                if(!(filteredBuildings[6] == "Sears 208")){
                    chartDatArray.push({type:"line",name:"Sears 208",showInLegend:true,dataPoints:sears208LineCopy2})
                    chartCurrentArray.push({ y: sears208AvgTotalsList[lastIndex], indexLabel: "Sears 208"})
                }
                if(!(filteredBuildings[7] == "Tomlinson")){
                    chartDatArray.push({type:"line",name:"Tomlinson",showInLegend:true,dataPoints:tomlinsonLineCopy2})
                    chartCurrentArray.push({ y: tomlinsonAvgTotalsList[lastIndex], indexLabel: "Tomlinson"})
                }
                if(!(filteredBuildings[8] == "White")){
                    chartDatArray.push({type:"line",name:"White",showInLegend:true,dataPoints:whiteLineCopy2})
                    chartCurrentArray.push({ y: whiteAvgTotalsList[lastIndex], indexLabel: "White"})
                }
                if(!(filteredBuildings[9] == "Wick 208")){
                    chartDatArray.push({type:"line",name:"Wick 208",showInLegend:true,dataPoints:wick208LineCopy2})
                    chartCurrentArray.push({ y: wick208AvgTotalsList[lastIndex], indexLabel: "Wick 208"})
                }
                if(!(filteredBuildings[10] == "Wick 480")){
                    chartDatArray.push({type:"line",name:"Wick 480",showInLegend:true,dataPoints:wick480LineCopy2})
                    chartCurrentArray.push({ y: wick480AvgTotalsList[lastIndex], indexLabel: "Wick 480"})
                }
                if(!(filteredBuildings[11] == "Yost")){
                    chartDatArray.push({type:"line",name:"Yost",showInLegend:true,dataPoints:yostLineCopy2})
                    chartCurrentArray.push({ y: yostAvgTotalsList[lastIndex], indexLabel: "Yost"})
                }
                if(!(filteredBuildings[12] == "Olin (Sum)")){
                    chartDatArray.push({type:"line",name:"Olin (Sum)",showInLegend:true,dataPoints:olinSumLineCopy2})
                    chartCurrentArray.push({ y: olinSumAvgTotalsList[lastIndex], indexLabel: "Olin (Sum)"})
                }
                if(!(filteredBuildings[13] == "Sears (Sum)")){
                    chartDatArray.push({type:"line",name:"Sears (Sum)",showInLegend:true,dataPoints:searsSumLineCopy2})
                    chartCurrentArray.push({ y: searsSumAvgTotalsList[lastIndex], indexLabel: "Sears (Sum)"})
                }
                if(!(filteredBuildings[14] == "Wick (Sum)")){
                    chartDatArray.push({type:"line",name:"Wick (Sum)",showInLegend:true,dataPoints:wickSumLineCopy2})
                    chartCurrentArray.push({ y: wickSumAvgTotalsList[lastIndex], indexLabel: "Wick (Sum)"})
                }
                
                //Redraw our charts so they display the proper, newly-filtered, data.
                renderAllCharts();


            }
            
            //All points are measured by sum values
            else if(mes == "total" && total == false) {
                average = false;
                total = true;
                max = false;
                
                clearAllArrays();
                
                glennanLine2 = [];
                nordLine2 = [];
                olin480Line2 = [];
                olin208Line2 = [];
                rock480Line2 = [];
                sears480Line2 = [];
                sears208Line2 = [];
                tomlinsonLine2 = [];
                whiteLine2 = [];
                wick208Line2 = [];
                wick480Line2 = [];
                yostLine2 = [];
                olinSumLine2 = [];
                searsSumLine2 = [];
                wickSumLine2 = [];
                
                glennanLineCopy2 = [];
                nordLineCopy2 = [];
                olin480LineCopy2 = [];
                olin208LineCopy2 = [];
                rock480LineCopy2 = [];
                sears480LineCopy2 = [];
                sears208LineCopy2 = [];
                tomlinsonLineCopy2 = [];
                whiteLineCopy2 = [];
                wick208LineCopy2 = [];
                wick480LineCopy2 = [];
                yostLineCopy2 = [];
                olinSumLineCopy2 = [];
                searsSumLineCopy2 = [];
                wickSumLineCopy2 = [];
                
                glennanResList = [];
                nordResList = [];
                olin480ResList = [];
                olin208ResList = [];
                rock480ResList = [];
                sears480ResList = [];
                sears208ResList = [];
                tomlinsonResList = [];
                whiteResList = [];
                wick208ResList = [];
                wick480ResList = [];
                yostResList = [];
                olinSumResList = [];
                searsSumResList = [];
                wickSumResList = [];
                
                if(dateTimeArray.length == 1) {
                    glennanResList.push(glennanArray[0]);
                    nordResList.push(nordArray[0]);
                    olin480ResList.push(olin480Array[0]);
                    olin208ResList.push(olin208Array[0]);
                    rock480ResList.push(rock480Array[0]);
                    sears480ResList.push(sears480Array[0]);
                    sears208ResList.push(sears208Array[0]);
                    tomlinsonResList.push(tomlinsonArray[0]);
                    whiteResList.push(whiteArray[0]);
                    wick208ResList.push(wick208Array[0]);
                    wick480ResList.push(wick480Array[0]);
                    yostResList.push(yostArray[0]);
                    olinSumResList.push(olinSumArray[0]);
                    searsSumResList.push(searsSumArray[0]);
                    wickSumResList.push(wickSumArray[0]);
                }
                
                else {
                    
                    for(var r = dateTimeArray.indexOf(from3); r <= dateTimeArray.lastIndexOf(to3); r++){
                        
                        //Do this if it is the first in the array
                        if(r == dateTimeArray.indexOf(from3)) {
                            tempGlennanResList = [];
                            tempNordResList = [];
                            tempOlin208ResList = [];
                            tempOlin480ResList = [];
                            tempRock480ResList = [];
                            tempSears208ResList = [];
                            tempSears480ResList = [];
                            tempTomlinsonResList = [];
                            tempWhiteResList = [];
                            tempWick208ResList = [];
                            tempWick480ResList = [];
                            tempYostResList = [];
                            tempOlinSumResList = [];
                            tempSearsSumResList = [];
                            tempWickSumResList = [];
                            
                            tempGlennanResList.push(glennanArray[r]);
                            tempNordResList.push(nordArray[r]);
                            tempOlin480ResList.push(olin480Array[r]);
                            tempOlin208ResList.push(olin208Array[r]);
                            tempRock480ResList.push(rock480Array[r]);
                            tempSears480ResList.push(sears480Array[r]);
                            tempSears208ResList.push(sears208Array[r]);
                            tempTomlinsonResList.push(tomlinsonArray[r]);
                            tempWhiteResList.push(whiteArray[r]);
                            tempWick208ResList.push(wick208Array[r]);
                            tempWick480ResList.push(wick480Array[r]);
                            tempYostResList.push(yostArray[r]);
                            tempOlinSumResList.push(olinSumArray[r]);
                            tempSearsSumResList.push(searsSumArray[r]);
                            tempWickSumResList.push(wickSumArray[r]);
                        }
                        
                        else {
                            
                            var d2 = new Date(dateTimeArray[r]);
                            var d1 = new Date(dateTimeArray[r-1]);
                            
                            if((minutes && d2.getMinutes() == d1.getMinutes()) || (hours && d2.getHours() == d1.getHours())) {
                                tempGlennanResList.push(glennanArray[r]);
                                tempNordResList.push(nordArray[r]);
                                tempOlin480ResList.push(olin480Array[r]);
                                tempOlin208ResList.push(olin208Array[r]);
                                tempRock480ResList.push(rock480Array[r]);
                                tempSears480ResList.push(sears480Array[r]);
                                tempSears208ResList.push(sears208Array[r]);
                                tempTomlinsonResList.push(tomlinsonArray[r]);
                                tempWhiteResList.push(whiteArray[r]);
                                tempWick208ResList.push(wick208Array[r]);
                                tempWick480ResList.push(wick480Array[r]);
                                tempYostResList.push(yostArray[r]);
                                tempOlinSumResList.push(olinSumArray[r]);
                                tempSearsSumResList.push(searsSumArray[r]);
                                tempWickSumResList.push(wickSumArray[r]);
                            }
                            else {
                                glennanResList.push(getTotal(tempGlennanResList));
                                nordResList.push(getTotal(tempNordResList));
                                olin480ResList.push(getTotal(tempOlin480ResList));
                                olin208ResList.push(getTotal(tempOlin208ResList));
                                rock480ResList.push(getTotal(tempRock480ResList));
                                sears480ResList.push(getTotal(tempSears480ResList));
                                sears208ResList.push(getTotal(tempSears208ResList));
                                tomlinsonResList.push(getTotal(tempTomlinsonResList));
                                whiteResList.push(getTotal(tempWhiteResList));
                                wick208ResList.push(getTotal(tempWick208ResList));
                                wick480ResList.push(getTotal(tempWick480ResList));
                                yostResList.push(getTotal(tempYostResList));
                                olinSumResList.push(getTotal(tempOlinSumResList));
                                searsSumResList.push(getTotal(tempSearsSumResList));
                                wickSumResList.push(getTotal(tempWickSumResList));
                                
                                tempGlennanResList = [];
                                tempNordResList = [];
                                tempOlin208ResList = [];
                                tempOlin480ResList = [];
                                tempRock480ResList = [];
                                tempSears208ResList = [];
                                tempSears480ResList = [];
                                tempTomlinsonResList = [];
                                tempWhiteResList = [];
                                tempWick208ResList = [];
                                tempWick480ResList = [];
                                tempYostResList = [];
                                tempOlinSumResList = [];
                                tempSearsSumResList = [];
                                tempWickSumResList = [];
                                
                                tempGlennanResList.push(glennanArray[r]);
                                tempNordResList.push(nordArray[r]);
                                tempOlin480ResList.push(olin480Array[r]);
                                tempOlin208ResList.push(olin208Array[r]);
                                tempRock480ResList.push(rock480Array[r]);
                                tempSears480ResList.push(sears480Array[r]);
                                tempSears208ResList.push(sears208Array[r]);
                                tempTomlinsonResList.push(tomlinsonArray[r]);
                                tempWhiteResList.push(whiteArray[r]);
                                tempWick208ResList.push(wick208Array[r]);
                                tempWick480ResList.push(wick480Array[r]);
                                tempYostResList.push(yostArray[r]);
                                tempOlinSumResList.push(olinSumArray[r]);
                                tempSearsSumResList.push(searsSumArray[r]);
                                tempWickSumResList.push(wickSumArray[r]);
                                
                            }
                            
                            if(r == dateTimeArray.lastIndexOf(to3)) {
                                glennanResList.push(getTotal(tempGlennanResList));
                                nordResList.push(getTotal(tempNordResList));
                                olin480ResList.push(getTotal(tempOlin480ResList));
                                olin208ResList.push(getTotal(tempOlin208ResList));
                                rock480ResList.push(getTotal(tempRock480ResList));
                                sears480ResList.push(getTotal(tempSears480ResList));
                                sears208ResList.push(getTotal(tempSears208ResList));
                                tomlinsonResList.push(getTotal(tempTomlinsonResList));
                                whiteResList.push(getTotal(tempWhiteResList));
                                wick208ResList.push(getTotal(tempWick208ResList));
                                wick480ResList.push(getTotal(tempWick480ResList));
                                yostResList.push(getTotal(tempYostResList));
                                olinSumResList.push(getTotal(tempOlinSumResList));
                                searsSumResList.push(getTotal(tempSearsSumResList));
                                wickSumResList.push(getTotal(tempWickSumResList));
                                
                                tempGlennanResList = [];
                                tempNordResList = [];
                                tempOlin208ResList = [];
                                tempOlin480ResList = [];
                                tempRock480ResList = [];
                                tempSears208ResList = [];
                                tempSears480ResList = [];
                                tempTomlinsonResList = [];
                                tempWhiteResList = [];
                                tempWick208ResList = [];
                                tempWick480ResList = [];
                                tempYostResList = [];
                                tempOlinSumResList = [];
                                tempSearsSumResList = [];
                                tempWickSumResList = [];
                            }
                            
                        }
                        
                        
                    }
                    
                }
                
                
                
                //Afterwards, put the new info in the copy2 array.
                for(var z = 0; z < resDTArray.length; z++) {
                    glennanLine2.push({x: z, y: glennanResList[z], label: resDTArray[z]})
                    nordLine2.push({x: z, y: nordResList[z], label: resDTArray[z]})
                    olin480Line2.push({x: z, y: olin480ResList[z], label: resDTArray[z]})
                    olin208Line2.push({x: z, y: olin208ResList[z], label: resDTArray[z]})
                    rock480Line2.push({x: z, y: rock480ResList[z], label: resDTArray[z]})
                    sears480Line2.push({x: z, y: sears480ResList[z], label: resDTArray[z]})
                    sears208Line2.push({x: z, y: sears208ResList[z], label: resDTArray[z]})
                    tomlinsonLine2.push({x: z, y: tomlinsonResList[z], label: resDTArray[z]})
                    whiteLine2.push({x: z, y: whiteResList[z], label: resDTArray[z]})
                    wick208Line2.push({x: z, y: wick208ResList[z], label: resDTArray[z]})
                    wick480Line2.push({x: z, y: wick480ResList[z], label: resDTArray[z]})
                    yostLine2.push({x: z, y: yostResList[z], label: resDTArray[z]})
                    olinSumLine2.push({x: z, y: olinSumResList[z], label: resDTArray[z]})
                    searsSumLine2.push({x: z, y: searsSumResList[z], label: resDTArray[z]})
                    wickSumLine2.push({x: z, y: wickSumResList[z], label: resDTArray[z]})
                    
                    glennanLineCopy2 = glennanLine2;
                    nordLineCopy2 = nordLine2;
                    olin480LineCopy2 = olin480Line2;
                    olin208LineCopy2 = olin208Line2;
                    rock480LineCopy2 = rock480Line2;
                    sears480LineCopy2 = sears480Line2;
                    sears208LineCopy2 = sears208Line2;
                    tomlinsonLineCopy2 = tomlinsonLine2;
                    whiteLineCopy2 = whiteLine2;
                    wick208LineCopy2 = wick208Line2;
                    wick480LineCopy2 = wick480Line2;
                    yostLineCopy2 = yostLine2;
                    olinSumLineCopy2 = olinSumLine2;
                    searsSumLineCopy2 = searsSumLine2;
                    wickSumLineCopy2 = wickSumLine2;
                }
                
                glennanSumTotalsList = [];
                nordSumTotalsList = [];
                olin480SumTotalsList = [];
                olin208SumTotalsList = [];
                rock480SumTotalsList = [];
                sears480SumTotalsList = [];
                sears208SumTotalsList = [];
                tomlinsonSumTotalsList = [];
                whiteSumTotalsList = [];
                wick208SumTotalsList = [];
                wick480SumTotalsList = [];
                yostSumTotalsList = [];
                olinSumSumTotalsList = [];
                searsSumSumTotalsList = [];
                wickSumSumTotalsList = [];
                
                for(var s = 0; s < dateTimeArray.length; s++) {
                    if(s == 0) {
                        tempGlennanResList = [];
                        tempNordResList = [];
                        tempOlin208ResList = [];
                        tempOlin480ResList = [];
                        tempRock480ResList = [];
                        tempSears208ResList = [];
                        tempSears480ResList = [];
                        tempTomlinsonResList = [];
                        tempWhiteResList = [];
                        tempWick208ResList = [];
                        tempWick480ResList = [];
                        tempYostResList = [];
                        tempOlinSumResList = [];
                        tempSearsSumResList = [];
                        tempWickSumResList = [];
                        
                        tempGlennanResList.push(glennanArray[s]);
                        tempNordResList.push(nordArray[s]);
                        tempOlin480ResList.push(olin480Array[s]);
                        tempOlin208ResList.push(olin208Array[s]);
                        tempRock480ResList.push(rock480Array[s]);
                        tempSears480ResList.push(sears480Array[s]);
                        tempSears208ResList.push(sears208Array[s]);
                        tempTomlinsonResList.push(tomlinsonArray[s]);
                        tempWhiteResList.push(whiteArray[s]);
                        tempWick208ResList.push(wick208Array[s]);
                        tempWick480ResList.push(wick480Array[s]);
                        tempYostResList.push(yostArray[s]);
                        tempOlinSumResList.push(olinSumArray[s]);
                        tempSearsSumResList.push(searsSumArray[s]);
                        tempWickSumResList.push(wickSumArray[s]);
                    }
                    else {
                        var d2 = new Date(dateTimeArray[s]);
                        var d1 = new Date(dateTimeArray[s-1]);
                        if((minutes && d2.getMinutes() == d1.getMinutes()) || (hours && d2.getHours() == d1.getHours())) {
                            
                            tempGlennanResList.push(glennanArray[s]);
                            tempNordResList.push(nordArray[s]);
                            tempOlin480ResList.push(olin480Array[s]);
                            tempOlin208ResList.push(olin208Array[s]);
                            tempRock480ResList.push(rock480Array[s]);
                            tempSears480ResList.push(sears480Array[s]);
                            tempSears208ResList.push(sears208Array[s]);
                            tempTomlinsonResList.push(tomlinsonArray[s]);
                            tempWhiteResList.push(whiteArray[s]);
                            tempWick208ResList.push(wick208Array[s]);
                            tempWick480ResList.push(wick480Array[s]);
                            tempYostResList.push(yostArray[s]);
                            tempOlinSumResList.push(olinSumArray[s]);
                            tempSearsSumResList.push(searsSumArray[s]);
                            tempWickSumResList.push(wickSumArray[s]);
                            
                            
                        }
                           
                        else {
                            
                            glennanSumTotalsList.push(getTotal(tempGlennanResList));
                            nordSumTotalsList.push(getTotal(tempNordResList));
                            olin480SumTotalsList.push(getTotal(tempOlin480ResList));
                            olin208SumTotalsList.push(getTotal(tempOlin208ResList));
                            rock480SumTotalsList.push(getTotal(tempRock480ResList));
                            sears480SumTotalsList.push(getTotal(tempSears480ResList));
                            sears208SumTotalsList.push(getTotal(tempSears208ResList));
                            tomlinsonSumTotalsList.push(getTotal(tempTomlinsonResList));
                            whiteSumTotalsList.push(getTotal(tempWhiteResList));
                            wick208SumTotalsList.push(getTotal(tempWick208ResList));
                            wick480SumTotalsList.push(getTotal(tempWick480ResList));
                            yostSumTotalsList.push(getTotal(tempYostResList));
                            olinSumSumTotalsList.push(getTotal(tempOlinSumResList));
                            searsSumSumTotalsList.push(getTotal(tempSearsSumResList));
                            wickSumSumTotalsList.push(getTotal(tempWickSumResList));
                            
                            tempGlennanResList = [];
                            tempNordResList = [];
                            tempOlin208ResList = [];
                            tempOlin480ResList = [];
                            tempRock480ResList = [];
                            tempSears208ResList = [];
                            tempSears480ResList = [];
                            tempTomlinsonResList = [];
                            tempWhiteResList = [];
                            tempWick208ResList = [];
                            tempWick480ResList = [];
                            tempYostResList = [];
                            tempOlinSumResList = [];
                            tempSearsSumResList = [];
                            tempWickSumResList = [];
                            
                            tempGlennanResList.push(glennanArray[s]);
                            tempNordResList.push(nordArray[s]);
                            tempOlin480ResList.push(olin480Array[s]);
                            tempOlin208ResList.push(olin208Array[s]);
                            tempRock480ResList.push(rock480Array[s]);
                            tempSears480ResList.push(sears480Array[s]);
                            tempSears208ResList.push(sears208Array[s]);
                            tempTomlinsonResList.push(tomlinsonArray[s]);
                            tempWhiteResList.push(whiteArray[s]);
                            tempWick208ResList.push(wick208Array[s]);
                            tempWick480ResList.push(wick480Array[s]);
                            tempYostResList.push(yostArray[s]);
                            tempOlinSumResList.push(olinSumArray[s]);
                            tempSearsSumResList.push(searsSumArray[s]);
                            tempWickSumResList.push(wickSumArray[s]);
                        }
                        
                        if(s == dateTimeArray.length - 1) {
                            glennanSumTotalsList.push(getTotal(tempGlennanResList));
                            nordSumTotalsList.push(getTotal(tempNordResList));
                            olin480SumTotalsList.push(getTotal(tempOlin480ResList));
                            olin208SumTotalsList.push(getTotal(tempOlin208ResList));
                            rock480SumTotalsList.push(getTotal(tempRock480ResList));
                            sears480SumTotalsList.push(getTotal(tempSears480ResList));
                            sears208SumTotalsList.push(getTotal(tempSears208ResList));
                            tomlinsonSumTotalsList.push(getTotal(tempTomlinsonResList));
                            whiteSumTotalsList.push(getTotal(tempWhiteResList));
                            wick208SumTotalsList.push(getTotal(tempWick208ResList));
                            wick480SumTotalsList.push(getTotal(tempWick480ResList));
                            yostSumTotalsList.push(getTotal(tempYostResList));
                            olinSumSumTotalsList.push(getTotal(tempOlinSumResList));
                            searsSumSumTotalsList.push(getTotal(tempSearsSumResList));
                            wickSumSumTotalsList.push(getTotal(tempWickSumResList));
                            
                            tempGlennanResList = [];
                            tempNordResList = [];
                            tempOlin208ResList = [];
                            tempOlin480ResList = [];
                            tempRock480ResList = [];
                            tempSears208ResList = [];
                            tempSears480ResList = [];
                            tempTomlinsonResList = [];
                            tempWhiteResList = [];
                            tempWick208ResList = [];
                            tempWick480ResList = [];
                            tempYostResList = [];
                            tempOlinSumResList = [];
                            tempSearsSumResList = [];
                            tempWickSumResList = [];
                        }
                    }
                }
                
                //Updating Totals
                glennanTotal = getTotal(glennanSumTotalsList)
                nordTotal = getTotal(nordSumTotalsList)
                olin480Total = getTotal(olin480SumTotalsList)
                olin208Total = getTotal(olin208SumTotalsList)
                rock480Total = getTotal(rock480SumTotalsList)
                sears480Total = getTotal(sears480SumTotalsList)
                sears208Total = getTotal(sears208SumTotalsList)
                tomlinsonTotal = getTotal(tomlinsonSumTotalsList)
                whiteTotal = getTotal(whiteSumTotalsList)
                wick208Total = getTotal(wick208SumTotalsList)
                wick480Total = getTotal(wick480SumTotalsList)
                yostTotal = getTotal(yostSumTotalsList)
                olinSumTotal = getTotal(olinSumSumTotalsList)
                searsSumTotal = getTotal(searsSumSumTotalsList)
                wickSumTotal = getTotal(wickSumSumTotalsList)
                
                glennanLine2Copy = [];
                nordLine2Copy = [];
                olin480Line2Copy = [];
                olin208Line2Copy = [];
                rock480Line2Copy = [];
                sears480Line2Copy = [];
                sears208Line2Copy = [];
                tomlinsonLine2Copy = [];
                whiteLine2Copy = [];
                wick208Line2Copy = [];
                wick480Line2Copy = [];
                yostLine2Copy = [];
                olinSumLine2Copy = [];
                searsSumLine2Copy = [];
                wickSumLine2Copy = [];
                
                for(var j = 0; j < dateTimeArrayCopy.length; j++) {
                    glennanLine2Copy.push({x: j, y: glennanSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    nordLine2Copy.push({x: j, y: nordSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin480Line2Copy.push({x: j, y: olin480SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin208Line2Copy.push({x: j, y: olin208SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    rock480Line2Copy.push({x: j, y: rock480SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears480Line2Copy.push({x: j, y: sears480SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears208Line2Copy.push({x: j, y: sears208SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    tomlinsonLine2Copy.push({x: j, y: tomlinsonSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    whiteLine2Copy.push({x: j, y: whiteSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick208Line2Copy.push({x: j, y: wick208SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick480Line2Copy.push({x: j, y: wick480SumTotalsList[j], label: dateTimeArrayCopy[j]})
                    yostLine2Copy.push({x: j, y: yostSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    olinSumLine2Copy.push({x: j, y: olinSumSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    searsSumLine2Copy.push({x: j, y: searsSumSumTotalsList[j], label: dateTimeArrayCopy[j]})
                    wickSumLine2Copy.push({x: j, y: wickSumSumTotalsList[j], label: dateTimeArrayCopy[j]})
                }
                
                var lastIndex = resDTArray.length - 1;
                
                tempGlennanResList = [];
                tempNordResList = [];
                tempOlin208ResList = [];
                tempOlin480ResList = [];
                tempRock480ResList = [];
                tempSears208ResList = [];
                tempSears480ResList = [];
                tempTomlinsonResList = [];
                tempWhiteResList = [];
                tempWick208ResList = [];
                tempWick480ResList = [];
                tempYostResList = [];
                tempOlinSumResList = [];
                tempSearsSumResList = [];
                tempWickSumResList = [];                
                //Get new reslist for avg
                if(!(filteredBuildings[0] == "Glennan")){
                    chartDatArray.push({type:"line",name:"Glennan",showInLegend:true,dataPoints:glennanLineCopy2})
                    chartCurrentArray.push({ y: glennanSumTotalsList[lastIndex], indexLabel: "Glennan"})
                }
                if(!(filteredBuildings[1] == "Nord")){
                    chartDatArray.push({type:"line",name:"Nord",showInLegend:true,dataPoints:nordLineCopy2})
                    chartCurrentArray.push({ y: nordSumTotalsList[lastIndex], indexLabel: "Nord"})
                }
                if(!(filteredBuildings[2] == "Olin 480")){
                    chartDatArray.push({type:"line",name:"Olin 480",showInLegend:true,dataPoints:olin480LineCopy2})
                    chartCurrentArray.push({ y: olin480SumTotalsList[lastIndex], indexLabel: "Olin 480"})
                }
                if(!(filteredBuildings[3] == "Olin 208")){
                    chartDatArray.push({type:"line",name:"Olin 208",showInLegend:true,dataPoints:olin208LineCopy2})
                    chartCurrentArray.push({ y: olin208SumTotalsList[lastIndex], indexLabel: "Olin 208"})
                }
                if(!(filteredBuildings[4] == "Rock 480")){
                    chartDatArray.push({type:"line",name:"Rock 480",showInLegend:true,dataPoints:rock480LineCopy2})
                    chartCurrentArray.push({ y: rock480SumTotalsList[lastIndex], indexLabel: "Rock 480"})
                }
                if(!(filteredBuildings[5] == "Sears 480")){
                    chartDatArray.push({type:"line",name:"Sears 480",showInLegend:true,dataPoints:sears480LineCopy2})
                    chartCurrentArray.push({ y: sears480SumTotalsList[lastIndex], indexLabel: "Sears 480"})
                }
                if(!(filteredBuildings[6] == "Sears 208")){
                    chartDatArray.push({type:"line",name:"Sears 208",showInLegend:true,dataPoints:sears208LineCopy2})
                    chartCurrentArray.push({ y: sears208SumTotalsList[lastIndex], indexLabel: "Sears 208"})
                }
                if(!(filteredBuildings[7] == "Tomlinson")){
                    chartDatArray.push({type:"line",name:"Tomlinson",showInLegend:true,dataPoints:tomlinsonLineCopy2})
                    chartCurrentArray.push({ y: tomlinsonSumTotalsList[lastIndex], indexLabel: "Tomlinson"})
                }
                if(!(filteredBuildings[8] == "White")){
                    chartDatArray.push({type:"line",name:"White",showInLegend:true,dataPoints:whiteLineCopy2})
                    chartCurrentArray.push({ y: whiteSumTotalsList[lastIndex], indexLabel: "White"})
                }
                if(!(filteredBuildings[9] == "Wick 208")){
                    chartDatArray.push({type:"line",name:"Wick 208",showInLegend:true,dataPoints:wick208LineCopy2})
                    chartCurrentArray.push({ y: wick208SumTotalsList[lastIndex], indexLabel: "Wick 208"})
                }
                if(!(filteredBuildings[10] == "Wick 480")){
                    chartDatArray.push({type:"line",name:"Wick 480",showInLegend:true,dataPoints:wick480LineCopy2})
                    chartCurrentArray.push({ y: wick480SumTotalsList[lastIndex], indexLabel: "Wick 480"})
                }
                if(!(filteredBuildings[11] == "Yost")){
                    chartDatArray.push({type:"line",name:"Yost",showInLegend:true,dataPoints:yostLineCopy2})
                    chartCurrentArray.push({ y: yostSumTotalsList[lastIndex], indexLabel: "Yost"})
                }
                if(!(filteredBuildings[12] == "Olin (Sum)")){
                    chartDatArray.push({type:"line",name:"Olin (Sum)",showInLegend:true,dataPoints:olinSumLineCopy2})
                    chartCurrentArray.push({ y: olinSumSumTotalsList[lastIndex], indexLabel: "Olin (Sum)"})
                }
                if(!(filteredBuildings[13] == "Sears (Sum)")){
                    chartDatArray.push({type:"line",name:"Sears (Sum)",showInLegend:true,dataPoints:searsSumLineCopy2})
                    chartCurrentArray.push({ y: searsSumSumTotalsList[lastIndex], indexLabel: "Sears (Sum)"})
                }
                if(!(filteredBuildings[14] == "Wick (Sum)")){
                    chartDatArray.push({type:"line",name:"Wick (Sum)",showInLegend:true,dataPoints:wickSumLineCopy2})
                    chartCurrentArray.push({ y: wickSumSumTotalsList[lastIndex], indexLabel: "Wick (Sum)"})
                }
                
                //Redraw our charts so they display the proper, newly-filtered, data.
                renderAllCharts();
            }
            
            //All points are measured by peak values
            else if(mes == "peak" && max == false) {
                average = false;
                total = false;
                max = true;
                
                clearAllArrays();
                
                glennanLine2 = [];
                nordLine2 = [];
                olin480Line2 = [];
                olin208Line2 = [];
                rock480Line2 = [];
                sears480Line2 = [];
                sears208Line2 = [];
                tomlinsonLine2 = [];
                whiteLine2 = [];
                wick208Line2 = [];
                wick480Line2 = [];
                yostLine2 = [];
                olinSumLine2 = [];
                searsSumLine2 = [];
                wickSumLine2 = [];
                
                glennanLineCopy2 = [];
                nordLineCopy2 = [];
                olin480LineCopy2 = [];
                olin208LineCopy2 = [];
                rock480LineCopy2 = [];
                sears480LineCopy2 = [];
                sears208LineCopy2 = [];
                tomlinsonLineCopy2 = [];
                whiteLineCopy2 = [];
                wick208LineCopy2 = [];
                wick480LineCopy2 = [];
                yostLineCopy2 = [];
                olinSumLineCopy2 = [];
                searsSumLineCopy2 = [];
                wickSumLineCopy2 = [];
                
                glennanResList = [];
                nordResList = [];
                olin480ResList = [];
                olin208ResList = [];
                rock480ResList = [];
                sears480ResList = [];
                sears208ResList = [];
                tomlinsonResList = [];
                whiteResList = [];
                wick208ResList = [];
                wick480ResList = [];
                yostResList = [];
                olinSumResList = [];
                searsSumResList = [];
                wickSumResList = [];
                
                if(dateTimeArray.length == 1) {
                    glennanResList.push(glennanArray[0]);
                    nordResList.push(nordArray[0]);
                    olin480ResList.push(olin480Array[0]);
                    olin208ResList.push(olin208Array[0]);
                    rock480ResList.push(rock480Array[0]);
                    sears480ResList.push(sears480Array[0]);
                    sears208ResList.push(sears208Array[0]);
                    tomlinsonResList.push(tomlinsonArray[0]);
                    whiteResList.push(whiteArray[0]);
                    wick208ResList.push(wick208Array[0]);
                    wick480ResList.push(wick480Array[0]);
                    yostResList.push(yostArray[0]);
                    olinSumResList.push(olinSumArray[0]);
                    searsSumResList.push(searsSumArray[0]);
                    wickSumResList.push(wickSumArray[0]);
                }
                
                else {
                    
                    for(var r = dateTimeArray.indexOf(from3); r <= dateTimeArray.lastIndexOf(to3); r++){
                        
                        //Do this if it is the first in the array
                        if(r == dateTimeArray.indexOf(from3)) {
                            tempGlennanResList = [];
                            tempNordResList = [];
                            tempOlin208ResList = [];
                            tempOlin480ResList = [];
                            tempRock480ResList = [];
                            tempSears208ResList = [];
                            tempSears480ResList = [];
                            tempTomlinsonResList = [];
                            tempWhiteResList = [];
                            tempWick208ResList = [];
                            tempWick480ResList = [];
                            tempYostResList = [];
                            tempOlinSumResList = [];
                            tempSearsSumResList = [];
                            tempWickSumResList = [];
                            
                            tempGlennanResList.push(glennanArray[r]);
                            tempNordResList.push(nordArray[r]);
                            tempOlin480ResList.push(olin480Array[r]);
                            tempOlin208ResList.push(olin208Array[r]);
                            tempRock480ResList.push(rock480Array[r]);
                            tempSears480ResList.push(sears480Array[r]);
                            tempSears208ResList.push(sears208Array[r]);
                            tempTomlinsonResList.push(tomlinsonArray[r]);
                            tempWhiteResList.push(whiteArray[r]);
                            tempWick208ResList.push(wick208Array[r]);
                            tempWick480ResList.push(wick480Array[r]);
                            tempYostResList.push(yostArray[r]);
                            tempOlinSumResList.push(olinSumArray[r]);
                            tempSearsSumResList.push(searsSumArray[r]);
                            tempWickSumResList.push(wickSumArray[r]);
                        }
                        
                        else {
                            
                            var d2 = new Date(dateTimeArray[r]);
                            var d1 = new Date(dateTimeArray[r-1]);
                            
                            if((minutes && d2.getMinutes() == d1.getMinutes()) || (hours && d2.getHours() == d1.getHours())) {
                                tempGlennanResList.push(glennanArray[r]);
                                tempNordResList.push(nordArray[r]);
                                tempOlin480ResList.push(olin480Array[r]);
                                tempOlin208ResList.push(olin208Array[r]);
                                tempRock480ResList.push(rock480Array[r]);
                                tempSears480ResList.push(sears480Array[r]);
                                tempSears208ResList.push(sears208Array[r]);
                                tempTomlinsonResList.push(tomlinsonArray[r]);
                                tempWhiteResList.push(whiteArray[r]);
                                tempWick208ResList.push(wick208Array[r]);
                                tempWick480ResList.push(wick480Array[r]);
                                tempYostResList.push(yostArray[r]);
                                tempOlinSumResList.push(olinSumArray[r]);
                                tempSearsSumResList.push(searsSumArray[r]);
                                tempWickSumResList.push(wickSumArray[r]);
                            }
                               else {
                                   glennanResList.push(getPeak(tempGlennanResList));
                                   nordResList.push(getPeak(tempNordResList));
                                   olin480ResList.push(getPeak(tempOlin480ResList));
                                   olin208ResList.push(getPeak(tempOlin208ResList));
                                   rock480ResList.push(getPeak(tempRock480ResList));
                                   sears480ResList.push(getPeak(tempSears480ResList));
                                   sears208ResList.push(getPeak(tempSears208ResList));
                                   tomlinsonResList.push(getPeak(tempTomlinsonResList));
                                   whiteResList.push(getPeak(tempWhiteResList));
                                   wick208ResList.push(getPeak(tempWick208ResList));
                                   wick480ResList.push(getPeak(tempWick480ResList));
                                   yostResList.push(getPeak(tempYostResList));
                                   olinSumResList.push(getPeak(tempOlinSumResList));
                                   searsSumResList.push(getPeak(tempSearsSumResList));
                                   wickSumResList.push(getPeak(tempWickSumResList));
                                   
                                   tempGlennanResList = [];
                                   tempNordResList = [];
                                   tempOlin208ResList = [];
                                   tempOlin480ResList = [];
                                   tempRock480ResList = [];
                                   tempSears208ResList = [];
                                   tempSears480ResList = [];
                                   tempTomlinsonResList = [];
                                   tempWhiteResList = [];
                                   tempWick208ResList = [];
                                   tempWick480ResList = [];
                                   tempYostResList = [];
                                   tempOlinSumResList = [];
                                   tempSearsSumResList = [];
                                   tempWickSumResList = [];
                                   
                                   tempGlennanResList.push(glennanArray[r]);
                                   tempNordResList.push(nordArray[r]);
                                   tempOlin480ResList.push(olin480Array[r]);
                                   tempOlin208ResList.push(olin208Array[r]);
                                   tempRock480ResList.push(rock480Array[r]);
                                   tempSears480ResList.push(sears480Array[r]);
                                   tempSears208ResList.push(sears208Array[r]);
                                   tempTomlinsonResList.push(tomlinsonArray[r]);
                                   tempWhiteResList.push(whiteArray[r]);
                                   tempWick208ResList.push(wick208Array[r]);
                                   tempWick480ResList.push(wick480Array[r]);
                                   tempYostResList.push(yostArray[r]);
                                   tempOlinSumResList.push(olinSumArray[r]);
                                   tempSearsSumResList.push(searsSumArray[r]);
                                   tempWickSumResList.push(wickSumArray[r]);
                                   
                               }
                               
                               if(r == dateTimeArray.lastIndexOf(to3)) {
                                   glennanResList.push(getPeak(tempGlennanResList));
                                   nordResList.push(getPeak(tempNordResList));
                                   olin480ResList.push(getPeak(tempOlin480ResList));
                                   olin208ResList.push(getPeak(tempOlin208ResList));
                                   rock480ResList.push(getPeak(tempRock480ResList));
                                   sears480ResList.push(getPeak(tempSears480ResList));
                                   sears208ResList.push(getPeak(tempSears208ResList));
                                   tomlinsonResList.push(getPeak(tempTomlinsonResList));
                                   whiteResList.push(getPeak(tempWhiteResList));
                                   wick208ResList.push(getPeak(tempWick208ResList));
                                   wick480ResList.push(getPeak(tempWick480ResList));
                                   yostResList.push(getPeak(tempYostResList));
                                   olinSumResList.push(getPeak(tempOlinSumResList));
                                   searsSumResList.push(getPeak(tempSearsSumResList));
                                   wickSumResList.push(getPeak(tempWickSumResList));
                                   
                                   tempGlennanResList = [];
                                   tempNordResList = [];
                                   tempOlin208ResList = [];
                                   tempOlin480ResList = [];
                                   tempRock480ResList = [];
                                   tempSears208ResList = [];
                                   tempSears480ResList = [];
                                   tempTomlinsonResList = [];
                                   tempWhiteResList = [];
                                   tempWick208ResList = [];
                                   tempWick480ResList = [];
                                   tempYostResList = [];
                                   tempOlinSumResList = [];
                                   tempSearsSumResList = [];
                                   tempWickSumResList = [];
                               }
                               
                        }
                        
                        
                    }
                    
                }
                
                
                
                //Afterwards, put the new info in the copy2 array.
                for(var z = 0; z < resDTArray.length; z++) {
                    glennanLine2.push({x: z, y: glennanResList[z], label: resDTArray[z]})
                    nordLine2.push({x: z, y: nordResList[z], label: resDTArray[z]})
                    olin480Line2.push({x: z, y: olin480ResList[z], label: resDTArray[z]})
                    olin208Line2.push({x: z, y: olin208ResList[z], label: resDTArray[z]})
                    rock480Line2.push({x: z, y: rock480ResList[z], label: resDTArray[z]})
                    sears480Line2.push({x: z, y: sears480ResList[z], label: resDTArray[z]})
                    sears208Line2.push({x: z, y: sears208ResList[z], label: resDTArray[z]})
                    tomlinsonLine2.push({x: z, y: tomlinsonResList[z], label: resDTArray[z]})
                    whiteLine2.push({x: z, y: whiteResList[z], label: resDTArray[z]})
                    wick208Line2.push({x: z, y: wick208ResList[z], label: resDTArray[z]})
                    wick480Line2.push({x: z, y: wick480ResList[z], label: resDTArray[z]})
                    yostLine2.push({x: z, y: yostResList[z], label: resDTArray[z]})
                    olinSumLine2.push({x: z, y: olinSumResList[z], label: resDTArray[z]})
                    searsSumLine2.push({x: z, y: searsSumResList[z], label: resDTArray[z]})
                    wickSumLine2.push({x: z, y: wickSumResList[z], label: resDTArray[z]})
                    
                    glennanLineCopy2 = glennanLine2;
                    nordLineCopy2 = nordLine2;
                    olin480LineCopy2 = olin480Line2;
                    olin208LineCopy2 = olin208Line2;
                    rock480LineCopy2 = rock480Line2;
                    sears480LineCopy2 = sears480Line2;
                    sears208LineCopy2 = sears208Line2;
                    tomlinsonLineCopy2 = tomlinsonLine2;
                    whiteLineCopy2 = whiteLine2;
                    wick208LineCopy2 = wick208Line2;
                    wick480LineCopy2 = wick480Line2;
                    yostLineCopy2 = yostLine2;
                    olinSumLineCopy2 = olinSumLine2;
                    searsSumLineCopy2 = searsSumLine2;
                    wickSumLineCopy2 = wickSumLine2;
                }
                
                glennanMaxTotalsList = [];
                nordMaxTotalsList = [];
                olin480MaxTotalsList = [];
                olin208MaxTotalsList = [];
                rock480MaxTotalsList = [];
                sears480MaxTotalsList = [];
                sears208MaxTotalsList = [];
                tomlinsonMaxTotalsList = [];
                whiteMaxTotalsList = [];
                wick208MaxTotalsList = [];
                wick480MaxTotalsList = [];
                yostMaxTotalsList = [];
                olinSumMaxTotalsList = [];
                searsSumMaxTotalsList = [];
                wickSumMaxTotalsList = [];
                
                for(var s = 0; s < dateTimeArray.length; s++) {
                    if(s == 0) {
                        tempGlennanResList = [];
                        tempNordResList = [];
                        tempOlin208ResList = [];
                        tempOlin480ResList = [];
                        tempRock480ResList = [];
                        tempSears208ResList = [];
                        tempSears480ResList = [];
                        tempTomlinsonResList = [];
                        tempWhiteResList = [];
                        tempWick208ResList = [];
                        tempWick480ResList = [];
                        tempYostResList = [];
                        tempOlinSumResList = [];
                        tempSearsSumResList = [];
                        tempWickSumResList = [];
                        
                        tempGlennanResList.push(glennanArray[s]);
                        tempNordResList.push(nordArray[s]);
                        tempOlin480ResList.push(olin480Array[s]);
                        tempOlin208ResList.push(olin208Array[s]);
                        tempRock480ResList.push(rock480Array[s]);
                        tempSears480ResList.push(sears480Array[s]);
                        tempSears208ResList.push(sears208Array[s]);
                        tempTomlinsonResList.push(tomlinsonArray[s]);
                        tempWhiteResList.push(whiteArray[s]);
                        tempWick208ResList.push(wick208Array[s]);
                        tempWick480ResList.push(wick480Array[s]);
                        tempYostResList.push(yostArray[s]);
                        tempOlinSumResList.push(olinSumArray[s]);
                        tempSearsSumResList.push(searsSumArray[s]);
                        tempWickSumResList.push(wickSumArray[s]);
                    }
                    else {
                        var d2 = new Date(dateTimeArray[s]);
                        var d1 = new Date(dateTimeArray[s-1]);
                        if((minutes && d2.getMinutes() == d1.getMinutes()) || (hours && d2.getHours() == d1.getHours())) {
                            
                            tempGlennanResList.push(glennanArray[s]);
                            tempNordResList.push(nordArray[s]);
                            tempOlin480ResList.push(olin480Array[s]);
                            tempOlin208ResList.push(olin208Array[s]);
                            tempRock480ResList.push(rock480Array[s]);
                            tempSears480ResList.push(sears480Array[s]);
                            tempSears208ResList.push(sears208Array[s]);
                            tempTomlinsonResList.push(tomlinsonArray[s]);
                            tempWhiteResList.push(whiteArray[s]);
                            tempWick208ResList.push(wick208Array[s]);
                            tempWick480ResList.push(wick480Array[s]);
                            tempYostResList.push(yostArray[s]);
                            tempOlinSumResList.push(olinSumArray[s]);
                            tempSearsSumResList.push(searsSumArray[s]);
                            tempWickSumResList.push(wickSumArray[s]);
                            
                            
                        }
                           
                           else {
                               
                               glennanMaxTotalsList.push(getPeak(tempGlennanResList));
                               nordMaxTotalsList.push(getPeak(tempNordResList));
                               olin480MaxTotalsList.push(getPeak(tempOlin480ResList));
                               olin208MaxTotalsList.push(getPeak(tempOlin208ResList));
                               rock480MaxTotalsList.push(getPeak(tempRock480ResList));
                               sears480MaxTotalsList.push(getPeak(tempSears480ResList));
                               sears208MaxTotalsList.push(getPeak(tempSears208ResList));
                               tomlinsonMaxTotalsList.push(getPeak(tempTomlinsonResList));
                               whiteMaxTotalsList.push(getPeak(tempWhiteResList));
                               wick208MaxTotalsList.push(getPeak(tempWick208ResList));
                               wick480MaxTotalsList.push(getPeak(tempWick480ResList));
                               yostMaxTotalsList.push(getPeak(tempYostResList));
                               olinSumMaxTotalsList.push(getPeak(tempOlinSumResList));
                               searsSumMaxTotalsList.push(getPeak(tempSearsSumResList));
                               wickSumMaxTotalsList.push(getPeak(tempWickSumResList));
                               
                               tempGlennanResList = [];
                               tempNordResList = [];
                               tempOlin208ResList = [];
                               tempOlin480ResList = [];
                               tempRock480ResList = [];
                               tempSears208ResList = [];
                               tempSears480ResList = [];
                               tempTomlinsonResList = [];
                               tempWhiteResList = [];
                               tempWick208ResList = [];
                               tempWick480ResList = [];
                               tempYostResList = [];
                               tempOlinSumResList = [];
                               tempSearsSumResList = [];
                               tempWickSumResList = [];
                               
                               tempGlennanResList.push(glennanArray[s]);
                               tempNordResList.push(nordArray[s]);
                               tempOlin480ResList.push(olin480Array[s]);
                               tempOlin208ResList.push(olin208Array[s]);
                               tempRock480ResList.push(rock480Array[s]);
                               tempSears480ResList.push(sears480Array[s]);
                               tempSears208ResList.push(sears208Array[s]);
                               tempTomlinsonResList.push(tomlinsonArray[s]);
                               tempWhiteResList.push(whiteArray[s]);
                               tempWick208ResList.push(wick208Array[s]);
                               tempWick480ResList.push(wick480Array[s]);
                               tempYostResList.push(yostArray[s]);
                               tempOlinSumResList.push(olinSumArray[s]);
                               tempSearsSumResList.push(searsSumArray[s]);
                               tempWickSumResList.push(wickSumArray[s]);
                           }
                           
                           if(s == dateTimeArray.length - 1) {
                               glennanMaxTotalsList.push(getPeak(tempGlennanResList));
                               nordMaxTotalsList.push(getPeak(tempNordResList));
                               olin480MaxTotalsList.push(getPeak(tempOlin480ResList));
                               olin208MaxTotalsList.push(getPeak(tempOlin208ResList));
                               rock480MaxTotalsList.push(getPeak(tempRock480ResList));
                               sears480MaxTotalsList.push(getPeak(tempSears480ResList));
                               sears208MaxTotalsList.push(getPeak(tempSears208ResList));
                               tomlinsonMaxTotalsList.push(getPeak(tempTomlinsonResList));
                               whiteMaxTotalsList.push(getPeak(tempWhiteResList));
                               wick208MaxTotalsList.push(getPeak(tempWick208ResList));
                               wick480MaxTotalsList.push(getPeak(tempWick480ResList));
                               yostMaxTotalsList.push(getPeak(tempYostResList));
                               olinSumMaxTotalsList.push(getPeak(tempOlinSumResList));
                               searsSumMaxTotalsList.push(getPeak(tempSearsSumResList));
                               wickSumMaxTotalsList.push(getPeak(tempWickSumResList));
                               
                               tempGlennanResList = [];
                               tempNordResList = [];
                               tempOlin208ResList = [];
                               tempOlin480ResList = [];
                               tempRock480ResList = [];
                               tempSears208ResList = [];
                               tempSears480ResList = [];
                               tempTomlinsonResList = [];
                               tempWhiteResList = [];
                               tempWick208ResList = [];
                               tempWick480ResList = [];
                               tempYostResList = [];
                               tempOlinSumResList = [];
                               tempSearsSumResList = [];
                               tempWickSumResList = [];
                           }
                    }
                }
                
                //Updating Peaks
                glennanPeak = getPeak(glennanMaxTotalsList)
                nordPeak = getPeak(nordMaxTotalsList)
                olin480Peak = getPeak(olin480MaxTotalsList)
                olin208Peak = getPeak(olin208MaxTotalsList)
                rock480Peak = getPeak(rock480MaxTotalsList)
                sears480Peak = getPeak(sears480MaxTotalsList)
                sears208Peak = getPeak(sears208MaxTotalsList)
                tomlinsonPeak = getPeak(tomlinsonMaxTotalsList)
                whitePeak = getPeak(whiteMaxTotalsList)
                wick208Peak = getPeak(wick208MaxTotalsList)
                wick480Peak = getPeak(wick480MaxTotalsList)
                yostPeak = getPeak(yostMaxTotalsList)
                olinSumPeak = getPeak(olinSumMaxTotalsList)
                searsSumPeak = getPeak(searsSumMaxTotalsList)
                wickSumPeak = getPeak(wickSumMaxTotalsList)
                
                glennanLine2Copy = [];
                nordLine2Copy = [];
                olin480Line2Copy = [];
                olin208Line2Copy = [];
                rock480Line2Copy = [];
                sears480Line2Copy = [];
                sears208Line2Copy = [];
                tomlinsonLine2Copy = [];
                whiteLine2Copy = [];
                wick208Line2Copy = [];
                wick480Line2Copy = [];
                yostLine2Copy = [];
                olinSumLine2Copy = [];
                searsSumLine2Copy = [];
                wickSumLine2Copy = [];
                
                for(var j = 0; j < dateTimeArrayCopy.length; j++) {
                    glennanLine2Copy.push({x: j, y: glennanMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    nordLine2Copy.push({x: j, y: nordMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin480Line2Copy.push({x: j, y: olin480MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    olin208Line2Copy.push({x: j, y: olin208MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    rock480Line2Copy.push({x: j, y: rock480MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears480Line2Copy.push({x: j, y: sears480MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    sears208Line2Copy.push({x: j, y: sears208MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    tomlinsonLine2Copy.push({x: j, y: tomlinsonMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    whiteLine2Copy.push({x: j, y: whiteMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick208Line2Copy.push({x: j, y: wick208MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    wick480Line2Copy.push({x: j, y: wick480MaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    yostLine2Copy.push({x: j, y: yostMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    olinSumLine2Copy.push({x: j, y: olinSumMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    searsSumLine2Copy.push({x: j, y: searsSumMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                    wickSumLine2Copy.push({x: j, y: wickSumMaxTotalsList[j], label: dateTimeArrayCopy[j]})
                }
                
                var lastIndex = resDTArray.length - 1;
                
                tempGlennanResList = [];
                tempNordResList = [];
                tempOlin208ResList = [];
                tempOlin480ResList = [];
                tempRock480ResList = [];
                tempSears208ResList = [];
                tempSears480ResList = [];
                tempTomlinsonResList = [];
                tempWhiteResList = [];
                tempWick208ResList = [];
                tempWick480ResList = [];
                tempYostResList = [];
                tempOlinSumResList = [];
                tempSearsSumResList = [];
                tempWickSumResList = [];
                //Get new reslist for avg
                if(!(filteredBuildings[0] == "Glennan")){
                    chartDatArray.push({type:"line",name:"Glennan",showInLegend:true,dataPoints:glennanLineCopy2})
                    chartCurrentArray.push({ y: glennanMaxTotalsList[lastIndex], indexLabel: "Glennan"})
                }
                if(!(filteredBuildings[1] == "Nord")){
                    chartDatArray.push({type:"line",name:"Nord",showInLegend:true,dataPoints:nordLineCopy2})
                    chartCurrentArray.push({ y: nordMaxTotalsList[lastIndex], indexLabel: "Nord"})
                }
                if(!(filteredBuildings[2] == "Olin 480")){
                    chartDatArray.push({type:"line",name:"Olin 480",showInLegend:true,dataPoints:olin480LineCopy2})
                    chartCurrentArray.push({ y: olin480MaxTotalsList[lastIndex], indexLabel: "Olin 480"})
                }
                if(!(filteredBuildings[3] == "Olin 208")){
                    chartDatArray.push({type:"line",name:"Olin 208",showInLegend:true,dataPoints:olin208LineCopy2})
                    chartCurrentArray.push({ y: olin208MaxTotalsList[lastIndex], indexLabel: "Olin 208"})
                }
                if(!(filteredBuildings[4] == "Rock 480")){
                    chartDatArray.push({type:"line",name:"Rock 480",showInLegend:true,dataPoints:rock480LineCopy2})
                    chartCurrentArray.push({ y: rock480MaxTotalsList[lastIndex], indexLabel: "Rock 480"})
                }
                if(!(filteredBuildings[5] == "Sears 480")){
                    chartDatArray.push({type:"line",name:"Sears 480",showInLegend:true,dataPoints:sears480LineCopy2})
                    chartCurrentArray.push({ y: sears480MaxTotalsList[lastIndex], indexLabel: "Sears 480"})
                }
                if(!(filteredBuildings[6] == "Sears 208")){
                    chartDatArray.push({type:"line",name:"Sears 208",showInLegend:true,dataPoints:sears208LineCopy2})
                    chartCurrentArray.push({ y: sears208MaxTotalsList[lastIndex], indexLabel: "Sears 208"})
                }
                if(!(filteredBuildings[7] == "Tomlinson")){
                    chartDatArray.push({type:"line",name:"Tomlinson",showInLegend:true,dataPoints:tomlinsonLineCopy2})
                    chartCurrentArray.push({ y: tomlinsonMaxTotalsList[lastIndex], indexLabel: "Tomlinson"})
                }
                if(!(filteredBuildings[8] == "White")){
                    chartDatArray.push({type:"line",name:"White",showInLegend:true,dataPoints:whiteLineCopy2})
                    chartCurrentArray.push({ y: whiteMaxTotalsList[lastIndex], indexLabel: "White"})
                }
                if(!(filteredBuildings[9] == "Wick 208")){
                    chartDatArray.push({type:"line",name:"Wick 208",showInLegend:true,dataPoints:wick208LineCopy2})
                    chartCurrentArray.push({ y: wick208MaxTotalsList[lastIndex], indexLabel: "Wick 208"})
                }
                if(!(filteredBuildings[10] == "Wick 480")){
                    chartDatArray.push({type:"line",name:"Wick 480",showInLegend:true,dataPoints:wick480LineCopy2})
                    chartCurrentArray.push({ y: wick480MaxTotalsList[lastIndex], indexLabel: "Wick 480"})
                }
                if(!(filteredBuildings[11] == "Yost")){
                    chartDatArray.push({type:"line",name:"Yost",showInLegend:true,dataPoints:yostLineCopy2})
                    chartCurrentArray.push({ y: yostMaxTotalsList[lastIndex], indexLabel: "Yost"})
                }
                if(!(filteredBuildings[12] == "Olin (Sum)")){
                    chartDatArray.push({type:"line",name:"Olin (Sum)",showInLegend:true,dataPoints:olinSumLineCopy2})
                    chartCurrentArray.push({ y: olinSumMaxTotalsList[lastIndex], indexLabel: "Olin (Sum)"})
                }
                if(!(filteredBuildings[13] == "Sears (Sum)")){
                    chartDatArray.push({type:"line",name:"Sears (Sum)",showInLegend:true,dataPoints:searsSumLineCopy2})
                    chartCurrentArray.push({ y: searsSumMaxTotalsList[lastIndex], indexLabel: "Sears (Sum)"})
                }
                if(!(filteredBuildings[14] == "Wick (Sum)")){
                    chartDatArray.push({type:"line",name:"Wick (Sum)",showInLegend:true,dataPoints:wickSumLineCopy2})
                    chartCurrentArray.push({ y: wickSumMaxTotalsList[lastIndex], indexLabel: "Wick (Sum)"})
                }
                
                //Redraw our charts so they display the proper, newly-filtered, data.
                renderAllCharts();

            }

        }
        
        
        
    }

	//Calls getdata.php to grab the initial data.
	function getSQL(){
        //If the browser supports the XMLHttpRequest object, creates an XMLHttpRequest object. If not, creates an ActiveXObject.
		if(window.XMLHttpRequest){
			xmlhttp = new XMLHttpRequest();
		} else {
			xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
		}
		xmlhttp.onreadystatechange = function(){
			if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
				var received = trimResponse(xmlhttp.responseText);
				var obj = JSON.parse(received);
				var resultArray = obj.sensordata;
				parseResults(resultArray);
			}
		};
		xmlhttp.open("GET","getdata.php",true);
		xmlhttp.send();
	}

	//Grabs a single new line of data.
	function grabNewLine(){
		if(window.XMLHttpRequest){
			xmlhttp = new XMLHttpRequest();
		} else {
			xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
		}
		xmlhttp.onreadystatechange = function(){
			if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
				currentline += 1;	//Increment currentline so that we keep progressing through the SQL.
				var received = trimResponse(xmlhttp.responseText);
				var obj = JSON.parse(received);
				var result = obj.sensordata[0];
				parseNewLine(result);
			}
		};
		var baseget = "getsqlline.php?line=";
		var finalget = baseget.concat(currentline);
		xmlhttp.open("GET", finalget ,true);
		xmlhttp.send();
	}

	//When received, the php data from the table is surrounded with HTML tags, which will screw up the parsing.
	//This is a helper function to strip those tags, leaving us with our desired JSON object.
	function trimResponse(responseString){
		var trimmed = responseString.replace("<!DOCTYPE html>", '');
		trimmed = trimmed.replace("<html>", '');
		trimmed = trimmed.replace("<body>", '');
		trimmed = trimmed.replace("</body>", '');
		trimmed = trimmed.replace("</html>", '');
		return trimmed
	}

	//This helper function puts the data from the parsed JSON table into the arrays we have set up to store them.
	function parseResults(resultArray){
		for(var i = 0; i < resultArray.length; i++){
			dateTimeArray.push(resultArray[i].Date_Time);
			glennanArray.push(parseInt(resultArray[i].Glennan));
			nordArray.push(parseInt(resultArray[i].Nord));
			olin480Array.push(parseInt(resultArray[i].Olin_480));
			olin208Array.push(parseInt(resultArray[i].Olin_208));
			rock480Array.push(parseInt(resultArray[i].Rock_480));
			sears480Array.push(parseInt(resultArray[i].Sears_480));
			sears208Array.push(parseInt(resultArray[i].Sears_208));
			tomlinsonArray.push(parseInt(resultArray[i].Tomlinson));
			whiteArray.push(parseInt(resultArray[i].White));
			wick208Array.push(parseInt(resultArray[i].Wick_208));
			wick480Array.push(parseInt(resultArray[i].Wick_480));
			yostArray.push(parseInt(resultArray[i].Yost));
			olinSumArray.push(parseInt(resultArray[i].Olin_Sum));
			searsSumArray.push(parseInt(resultArray[i].Sears_Sum));
			wickSumArray.push(parseInt(resultArray[i].Wick_Sum));
		}

		//now that the JSON data has been parsed, the arrays are populated and we can run our Chart setup.
		this.drawChart();
		this.pieChart();
		this.columnGraph();
	}

	//Parse our new line of data.
	function parseNewLine(result){
		dateTimeArray.push(result.Date_Time);
		glennanArray.push(parseInt(result.Glennan));
		nordArray.push(parseInt(result.Nord));
		olin480Array.push(parseInt(result.Olin_480));
		olin208Array.push(parseInt(result.Olin_208));
		rock480Array.push(parseInt(result.Rock_480));
		sears480Array.push(parseInt(result.Sears_480));
		sears208Array.push(parseInt(result.Sears_208));
		tomlinsonArray.push(parseInt(result.Tomlinson));
		whiteArray.push(parseInt(result.White));
		wick208Array.push(parseInt(result.Wick_208));
		wick480Array.push(parseInt(result.Wick_480));
		yostArray.push(parseInt(result.Yost));
		olinSumArray.push(parseInt(result.Olin_Sum));
		searsSumArray.push(parseInt(result.Sears_Sum));
		wickSumArray.push(parseInt(result.Wick_Sum));

		//Update all of our charts to include the new data
		this.updateAll();
	}

	//Helper function to handle updating all charts.
	function updateAll(){
		updateLineData();	//Updates the individual arrays of line chart data.
		getAllAvgs();		//Updates the individual average variables
        getAllTotals();     //Updates the individual sum variables
        getAllPeaks();      //Updates the individual max variables
		//If a filter is in place, filterGraphData already handles rerendering the graphs.
		if(filtered){
			filterGraphData();
		}
		//Otherwise, we do the steps to rerender the graphs.
		else{
			clearAllArrays();
			updateAllArrays();
			renderAllCharts();
		}
	}

	//Find the average value in an array.
	function getAverage(intArray){
		var sum = 0;
		for(var i = 0; i < intArray.length; i++){
			if(!isNaN(intArray[i])){
				sum += intArray[i];
			}
		}
		var avg = sum / intArray.length;
		return avg;
	}
    
    //Find the sum of all values in an array
    function getTotal(intArray) {
        var sum = 0;
		for(var i = 0; i < intArray.length; i++){
			if(!isNaN(intArray[i])){
				sum += intArray[i];
			}
		}
        return sum;
    }
    
    //Find the max raw value in the time period of the chosen resolution
    function getPeak(intArray) {
        var peak = 0;
        for(var i = 0; i < intArray.length; i++) {
            if(!isNaN(intArray[i])) {
                if(intArray[i] > peak) {
                    peak = intArray[i];
                }
            }
        }
        return peak;
    }

	//Graphing function for the line chart.
	function drawChart(){
		initializeLineData()
		updateLineArray()
        
        minDate = dateTimeArray[0];
        maxDate = dateTimeArray[dateTimeArray.length-1];
        
        minDateCopy = minDate;
        maxDateCopy = maxDate;
        
        //Sets the min and max possible dates
        $("#datetimepicker1").data("DateTimePicker").minDate(minDate);
        $("#datetimepicker2").data("DateTimePicker").maxDate(maxDate);
        $('#datetimepicker1').data("DateTimePicker").date(minDate);
        $('#datetimepicker2').data("DateTimePicker").date(maxDate);

        glennanLine2 = glennanLine;
        nordLine2 = nordLine;
        olin480Line2 = olin480Line;
        olin208Line2 = olin208Line;
        rock480Line2 = rock480Line;
        sears480Line2 = sears480Line;
        sears208Line2 = sears208Line;
        tomlinsonLine2 = tomlinsonLine;
        whiteLine2 = whiteLine;
        wick208Line2 = wick208Line;
        wick480Line2 = wick480Line;
        yostLine2 = yostLine;
        olinSumLine2 = olinSumLine;
        searsSumLine2 = searsSumLine;
        wickSumLine2 = wickSumLine;

        glennanLineCopy2 = glennanLineCopy;
        nordLineCopy2 = nordLineCopy;
        olin480LineCopy2 = olin480LineCopy;
        olin208LineCopy2 = olin208LineCopy;
        rock480LineCopy2 = rock480LineCopy;
        sears480LineCopy2 = sears480LineCopy;
        sears208LineCopy2 = sears208LineCopy;
        tomlinsonLineCopy2 = tomlinsonLineCopy;
        whiteLineCopy2 = whiteLineCopy;
        wick208LineCopy2 = wick208LineCopy;
        wick480LineCopy2 = wick480LineCopy;
        yostLineCopy2 = yostLineCopy;
        olinSumLineCopy2 = olinSumLineCopy;
        searsSumLineCopy2 = searsSumLineCopy;
        wickSumLineCopy2 = wickSumLineCopy;

        resDTArray = dateTimeArray;
        
        //Initializes arrays and sets the fact that they have doubles
        
        glennanResList = glennanArray;
        nordResList = nordArray;
        olin480ResList = olin480Array;
        olin208ResList = olin208Array;
        rock480ResList = rock480Array;
        sears480ResList = sears480Array;
        sears208ResList = sears208Array;
        tomlinsonResList = tomlinsonArray;
        whiteResList = whiteArray;
        wick208ResList = wick208Array;
        wick480ResList = wick480Array;
        yostResList = yostArray;
        olinSumResList = olinSumArray;
        searsSumResList = searsSumArray;
        wickSumResList = wickSumArray;
        
        glennanResTotalsList = glennanArray;
        nordResTotalsList = nordArray;
        olin480ResTotalsList = olin480Array;
        olin208ResTotalsList = olin208Array;
        rock480ResTotalsList = rock480Array;
        sears480ResTotalsList = sears480Array;
        sears208ResTotalsList = sears208Array;
        tomlinsonResTotalsList = tomlinsonArray;
        whiteResTotalsList = whiteArray;
        wick208ResTotalsList = wick208Array;
        wick480ResTotalsList = wick480Array;
        yostResTotalsList = yostArray;
        olinSumResTotalsList = olinSumArray;
        searsSumResTotalsList = searsSumArray;
        wickSumResTotalsList = wickSumArray;
        
        glennanAvgTotalsList = glennanArray;
        nordAvgTotalsList = nordArray;
        olin480AvgTotalsList = olin480Array;
        olin208AvgTotalsList = olin208Array;
        rock480AvgTotalsList = rock480Array;
        sears480AvgTotalsList = sears480Array;
        sears208AvgTotalsList = sears208Array;
        tomlinsonAvgTotalsList = tomlinsonArray;
        whiteAvgTotalsList = whiteArray;
        wick208AvgTotalsList = wick208Array;
        wick480AvgTotalsList = wick480Array;
        yostAvgTotalsList = yostArray;
        olinSumAvgTotalsList = olinSumArray;
        searsSumAvgTotalsList = searsSumArray;
        wickSumAvgTotalsList = wickSumArray;
        
        glennanSumTotalsList = glennanArray;
        nordSumTotalsList = nordArray;
        olin480SumTotalsList = olin480Array;
        olin208SumTotalsList = olin208Array;
        rock480SumTotalsList = rock480Array;
        sears480SumTotalsList = sears480Array;
        sears208SumTotalsList = sears208Array;
        tomlinsonSumTotalsList = tomlinsonArray;
        whiteSumTotalsList = whiteArray;
        wick208SumTotalsList = wick208Array;
        wick480SumTotalsList = wick480Array;
        yostSumTotalsList = yostArray;
        olinSumSumTotalsList = olinSumArray;
        searsSumSumTotalsList = searsSumArray;
        wickSumSumTotalsList = wickSumArray;
        
        glennanMaxTotalsList = glennanArray;
        nordMaxTotalsList = nordArray;
        olin480MaxTotalsList = olin480Array;
        olin208MaxTotalsList = olin208Array;
        rock480MaxTotalsList = rock480Array;
        sears480MaxTotalsList = sears480Array;
        sears208MaxTotalsList = sears208Array;
        tomlinsonMaxTotalsList = tomlinsonArray;
        whiteMaxTotalsList = whiteArray;
        wick208MaxTotalsList = wick208Array;
        wick480MaxTotalsList = wick480Array;
        yostMaxTotalsList = yostArray;
        olinSumMaxTotalsList = olinSumArray;
        searsSumMaxTotalsList = searsSumArray;
        wickSumMaxTotalsList = wickSumArray;
        
        resDTArray = dateTimeArray;
        
        dateTimeArrayCopy = dateTimeArray;

		lineChart = new CanvasJS.Chart("div3", {
                                      
              data: chartDatArray
        });
 
        lineChart.render();
	}

	//Populate the line data for our line plot.
	function initializeLineData(){
		for(var r = 0; r < dateTimeArray.length; r++){
			glennanLine.push({x: r, y: glennanArray[r], label: dateTimeArray[r]})
			nordLine.push({x: r, y: nordArray[r], label: dateTimeArray[r]})
			olin480Line.push({x: r, y: olin480Array[r], label: dateTimeArray[r]})
			olin208Line.push({x: r, y: olin208Array[r], label: dateTimeArray[r]})
			rock480Line.push({x: r, y: rock480Array[r], label: dateTimeArray[r]})
			sears480Line.push({x: r, y: sears480Array[r], label: dateTimeArray[r]})
			sears208Line.push({x: r, y: sears208Array[r], label: dateTimeArray[r]})
			tomlinsonLine.push({x: r, y: tomlinsonArray[r], label: dateTimeArray[r]})
			whiteLine.push({x: r, y: whiteArray[r], label: dateTimeArray[r]})
			wick208Line.push({x: r, y: wick208Array[r], label: dateTimeArray[r]})
			wick480Line.push({x: r, y: wick480Array[r], label: dateTimeArray[r]})
			yostLine.push({x: r, y: yostArray[r], label: dateTimeArray[r]})
			olinSumLine.push({x: r, y: olinSumArray[r], label: dateTimeArray[r]})
			searsSumLine.push({x: r, y: searsSumArray[r], label: dateTimeArray[r]})
			wickSumLine.push({x: r, y: wickSumArray[r], label: dateTimeArray[r]})
            
            glennanLineCopy = glennanLine;
            nordLineCopy = nordLine;
            olin480LineCopy = olin480Line;
            olin208LineCopy = olin208Line;
            rock480LineCopy = rock480Line;
            sears480LineCopy = sears480Line;
            sears208LineCopy = sears208Line;
            tomlinsonLineCopy = tomlinsonLine;
            whiteLineCopy = whiteLine;
            wick208LineCopy = wick208Line;
            wick480LineCopy = wick480Line;
            yostLineCopy = yostLine;
            olinSumLineCopy = olinSumLine;
            searsSumLineCopy = searsSumLine;
            wickSumLineCopy = wickSumLine;

		}
	}

	//Adds a new data point to our line chart.
	function updateLineData(){
		var r = (dateTimeArray.length - 1);
		glennanLine.push({x: r, y: glennanArray[r], label: dateTimeArray[r]})
		nordLine.push({x: r, y: nordArray[r], label: dateTimeArray[r]})
		olin480Line.push({x: r, y: olin480Array[r], label: dateTimeArray[r]})
		olin208Line.push({x: r, y: olin208Array[r], label: dateTimeArray[r]})
		rock480Line.push({x: r, y: rock480Array[r], label: dateTimeArray[r]})
		sears480Line.push({x: r, y: sears480Array[r], label: dateTimeArray[r]})
		sears208Line.push({x: r, y: sears208Array[r], label: dateTimeArray[r]})
		tomlinsonLine.push({x: r, y: tomlinsonArray[r], label: dateTimeArray[r]})
		whiteLine.push({x: r, y: whiteArray[r], label: dateTimeArray[r]})
		wick208Line.push({x: r, y: wick208Array[r], label: dateTimeArray[r]})
		wick480Line.push({x: r, y: wick480Array[r], label: dateTimeArray[r]})
		yostLine.push({x: r, y: yostArray[r], label: dateTimeArray[r]})
		olinSumLine.push({x: r, y: olinSumArray[r], label: dateTimeArray[r]})
		searsSumLine.push({x: r, y: searsSumArray[r], label: dateTimeArray[r]})
		wickSumLine.push({x: r, y: wickSumArray[r], label: dateTimeArray[r]})
        
        glennanLineCopy = glennanLine;
        nordLineCopy = nordLine;
        olin480LineCopy = olin480Line;
        olin208LineCopy = olin208Line;
        rock480LineCopy = rock480Line;
        sears480LineCopy = sears480Line;
        sears208LineCopy = sears208Line;
        tomlinsonLineCopy = tomlinsonLine;
        whiteLineCopy = whiteLine;
        wick208LineCopy = wick208Line;
        wick480LineCopy = wick480Line;
        yostLineCopy = yostLine;
        olinSumLineCopy = olinSumLine;
        searsSumLineCopy = searsSumLine;
        wickSumLineCopy = wickSumLine;

		//trimLines()		//If you want the line chart to gain data points over time, remove this.
	}

	//Trim the line arrays to a desired length, to make the plot stay at a constant resolution of data.
	function trimLines(){
		var desiredLength = 200000;
		if(glennanLine.length > desiredLength){
			glennanLine.shift();
		}
		if(nordLine.length > desiredLength){
			nordLine.shift();
		}
		if(olin480Line.length > desiredLength){
			olin480Line.shift();
		}
		if(olin208Line.length > desiredLength){
			olin208Line.shift();
		}
		if(rock480Line.length > desiredLength){
			rock480Line.shift();
		}
		if(sears480Line.length > desiredLength){
			sears480Line.shift();
		}
		if(sears208Line.length > desiredLength){
			sears208Line.shift();
		}
		if(tomlinsonLine.length > desiredLength){
			tomlinsonLine.shift();
		}
		if(whiteLine.length > desiredLength){
			whiteLine.shift();
		}
		if(wick208Line.length > desiredLength){
			wick208Line.shift();
		}
		if(wick480Line.length > desiredLength){
			wick480Line.shift();
		}
		if(yostLine.length > desiredLength){
			yostLine.shift();
		}
		if(olinSumLine.length > desiredLength){
			olinSumLine.shift();
		}
		if(searsSumLine.length > desiredLength){
			searsSumLine.shift();
		}
		if(wickSumLine.length > desiredLength){
			wickSumLine.shift();
		}
        
        glennanLineCopy = glennanLine;
        nordLineCopy = nordLine;
        olin480LineCopy = olin480Line;
        olin208LineCopy = olin208Line;
        rock480LineCopy = rock480Line;
        sears480LineCopy = sears480Line;
        sears208LineCopy = sears208Line;
        tomlinsonLineCopy = tomlinsonLine;
        whiteLineCopy = whiteLine;
        wick208LineCopy = wick208Line;
        wick480LineCopy = wick480Line;
        yostLineCopy = yostLine;
        olinSumLineCopy = olinSumLine;
        searsSumLineCopy = searsSumLine;
        wickSumLineCopy = wickSumLine;
	}

	//Push all individual line arrays into the data array for our line plot.
	//This should only be called when a filter is not active - filterGraphData does this job.
	function updateLineArray(){
		chartDatArray.push({type:"line",name:"Glennan",showInLegend:true,dataPoints:glennanLine})
		chartDatArray.push({type:"line",name:"Nord",showInLegend:true,dataPoints:nordLine})
		chartDatArray.push({type:"line",name:"Olin 480",showInLegend:true,dataPoints:olin480Line})
		chartDatArray.push({type:"line",name:"Olin 208",showInLegend:true,dataPoints:olin208Line})
		chartDatArray.push({type:"line",name:"Rock 480",showInLegend:true,dataPoints:rock480Line})
		chartDatArray.push({type:"line",name:"Sears 480",showInLegend:true,dataPoints:sears480Line})
		chartDatArray.push({type:"line",name:"Sears 208",showInLegend:true,dataPoints:sears208Line})
		chartDatArray.push({type:"line",name:"Tomlinson",showInLegend:true,dataPoints:tomlinsonLine})
		chartDatArray.push({type:"line",name:"White",showInLegend:true,dataPoints:whiteLine})
		chartDatArray.push({type:"line",name:"Wick 208",showInLegend:true,dataPoints:wick208Line})
		chartDatArray.push({type:"line",name:"Wick 480",showInLegend:true,dataPoints:wick480Line})
		chartDatArray.push({type:"line",name:"Yost",showInLegend:true,dataPoints:yostLine})
		chartDatArray.push({type:"line",name:"Olin (Sum)",showInLegend:true,dataPoints:olinSumLine})
		chartDatArray.push({type:"line",name:"Sears (Sum)",showInLegend:true,dataPoints:searsSumLine})
		chartDatArray.push({type:"line",name:"Wick (Sum)",showInLegend:true,dataPoints:wickSumLine})
	}

	//Remove all data from the line plot's data array.
	function clearLineArray(){
		while(chartDatArray.length > 0){
        	chartDatArray.shift();
        }
	}
    
    function pieChart() {
        getAllAvgs()
        updateAvgArray()
        //Similar to the previous chart, but now is a pie chart instead
        //Also used div4 instead of div3
        //-AD
        pieChart = new CanvasJS.Chart("div4", {
        	legend: {
        		maxWidth: 350,
        		itemWidth: 120
        	},
        	data: [{
        		//In the data points, trying to get the value from each datArray as each y-value in each arc. -AD
                type: "pie",
                showInLegend: true,
                legendText: "{indexLabel}",
                dataPoints: chartAvgArray
             }]
         });
         //Named it differently to differentiate the two charts. -AD
         pieChart.render();
    }

    //Populate the array for our pie chart with the averages of the data
    function getAllAvgs(){
    	glennanAvg = getAverage(glennanArray)
    	nordAvg = getAverage(nordArray)
    	olin480Avg = getAverage(olin480Array)
    	olin208Avg = getAverage(olin208Array)
    	rock480Avg = getAverage(rock480Array)
    	sears480Avg = getAverage(sears480Array)
    	sears208Avg = getAverage(sears208Array)
    	tomlinsonAvg = getAverage(tomlinsonArray)
    	whiteAvg = getAverage(whiteArray)
    	wick208Avg = getAverage(wick208Array)
    	wick480Avg = getAverage(wick480Array)
    	yostAvg = getAverage(yostArray)
    	olinSumAvg = getAverage(olinSumArray)
    	searsSumAvg = getAverage(searsSumArray)
    	wickSumAvg = getAverage(wickSumArray)
    }
    
    function getAllTotals() {
        glennanTotal = getTotal(glennanArray);
        nordTotal = getTotal(nordArray);
        olin480Total = getTotal(olin480Array);
        olin208Total = getTotal(olin208Array);
        rock480Total = getTotal(rock480Array)
    	sears480Total = getTotal(sears480Array)
    	sears208Total = getTotal(sears208Array)
    	tomlinsonTotal = getTotal(tomlinsonArray)
    	whiteTotal = getTotal(whiteArray)
    	wick208Total = getTotal(wick208Array)
    	wick480Total = getTotal(wick480Array)
    	yostTotal = getTotal(yostArray)
    	olinSumTotal = getTotal(olinSumArray)
    	searsSumTotal = getTotal(searsSumArray)
    	wickSumTotal = getTotal(wickSumArray)
    }
    
    function getAllPeaks() {
        glennanPeak = getPeak(glennanArray);
        nordPeak = getPeak(nordArray);
        olin480Peak = getPeak(olin480Array);
        olin208Peak = getPeak(olin208Array);
        rock480Peak = getPeak(rock480Array)
    	sears480Peak = getPeak(sears480Array)
    	sears208Peak = getPeak(sears208Array)
    	tomlinsonPeak = getPeak(tomlinsonArray)
    	whitePeak = getPeak(whiteArray)
    	wick208Peak = getPeak(wick208Array)
    	wick480Peak = getPeak(wick480Array)
    	yostPeak = getPeak(yostArray)
    	olinSumPeak = getPeak(olinSumArray)
    	searsSumPeak = getPeak(searsSumArray)
    	wickSumPeak = getPeak(wickSumArray)
    }

    //Push all individual averages into the data array for our pie chart.
	//This should only be called when a filter is not active - filterGraphData does this job.
    function updateAvgArray(){
    	chartAvgArray.push({ y: glennanAvg, indexLabel: "Glennan"})
		chartAvgArray.push({ y: nordAvg, indexLabel: "Nord"})
		chartAvgArray.push({ y: olin480Avg, indexLabel: "Olin 408"})
		chartAvgArray.push({ y: olin208Avg, indexLabel: "Olin 208"})
		chartAvgArray.push({ y: rock480Avg, indexLabel: "Rock 480"})
		chartAvgArray.push({ y: sears480Avg, indexLabel: "Sears 480"})
		chartAvgArray.push({ y: sears208Avg, indexLabel: "Sears 208"})
		chartAvgArray.push({ y: tomlinsonAvg, indexLabel: "Tomlinson"})
		chartAvgArray.push({ y: whiteAvg, indexLabel: "White"})
		chartAvgArray.push({ y: wick208Avg, indexLabel: "Wick 208"})
		chartAvgArray.push({ y: wick480Avg, indexLabel: "Wick 480"})
		chartAvgArray.push({ y: yostAvg, indexLabel: "Yost"})
		chartAvgArray.push({ y: olinSumAvg, indexLabel: "Olin (Sum)"})
		chartAvgArray.push({ y: searsSumAvg, indexLabel: "Sears (Sum)"})
		chartAvgArray.push({ y: wickSumAvg, indexLabel: "Wick (Sum)"})
    }
    

    //Remove all data from our pie chart's data array.
    function clearAvgArray(){
    	while(chartAvgArray.length > 0){
        	chartAvgArray.shift();
        }
    }

    function columnGraph() {
        updateCurrentArray()
        //Similar to the previous chart, but now is a bar graph instead
        //Also used div5 instead of div4
        //-AD
        columnGraph = new CanvasJS.Chart("div5", {
        	legend: {
        		maxWidth: 350,
        		itemWidth: 120
        	},
        	data: [{type: "column",
        		dataPoints: chartCurrentArray
        	}]
        });
        columnGraph.render();                           
    }

    //Find the most recent entries in each sensor's array, and push them into our column graph's data array.
	//This should only be called when a filter is not active - filterGraphData does this job.
    function updateCurrentArray(){
    	var lastIndex = dateTimeArray.length - 1;

    	chartCurrentArray.push({ y: glennanArray[lastIndex], indexLabel: "Glennan"})
    	chartCurrentArray.push({ y: nordArray[lastIndex], indexLabel: "Nord"})
    	chartCurrentArray.push({ y: olin480Array[lastIndex], indexLabel: "Olin 480"})
    	chartCurrentArray.push({ y: olin208Array[lastIndex], indexLabel: "Olin 208"})
    	chartCurrentArray.push({ y: rock480Array[lastIndex], indexLabel: "Rock 480"})
    	chartCurrentArray.push({ y: sears480Array[lastIndex], indexLabel: "Sears 480"})
    	chartCurrentArray.push({ y: sears208Array[lastIndex], indexLabel: "Sears 208"})
    	chartCurrentArray.push({ y: tomlinsonArray[lastIndex], indexLabel: "Tomlinson"})
    	chartCurrentArray.push({ y: whiteArray[lastIndex], indexLabel: "White"})
    	chartCurrentArray.push({ y: wick208Array[lastIndex], indexLabel: "Wick 208"})
    	chartCurrentArray.push({ y: wick480Array[lastIndex], indexLabel: "Wick 480"})
    	chartCurrentArray.push({ y: yostArray[lastIndex], indexLabel: "Yost"})
    	chartCurrentArray.push({ y: olinSumArray[lastIndex], indexLabel: "Olin (Sum)"})
    	chartCurrentArray.push({ y: searsSumArray[lastIndex], indexLabel: "Sears (Sum)"})
    	chartCurrentArray.push({ y: wickSumArray[lastIndex], indexLabel: "Wick (Sum)"})
    }

    //Remove all data from our column graph's data array.
    function clearCurrentArray(){
    	while(chartCurrentArray.length > 0){
        	chartCurrentArray.shift();
        }
    }

    //Clear all of our graphs' data arrays.
    function clearAllArrays(){
    	clearLineArray();
    	clearAvgArray();
    	clearCurrentArray();
    }

    //Update the data in alll of our graphs' data arrays.
    function updateAllArrays(){
    	updateLineArray();
    	updateAvgArray();
    	updateCurrentArray();
    }

    //Draw all of our charts.
    function renderAllCharts(){
    	lineChart.render();
    	pieChart.render();
    	columnGraph.render();
    }
    
    //This only calls getSQL at the moment. If you want to draw other things with Javascript on this page,
    //Add the relevant code here.
	function drawAll(){
		this.getSQL();
	}

window.onload=drawAll;




</script>
</body>
</html>
